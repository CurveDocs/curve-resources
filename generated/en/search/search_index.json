{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"Welcome to Curve Finance Resources <p>Use the information within to explore the world of Curve, a leading decentralized exchange, stablecoin provider, and lending platform on Ethereum and EVM-compatible chains.  It's known for it's advanced automated market-makers for stablecoins and volatile assets, and it's unique soft-liquidation system for loans. This documentation provides a clear overview of Curve's diverse features and functionalities. Learn about Curve pools, including stablecoin pools and volatile pools, gain insights into the CRV token, and understand the innovative crvUSD stablecoin and new lending platform.</p> <p>This website offers an easy to understand guide to get to know the whole of Curve's dynamic ecosystem in an easy to read way.  Please see the technical documentation for developer information.</p> Resources and guides to get started with Curve and the Curve DAO <ul> <li> <p>Asset 1 CRV Token</p> <p>Explore the dynamics of the CRV Token: Tokenomics, Staking, Claiming Fees, and more.</p> <p> Learn More</p> </li> <li> <p> image/svg+xml veCRV</p> <p>Obtain veCRV by locking CRV tokens, which allows users to participate in governance, boost their LP rewards, and earn protocol accrued fees.</p> <p> Learn More</p> </li> <li> <p> crvUSD</p> <p>Learn about crvUSD, including its creation, management, and key concepts, along with a comprehensive FAQ section.</p> <p> Learn More</p> </li> <li> <p> Lend</p> <p>Discover Curve's lending system, including how to supply, borrow, and create lending markets.</p> <p> Learn More</p> </li> <li> <p> Pools</p> <p>Understand Curve pools, yield calculations, and the deposit process.</p> <p> Learn More</p> </li> <li> <p> Creating Pools</p> <p>Understand the Pool Factory and dive into the pool creation process.</p> <p> Learn More</p> </li> <li> <p> Reward Gauges</p> <p>Explore gauges in-depth, including creation, boosting CRV rewards, understanding gauge weights, and permissionless rewards.</p> <p> Learn More</p> </li> <li> <p> Governance</p> <p>Gain insights into Curve's governance structure: Vote Locking, Voting, and Proposals.</p> <p> Learn More</p> </li> <li> <p> Multi-Chain</p> <p>Explore the multi-chain aspect of Curve, including bridging funds and understanding the cross-chain functionalities.</p> <p> Learn More</p> </li> <li> <p> Troubleshooting</p> <p>Find solutions for common issues like cross-asset swaps, stuck transactions, and wallet integrations.</p> <p> Learn More</p> </li> </ul>"},{"location":"#useful-links","title":"Useful Links","text":"<ul> <li> Governance Dashboard</li> <li> Governance Forum</li> <li> Telegram</li> <li> Twitter</li> <li> Discord</li> <li> YouTube</li> <li> Technical Docs</li> </ul>"},{"location":"base-features/understanding-curve/","title":"Understanding Curve & Stableswap (v1)","text":"<p>Getting started with Curve isn\u2019t easy, there is a lot to grasp and the unique UI can be a lot to take in. This small guide is intended for Curve beginners with an understanding of DeFi and Crypto. It tries to answer recurring questions about how to get started with Curve and how it works or makes money for liquidity providers.</p>"},{"location":"base-features/understanding-curve/#what-is-curvefi","title":"What is Curve.fi?","text":"<p>The easiest way to understand Curve is to see it as an exchange. Its main goal is to let users and other decentralised protocols exchange ERC-20 tokens (DAI to USDC for example) through it with low fees and low slippage. Unlike exchanges that match a buyer and a seller, Curve uses liquidity pools. To achieve successful exchange volume, Curve needs a high volume of liquidity (tokens) and therefore offers rewards to liquidity providers.</p> <p>Curve is non-custodial, meaning the Curve developers do not have access to your tokens. Curve pools are also non-upgradable, so you can have confidence that the logic protecting your funds can never change.</p>"},{"location":"base-features/understanding-curve/#what-are-liquidity-pools-why-should-i-deposit","title":"What are liquidity pools &amp; why should I deposit?","text":"<p>Liquidity pools are pools of tokens held in smart contracts that allow users to exchange or withdraw tokens at set rates. By adding liquidity to a Curve pool, you earn passive income through trading fees, with rewards based on your contribution. Additionally, you may receive extra incentives like CRV tokens or Points, increasing your returns. Providing liquidity also helps maintain efficient, low-cost trades for all swappers, benefiting the whole DeFi ecosystem.</p> <p>For more information, visit the following section:</p> <p>Understanding Curve Pools</p>"},{"location":"base-features/understanding-curve/#how-much-does-it-cost-to-swap-through-curve","title":"How much does it cost to swap through Curve?","text":"<p>Different pools have different fees.  Most are typically in the range of 0.01-0.4%.  Newer pools have dynamic fees, and so these fees can go higher if the pool is in high  demand.  The current fee is listed on each pool's page.</p>"},{"location":"base-features/understanding-curve/#what-are-those-percentages-next-to-each-pool","title":"What are those percentages next to each pool?","text":"<p>Curve pools may have several different percentages shown next to them in the UI.</p> <p></p> <p>The first column, vAPY, refers to the annualized rate of trading fees earned by liquidity providers in the pool. Swaps through Curve pools generate fees, a portion of which accrue to everybody who has a stake in the pool. Further information is in the Liquidity Provider section.</p> <p>The second column refers to the reward gauges. This entitles liquidity providers to earn bonus CRV emissions. More detail on these bonuses are in the Reward Gauges section.</p>"},{"location":"base-features/understanding-curve/#what-is-the-crv-token","title":"What is the CRV token?","text":"<p>CRV token is a governance and utility token for Curve.</p> <p>Understanding CRV</p> <p>Understanding Governance</p>"},{"location":"base-features/understanding-curve/#can-i-use-curve-on-sidechains","title":"Can I use Curve on sidechains?","text":"<p>Yes. Curve has launched on several sidechains and will continue to do so. Visit our section on Multichain for more information.</p>"},{"location":"base-features/understanding-curve/#how-can-i-launch-a-pool","title":"How Can I Launch a Pool","text":"<p>All new Curve pools are deployed permissionlessly through the Curve Factory. This means anybody can deploy a pool anytime, anywhere. For a full guide, check our Factory Pools section. \u200b</p>"},{"location":"base-features/understanding-curve/#why-has-curve-grown-so-quickly","title":"Why has Curve grown so quickly?","text":"<p>When Curve launched it grew quickly by securing the underdeveloped stablecoin market. Stablecoins have become an inherent part of cryptocurrency for a long time but they now come in many different flavours (DAI, TUSD, sUSD, bUSD, USDC and so on) which means there is a much bigger need for crypto users to move from a stable coin to another. Centralised exchanges tend to have high fees which are problematic for those trying to move from a stable coin to another. As a result, Curve.fi has become the best place to exchange stable coins because of its low fees and low slippage.</p> <p>More recently, Curve launched v2 Crypto Pools to bring the same simplicity and efficiency of Curve's stablecoin pools to transactions between differentially priced assets (ie BTC and ETH). These pools are sufficiently different to justify their own section: \u200b</p>"},{"location":"base-features/understanding-curve/#where-can-i-find-curve-smart-contracts","title":"Where can I find Curve smart contracts?","text":"<p>The Github repository also open sources the bulk of Curve development activity.</p>"},{"location":"base-features/understanding-curve/#whitepaper","title":"Whitepaper","text":"<p>StableSwap (Curve V1) Whitepaper</p> <p>For a detailed overview of Curve V1, please read the official whitepaper.</p>"},{"location":"crv-token/faq/","title":"CRV & veCRV FAQ","text":"CRV &amp; veCRV FAQ"},{"location":"crv-token/faq/#what-is-the-purpose-and-utility-of-crv","title":"What is the purpose and utility of CRV?","text":"<p>The main purposes of the Curve DAO token are to incentivize liquidity providers on the Curve Finance platform as well as getting as many users involved as possible in the governance of the protocol.</p> <p>It also has time-weighted voting for governance and accrues a portion of the Curve Finance fees generated when locked as veCRV.</p>"},{"location":"crv-token/faq/#how-to-get-crv","title":"How to get CRV?","text":"<p>CRV can be acquired in two ways:</p> <ul> <li>Bought off the market from an exchange</li> <li>As a reward for being a Liquidity provider in CRV with pools or lending markets that have CRV rewards. This ensures the protocol continues offering low fees and extremely low slippage.</li> </ul>"},{"location":"crv-token/faq/#where-can-i-find-the-release-schedule","title":"Where can I find the release schedule?","text":"<p>You can find the release schedule for the next six years at this address on the main UI: https://dao.curve.fi/inflation\u200b.</p> <p>There is also detailed documentation in the Supply &amp; Distribution about the CRV emissions for the next 10 years, and the supply calculator can be used to see the emissions for any year.</p>"},{"location":"crv-token/faq/#what-is-the-current-circulating-supply","title":"What is the current circulating supply?","text":"<p>There are three ways to check the circulating supply:</p> <ul> <li> <p>On the main UI here: https://dao.curve.fi/inflation.</p> </li> <li> <p>In the supply calculator in these resources by looking at the statistics for today.</p> </li> <li> <p>The on-chain contract (<code>0x14139EB676342b6bC8E41E0d419969f23A49881e</code>) which shows the circulating supply, net of locked or otherwise vested tokens.</p> </li> </ul>"},{"location":"crv-token/faq/#when-was-crv-launched","title":"When was CRV launched?","text":"<p>CRV was officially launched on the 13<sup>th</sup> of August 2020.</p>"},{"location":"crv-token/faq/#what-is-crv-vote-locking","title":"What is CRV vote-locking?","text":"<p>\"Vote-locking\" refers to the process of locking CRV for a specified period to receive veCRV. The longer they lock for, the more veCRV they receive. Vote locking allows you to vote in governance, boost your CRV rewards and receive trading fees.  Vote-locking boost is when users with veCRV (vote-locked CRV) receive boosted rewards when they provide liquidity to a pool/lending market.</p> <p>veCRV is not transferable</p> <p>When you lock your CRV tokens for voting, you will receive veCRV based on the lock duration. The veCRV tokens are non-transferable. Once the lock period has ended, users can reclaim their CRV tokens.</p>"},{"location":"crv-token/faq/#what-is-the-vote-locking-boost","title":"What is the vote locking boost?","text":"<p>When vote locking CRV, you will also earn a boost on your provided liquidity of up to 2.5x. The goal is to incentivize users to participate in governance by rewarding them with a bigger share of the daily CRV inflation.  See more here</p>"},{"location":"crv-token/faq/#when-did-the-boost-start","title":"When did the boost start?","text":"<p>The boost was first applied on the 26<sup>th</sup> of August 2020 around 11pm UTC.</p>"},{"location":"crv-token/faq/#what-are-vecrv","title":"What are veCRV?","text":"<p>veCRV stands for voting escrow CRV. They are your CRV locked for voting. The longer you lock your CRV for, the more voting power you have (and the bigger boost you can reach). You can vote lock 1,000 CRV for a year to have a 250 veCRV weight. Each CRV locked for four years is equal to 1 veCRV.</p> <p>The number of veCRV you will receive depends on how long you lock your CRV for. The minimum locking time is one week and the maximum locking time is four years.</p> <p>Your veCRV weight gradually decreases as your escrowed tokens approach their lock expiry. A graph illustrating the decrease can be found at this address: https://dao.curve.fi/locker\u200b</p>"},{"location":"crv-token/faq/#how-is-your-boost-calculated","title":"How is your boost calculated?","text":"<p>To reach your maximum boost of 2.5x, there are several parameters to take into consideration.  You can see the formula for boosting here</p> <p>You can find the current DAO voting power at this address: https://dao.curve.fi/locker\u200b</p> <p>You can also find a calculator at this address: https://dao.curve.fi/minter/calc\u200b</p>"},{"location":"crv-token/faq/#what-if-i-provide-liquidity-in-multiple-pools","title":"What if I provide liquidity in multiple pools?","text":"<p>Your voting power applies to all gauges but may produce different boosts based on how much liquidity you are providing and how much total liquidity the pool has.</p>"},{"location":"crv-token/faq/#what-happens-if-more-people-vote-lock","title":"What happens if more people vote lock?","text":"<p>If other liquidity providers vote lock more CRV, your boost will stay what it was when you applied it. If you abuse this, another user can kick and force a boost update to take you down to your real boost.</p>"},{"location":"crv-token/faq/#how-often-does-my-boost-records-voting-power-changes","title":"How often does my boost records voting power changes?","text":"<p>Your voting weight decreases over time but your boost will take notice of your decreasing voting power at certain checkpoints like withdrawing, depositing into a gauge or minting CRV.</p> <p>For example if you start at 1000 veCRV and your voting power decreases to 800 veCRV, your boost will still use your original voting power of 1000 veCRV until a user checkpoint.</p>"},{"location":"crv-token/faq/#how-can-i-apply-my-boost","title":"How can I apply my boost?","text":"<p>After creating or adding to your lock, you need to click the apply boost button to update your boost on each of the gauge you're providing liquidity in. Your boost can also be updated by depositing or withdrawing from a gauge.</p> <p>Click below for a guide on how locking and boosting your CRV rewards</p> <p>Boosting your CRV Rewards</p>"},{"location":"crv-token/faq/#how-to-know-my-boost-is-active","title":"How to know my boost is active?","text":"<p>If your boost is showing then it is active.</p> <p>If you have locked but your boost isn't showing then you need to apply it.</p>"},{"location":"crv-token/faq/#how-does-the-yearly-emissions-reduction-work","title":"How does the yearly emissions reduction work?","text":"<p>The emissions reduction can be triggered by anyone after the time period (exactly 365 days) has elapsed since the last emissions reduction.  This is done by calling the <code>update_mining_parameters</code> function on the <code>CRV</code> contract at the address <code>0xD533a949740bb3306d119CC777fa900bA034cd52</code>.</p> <p>When this is called a new epoch is started, triggering another 365 days.  If no one calls this function then CRV continues to be emitted at the current rate, and no new epoch is triggered.  If for example this was triggered 1 day late it would affect two important functions:</p> <ul> <li>The CRV supply will be higher than the theoretical maximum of 3,030,303,031.8 CRV</li> <li>The next emissions reduction will be delayed by 1 as the 365 day countdown begins 1 day late.</li> </ul> <p>This also means however, that each time a leap year happens the date at which someone can reduce the emissions will be brought forward one day of the year.</p>"},{"location":"crv-token/faq/#how-is-crv-minted","title":"How is CRV minted?","text":"<p>CRV can be minted by users who stake in gauges after they are allocated some to mint.  When this happens CRV tokens are minted into existence, added to the total supply and transferred to the user.</p> <p>If users choose to not mint until a later date, this can create a discrepancy between the theoretical supply of tokens and the real supply of tokens shown on block explorers.</p>"},{"location":"crv-token/overview/","title":"Overview & Tokenomics","text":"CRV Overview <p>The CRV token is the token for Curve DAO which governs the whole Curve Finance ecosystem.  CRV was launched on August 13, 2020.</p>"},{"location":"crv-token/overview/#supply","title":"Supply","text":"<p>The total supply of 3.03 billion is distributed as such:</p> <ul> <li>62% to community liquidity providers</li> <li>30% to shareholders (team and investors) with 2-4 years vesting</li> <li>5% to the community reserve</li> <li>3% to employees with 2 years vesting</li> </ul> <p></p> <p>The initial supply of around 1.3b (~43%) was distributed as such:</p> <ul> <li>5% to pre-CRV liquidity providers with 1 year vesting</li> <li>30% to shareholders (team and investors) with 2-4 years vesting</li> <li>3% to employees with 2 years vesting</li> <li>5% to the community reserve</li> </ul> <p>The circulating supply was 0 at launch and the initial release rate was around 2m CRV per day.</p> <p>CRV inflation (community emissions for providing liquidity) started at 274 million tokens a year in 2020, and each year it decreases by roughly 16%.</p> <p>See the Supply &amp; Distribution page for more detailed information.</p>"},{"location":"crv-token/overview/#utility","title":"Utility","text":"<p>There are 4 main use-cases for CRV, most require locked CRV (veCRV):</p> <ol> <li>Incentivizing liquidity providers to provide liquidity to pools and lending markets through CRV rewards.  This is how CRV tokens are distributed to the community.</li> <li>Allowing liquidity providers to boost their CRV rewards up to 2.5x by holding veCRV.</li> <li>Allowing users to participate and vote in governance proposals including directing CRV emissions (gauge weight votes) through holding veCRV.</li> <li>Collecting a portion of the fees from swaps and loans that occur on Curve through holding veCRV.</li> </ol> <p>Info</p> <p>veCRV stands for vote-escrowed CRV, representing CRV tokens locked for voting in the Curve DAO.  Locked CRV, Vote-locked CRV and vote-escrowed CRV all mean veCRV, these terms are used interchangeably throughout the ecosystem.</p> <p>For information about how to lock see the locking guide, or for more information about veCRV, see the veCRV page.</p>"},{"location":"crv-token/overview/#the-crv-matrix","title":"The CRV Matrix","text":"<p>The table below can help you understand the value of CRV and veCRV in different situations</p> Liquidity in Pool &amp; no veCRV Liquidity in Pool &amp; veCRV Liquidity in Pool &amp; Staked in Gauge &amp; no veCRV Liquidity in Pool &amp; Staked in Gauge &amp; veCRV No Liquidity &amp; no veCRV No Liquidity &amp; veCRV Earns lending &amp; trading fees  Yes  Yes  Yes  Yes  No  No Earns CRV Emissions  No  No  Yes  Yes  No  No Earns boosted CRV Emissions  No  No  No  Yes  No  No Can vote on DAO Proposals  No  Yes  No  Yes  No  Yes Can vote on Gauge Weight  No  Yes  No  Yes  No  Yes Earns Admin Fees  No  Yes  No  Yes  No  Yes"},{"location":"crv-token/supply-distribution/","title":"Supply & Distribution","text":"CRV Supply and Distribution <p>There is a fixed total supply of 3,030,303,031 CRV.  No CRV tokens can ever be minted after that.  The total supply of CRV tokens allocated to different groups is shown below in the \"CRV Total Allocation\" chart.  Not all CRV are currently minted or circulating.  CRV tokens are slowly minted to the community each week and will continue to be released for over 200 years.  The amount of tokens minted each week is defined in the community emissions section.  </p> <p>Have a look over this page to learn about how CRV has been allocated and how much is distributed each week.  The Supply Calculator is a great tool see the CRV supply and statistics on any date.</p>"},{"location":"crv-token/supply-distribution/#total-supply-allocation","title":"Total Supply Allocation","text":"<p>The below chart shows the total allocation of CRV to different groups within the Curve ecosystem.</p> <p></p> Group Allocated CRV Percentage Community (emissions) 1,727,272,729 57% Early Users (pre-CRV liquidity providers) 151,515,152 5% Core Team 800,961,153 26.43% Investors 108,129,756 3.57% Employees 90,909,091 3% Community Reserve 151,515,152 5% Total 3,030,303,031 100% <p>The above allocation shows that the community will own 67% of all CRV when the total supply is distributed, but note that CRV tokens will continue to be distributed until 2376, but meaningful distributions will stop in around 50 years, see notable emissions years for how the yearly distribution will change over time.</p>"},{"location":"crv-token/supply-distribution/#token-launch","title":"Token Launch","text":"<p>CRV officially launched on the 13<sup>th</sup> of August 2020.  At the time of launch there were no unlocked tokens.  All tokens in the launch were linearly vested for 1-4 years (gradually unlocking over a period of 1-4 years).  The initial supply is quoted as 1,303,030,303 because these tokens were pre-mined and sent into the vesting contracts, which gradually unlocked them.  Below shows the allocation to different groups of the initial distribution.</p> <p></p> Group Allocated CRV Vesting Years Transactions Early Users (pre-CRV liquidity providers) 151,515,152 1<sup>1</sup> 1 Core Team 800,961,153 4 1 Investors 108,129,756 2  1 ,  2 ,  3  Employees 90,909,091 2  1 ,  2  Community Reserve 151,515,152 N/A<sup>2</sup> 1 Total 1,303,030,303 1 <p>The circulating supply was 0 at launch. Each day of the first year approx. 750k tokens were emitted to the community for providing liquidity and 1.65million tokens were vested (unlocked).  Use the supply calculator below to see how quickly tokens became liquid and circulating.</p> <p>Tip</p> <p>6 year CRV release schedule is available here: https://dao.curve.fi/releaseschedule, or the full release schedule is available as a google spreadsheet here.</p>"},{"location":"crv-token/supply-distribution/#community-emissions-crv-inflation","title":"Community Emissions (CRV Inflation)","text":"<p>Community emissions (regularly called CRV Inflation) are minted and allocated to gauges based on the weekly weight gauge vote.  Gauges have a very flexible design and can direct emissions to liquidity pools and suppliers of a lending market, or even to funding for the Vyper programming language.</p> <p>Community emissions reduce each year.  They are modelled off the Bitcoin Halving which halves the allocation every 4 years, in Curve however, we reduce rewards by \\(2^{\\frac{1}{4}}\\) every 365 days instead.  This works out to be approx. 16% each year and 50% every 4 years.  Community emissions were initially set at 274,815,283 CRV for the first year.  This means the formula for how much CRV is emitted to the community in any year is:</p> \\[\\text{Yearly Community Emissions} = \\frac{274,815,283}{2^{\\text{year}/4}}\\] <p>Where <code>year</code> is the number of years after 13<sup>th</sup> August 2020, e.g., year 1 emissions are for the period 13<sup>th</sup> August 2021 until 13<sup>th</sup> August 2022.  The emissions for year 10 are for the period of 11<sup>th</sup> August 2030 - 11<sup>th</sup> August 2031 (2 leap years with 366 days, yet Curve assumes all years have 365 days), this would come to 48,580,938 CRV emitted for that year.</p> <p>In the smart contracts the yearly community emissions is not defined, it's actually defined as a rate of CRV emitted per second, we can convert between the yearly and per second value using the following formula:</p> \\[\\text{Emission Rate} = \\frac{\\text{Yearly Community Emissions}}{365 \\times 84600}\\] <p>We divide by \\(365 \\times 84600\\) because there is 365 days in a year and 86400 seconds in a day.</p> <p>The emission rate has 18 decimal places, this means that emissions continue for 245 years.  The emission rate will be 0.000000000000000001 CRV/sec in year 2265.  Emissions are hardcoded and cannot change.  See the notable emission years below, or have a play with the supply calculator to see how much CRV will be distributed and to who in different years.</p> <p>See this section of the FAQ for how the yearly reduction works.  See this section for how CRV is minted and added to the supply.</p>"},{"location":"crv-token/supply-distribution/#crv-emissions-for-the-next-10-years","title":"CRV Emissions for the next 10 years","text":"<p>See below for a chart of how the CRV will be distributed each year for the next 10 years.  This year (2024), is the last year of the Core Team's CRV allocation vesting.  After August 12<sup>th</sup>, 2024 all CRV added to the circulating supply will be distributed to the community through gauges, and CRV inflation will fall dramatically from 20.37% to 6.34% for the year.</p> <p>Note: dashed lines are percentage values and relate to the percentage axis, other lines relate to the CRV amount axis, click on datasets to turn them on/off.</p>"},{"location":"crv-token/supply-distribution/#notable-emission-years","title":"Notable Emission Years","text":"<p>As CRV will continue to be distributed for 245 years, interesting years of CRV distribution are noted below.  See the google spreadsheet here for data for all years.</p> Year Date Start Date Finish CRV Emissions Note 5 2025-08-12 2026-08-12 115,545,593 Last year emissions &gt; 100M 19 2039-08-09 2040-08-08 10,212,884 Last year emissions &gt; 10M 32 2052-08-05 2053-08-05 1,073,497 Last year emissions &gt; 1M 45 2065-08-02 2066-08-02 112,837 Last year emissions &gt; 100k 58 2078-07-30 2079-07-30 11,860 Last year emissions &gt; 10k 72 2092-07-26 2093-07-26 1,048 Last year emissions &gt; 1k 85 2105-07-24 2106-07-24 110.1 Last year emissions &gt; 100 98 2118-07-21 2119-07-21 11.58 Last year emissions &gt; 10 112 2132-07-17 2133-07-17 1.023 Last year emissions &gt; 1 245 2264-06-15 2265-06-15 0.000000000031536000 Last year of emissions"},{"location":"crv-token/supply-distribution/#supply-calculator","title":"Supply Calculator","text":"<p>Accuracy Disclaimer: This calculator is theoretical based on vesting schedules and smart contract formulae. It does not pull data from the Ethereum blockchain.  It may show slightly different values because users can wait any period of time before minting CRV from liquidity emissions, or unlocking claimable tokens from vesting contracts.  It is also assumed that community reserve tokens are vested for a 1 year period.  This is not completely true as they are vested for at least 1 year once allocated to a cause by the DAO.</p> Choose a date: Launch Day Today Next Reduction 20 Years Total CRV Circulating Daily CRV Added to Circulating <p>Definition of terms in the calculator:</p> <ul> <li><code>Vesting/Vested</code> - Vesting tokens are locked for a time period.  Vested tokens are unlocked as the vesting time period elapsed.</li> <li><code>Emissions/Emitted</code> - Emissions are CRV Inflation from newly minted CRV increasing the supply.  Emitted are the CRV which were added to the supply.</li> <li><code>Max CRV Supply</code> - Unchanging value, the max CRV that can exist.</li> <li><code>Total CRV Circulating</code> - The total supply of CRV unlocked from vesting and released from community emissions.  Including rewards that can currently be claimed/minted by users.</li> <li><code>Total CRV Supply</code> - The amount of minted CRV which currently exists, including pre-mined CRV locked in vesting contracts.</li> <li><code>Remaining CRV Emissions</code> - Remaining amount of CRV to be emitted to the community.</li> <li><code>Remaining CRV Vesting</code> - Remaining CRV to be unlocked from vesting contracts.</li> <li><code>Percentage of CRV Circulating</code> - Measure of the max CRV supply compared to the current circulating supply.  <code>Total CRV Circulating</code> divided by <code>Max CRV Supply</code>.</li> <li><code>CRV Inflation Rate</code> - Measure of the yearly CRV emitted &amp; vested compared to the current circulating supply.  <code>Yearly CRV Emitted &amp; Vested</code> divided by <code>Total CRV Circulating</code>.</li> </ul> <ol> <li> <p>This was vested through the public vesting contract\u00a0\u21a9</p> </li> <li> <p>These tokens had no vesting themselves, but the contract they are allocated to creates other vesting contracts. When tokens are allocated from this pool they create a child vesting contract with a minimum 1 year vesting period.\u00a0\u21a9</p> </li> </ol>"},{"location":"crvusd/faq/","title":"crvUSD FAQ","text":"Curve Stablecoin: FAQ"},{"location":"crvusd/faq/#general","title":"General","text":""},{"location":"crvusd/faq/#what-is-crvusd-and-how-does-it-work","title":"What is crvUSD and how does it work?","text":"<p>crvUSD refers to a dollar-pegged stablecoin, which may be minted by a decentralized protocol developed by Curve Finance. Users can mint crvUSD by posting collateral and opening a loan within this protocol.</p>"},{"location":"crvusd/faq/#how-does-the-crvusd-liquidation-process-differ-from-other-debt-based-stablecoins","title":"How does the crvUSD liquidation process differ from other debt-based stablecoins?","text":"<p>crvUSD uses an innovative mechanism to reduce the risk of liquidations. Instead of instantly triggering a liquidation at a specific price, a user\u2019s collateral is converted into stablecoins across a smooth range of prices.</p> <p>Simulations suggest most price drops would result in the loss of just a few percentage points worth of collateral value, instead of the instant and total loss implemented by the liquidation process common to most debt-based stablecoins.</p>"},{"location":"crvusd/faq/#how-is-crvusd-pegged-to-a-price-of-1","title":"How is crvUSD pegged to a price of $1?","text":"<p>The crvUSD peg is broadly protected by the fact that the protocol is always overcollateralized.  The protocol employs a number of stabilization mechanisms to fine-tune this peg. One mechanism is to automatically adjust borrow rates based on supply and demand.  The protocol also relies on Peg Keepers (see below section), which are authorized to burn or mint crvUSD based on market conditions. </p>"},{"location":"crvusd/faq/#can-other-types-of-collateral-be-proposed-for-crvusd-how-does-that-process-work","title":"Can other types of collateral be proposed for crvUSD? How does that process work?","text":"<p>Yes, other collateral markets can be proposed for crvUSD through governance. Contact the community support channels for additional information on the current process to propose new collateral types.  Each approved collateral has its own crvUSD market.</p>"},{"location":"crvusd/faq/#what-is-a-loan-discount-and-what-impact-does-it-have","title":"What is a 'loan discount' and what impact does it have?","text":"<p>A 'loan discount' is a percentage applied to reduce the value of collateral for determining the maximum borrowable amount. A higher loan discount results in a lower borrowing limit, acting as a safety margin for lenders against collateral value declines. </p> <p>The maximum amount that can be borrowed is also influenced by other factors, such as market conditions and asset volatility. For more details on these factors and their impact on borrowing, see the technical documentation at https://docs.curve.fi/crvUSD/amm/.</p>"},{"location":"crvusd/faq/#liquidation-process","title":"Liquidation Process","text":""},{"location":"crvusd/faq/#what-is-my-liquidation-price","title":"What is my liquidation price?","text":"<p>At the start of the crvUSD loan process, collateral is deposited and equally distributed over a range of prices, not just a single liquidation price. Should the price fall within this range, the collateral begins its conversion into crvUSD. This process aids in maintaining the loan's health and, under most conditions, wards off liquidation. As a result, there isn't one specific liquidation price.</p>"},{"location":"crvusd/faq/#when-depositing-collateral-how-do-i-adjust-and-select-my-collateral-deposit-price-range","title":"When depositing collateral, how do I adjust and select my collateral deposit price range?","text":"<p>The price range can be optionally adjusted and customized during the initial loan creation process. In the UI, the \u201cadvanced mode\u201d toggle provides further insights into this range. It also presents an \u201cAdjust\u201d button, enabling users to fine-tune their preferred price range.</p>"},{"location":"crvusd/faq/#what-happens-when-the-collateral-price-drops-into-my-selected-range-soft-liquidation","title":"What happens when the collateral price drops into my selected range? (soft-liquidation)","text":"<p>Each crvUSD market is linked to an Automated Market Maker (AMM). If the collateral price falls into the selected range, this collateral becomes tradable in the AMM. At this juncture, traders have the opportunity to acquire the collateral, substituting it with crvUSD. Consequently, the loan becomes collateralized by stablecoins, known for their more reliable value retention, contributing to the sustained health of the loan.</p>"},{"location":"crvusd/faq/#what-happens-if-the-collateral-price-recovers-de-liquidation","title":"What happens if the collateral price recovers? (de-liquidation)","text":"<p>As the collateral price increases, the aforementioned process reverses. The position undergoes trading through the AMM, transitioning from crvUSD back to the original form of collateral. Owing to AMM trading fees, it's typical for a slight percentage of the original collateral value to be diminished once the collateral price surpasses the upper limit of the predetermined liquidation range.</p>"},{"location":"crvusd/faq/#under-what-circumstances-can-i-be-liquidated-hard-liquidation","title":"Under what circumstances can I be liquidated? (hard-liquidation)","text":"<p>Should a loan's health drop below 0%, it becomes eligible for liquidation. In this scenario, the collateral is sold off, and the position closes. Although the crvUSD collateral conversion mechanism within the AMM is designed to protect against liquidations, it might not keep up with severe price fluctuations. It is advisable for borrowers to maintain their loan health, especially when prices fall within the selected liquidation range.</p>"},{"location":"crvusd/faq/#how-do-i-maintain-my-loan-health-if-collateral-price-drops-into-my-range","title":"How do I maintain my loan health if collateral price drops into my range?","text":"<p>When the collateral price falls into the liquidation range, adding new collateral to protect loan health is not permitted. Within this liquidation range, loan health can only be improved by repaying crvUSD. Even minimal crvUSD repayments can be effective in preventing liquidation while the collateral price resides within this range.</p>"},{"location":"crvusd/faq/#what-happens-to-the-collateral-in-the-event-of-hard-liquidation","title":"What happens to the collateral in the event of hard liquidation?","text":"<p>In the event of a hard liquidation, all available collateral is sold off by the AMM system, the debt is covered, and the loan is closed.</p>"},{"location":"crvusd/faq/#what-is-a-liquidation-discount-and-how-is-the-liquidation-discount-calculated-during-a-liquidation","title":"What is a \u2018liquidation discount\u2019 and how is the 'liquidation discount' calculated during a liquidation?","text":"<p>The 'liquidation discount' is calculated based on the collateral's market value and is designed to incentivize liquidators to participate in the liquidation process. This factor is used to effectively discount the collateral valuation when calculating the health for liquidation purposes.</p> <p>In other protocols, this may be referred to as a \u201cliquidation threshold\u201d and is often hard-coded instead of calculated dynamically.</p>"},{"location":"crvusd/faq/#peg-keepers","title":"Peg Keepers","text":""},{"location":"crvusd/faq/#what-are-peg-keepers","title":"What are Peg Keepers?","text":"<p>The Peg Keepers are contracts uniquely enabled to mint and absorb debt in crvUSD for the purposes of trading near the peg.</p>"},{"location":"crvusd/faq/#under-what-circumstances-can-the-peg-keepers-mint-or-burn-crvusd","title":"Under what circumstances can the Peg Keepers mint or burn crvUSD?","text":"<p>Each Peg Keeper targets a specific Peg Keeper pool. A Peg Keeper pool is a Curve v1 pool allowing trading between crvUSD and a blue chip stablecoin. The Peg Keepers are responsible for trying to balance these pools by trading at a profit. The Peg Keepers can only mint crvUSD to trade into their associated pools when its pool balance of crvUSD is too low, or it can repurchase and burn the crvUSD if its pool balance is too high.</p>"},{"location":"crvusd/faq/#what-is-the-relationship-between-a-peg-keepers-debt-and-the-total-debt-in-crvusd","title":"What is the relationship between a Peg Keeper's debt and the total debt in crvUSD?","text":"<p>A Peg Keeper's debt is the amount of crvUSD it has deposited into a specific pool. Total debt in crvUSD includes all outstanding crvUSD that has been borrowed across the system.</p>"},{"location":"crvusd/faq/#what-does-it-mean-if-the-peg-keepers-debt-is-zero","title":"What does it mean if the Peg Keeper's debt is zero?","text":"<p>If a Peg Keeper's debt is zero, it means that the Peg Keeper has no outstanding debt in the crvUSD system.</p>"},{"location":"crvusd/faq/#how-does-peg-keeper-trade-and-distribute-profits","title":"How does Peg Keeper trade and distribute profits?","text":"<p>Every Peg Keeper has a public <code>update</code> function. If the Peg Keeper has accumulated profits, then a portion of these profits are distributed at the behest of the user who calls the <code>update</code> function, in order to incentivize distributed trading in the pools. </p> <p>Calling <code>update()</code> via Etherscan</p> <p>To access this information on Etherscan, one can visit the <code>LLAMMA details</code> on the crvUSD UI within any market. By clicking the \u201cMonetary Policy\u201d, users are directed to the contract on Etherscan. There, under the <code>Contract</code> tab, they should select the <code>Read Contract</code> tab. Function 6 (<code>peg_keepers</code>) requires the index value of the market of interest, ranging from 0 to n-1, where n represents the number of crvUSD markets. After entering this index and navigating to the returned address, users need to navigate to <code>Contract</code> and <code>Read Contract</code> again. This time, they access function 6 (<code>estimate_caller_profit</code>) to estimate the caller profit. After evaluating if the execution of the following function makes sense, the <code>Write Contract</code> tab must be selected, a wallet connected, and function 1 (<code>update</code>) called.</p>"},{"location":"crvusd/faq/#borrow-rate","title":"Borrow Rate","text":""},{"location":"crvusd/faq/#what-is-the-borrow-rate","title":"What is the Borrow Rate?","text":"<p>The Borrow Rate is the variable interest rate charged on active loans within each collateral market.</p>"},{"location":"crvusd/faq/#how-is-the-crvusd-borrow-rate-calculated","title":"How is the crvUSD Borrow Rate calculated?","text":"<p>The Borrow Rate for each crvUSD collateral market is calculated based on a series of parameters, including the Peg Keeper's debt, the total debt, and the market demand for borrowing.</p>"},{"location":"crvusd/faq/#safety-and-risks","title":"Safety and Risks","text":""},{"location":"crvusd/faq/#what-are-the-risks-of-using-crvusd","title":"What are the risks of using crvUSD","text":"<p>As with all cryptocurrencies, crvUSD carries several risks, including depeg risks and risk of user collateral liquidation. Make sure to read the disclaimer and exercise caution when interacting with smart contracts.</p>"},{"location":"crvusd/faq/#how-can-i-best-manage-my-risks-when-providing-liquidity-or-borrowing-in-crvusd","title":"How can I best manage my risks when providing liquidity or borrowing in crvUSD?","text":"<p>Best risk management practices include maintaining a safe collateralization ratio, understanding the potential for liquidation, and keeping an eye on market conditions.</p>"},{"location":"crvusd/faq/#has-crvusd-been-audited","title":"Has crvUSD been audited?","text":"<p>Yes, please see the audits here Curve Stablecoin Audits.</p>"},{"location":"crvusd/faq/#can-i-see-the-code","title":"Can I see the code?","text":"<p>The code is publicly available on the Curve Github.</p>"},{"location":"crvusd/liquidations/","title":"Liquidations","text":"Soft &amp; Hard Liquidations <p>Liquidations on Curve Lending and crvUSD work differently to other DeFi loans.  There are Soft-liquidations (including de-liquidations) and Hard-liquidations.  This page defines them and shows examples.</p>"},{"location":"crvusd/liquidations/#soft-liquidation","title":"Soft-Liquidation","text":"<p>When the position enters Soft-liquidation it's a warning.  The system will try to protect user loans by converting the original collateral to the borrowed asset as prices decrease, and back to the original collateral as prices increase.</p> <p> </p> <p>Hard Liquidation does not happen at the bottom of the soft-liquidation range.</p> <p>Hard-liquidation can only occur when the health goes below 0.  If the health is negative anyone can pay off the debt and claim the collateral backing the loan, this should always be profitable, but in rare circumstances it may not be, if this happens it's called bad debt.</p> <p>In Soft-liquidation and de-liquidation, collateral will slowly be lost to fees from swapping back and forth as prices move higher and lower, this is how health deteriorates over time.  Health can deteriorate very quickly when volatility is high.  More information on health can be found here.</p> <p>The soft-liquidation applet also simulates how Collateral is converted through the soft-liquidation range.</p>"},{"location":"crvusd/liquidations/#hard-liquidation","title":"Hard-Liquidation","text":"<p>Soft-liquidation turns into Hard-liquidation when health is 0%.  In Hard-liquidation the borrower keeps their borrowed assets (normally crvUSD) but loses their collateral, the process is detailed here.</p> <p>Hard-liquidation does not trigger at the bottom of the Soft-liquidation range, it only relies on health.  A user can have all their collateral fully converted to their borrowed asset and be below the Soft-liquidation range if they manage their health carefully.</p> <p>Health can be increased in soft-liquidation by repaying some or all debt.</p>"},{"location":"crvusd/liquidations/#hard-liquidation-example","title":"Hard-Liquidation Example","text":"<p>Hard-liquidation can only occur when the health of a loan is 0% or below.  If the health is 0% or below anyone can pay off the debt and claim the collateral backing the loan, this should always be profitable, but in rare circumstances it may not be, if this happens it's called bad debt.</p> <p>The example below shows a loan in the CRV/crvUSD lending market which was hard-liquidated.  The chart is interactive, by hovering over prices, you can see how the health of the loan decreases over time.  See that hard-liquidation only relies on health.  The bottom of the soft-liquidation range is not where hard-liquidation happens.</p> Hard-liquidation - Borrowing crvUSD using CRV <p>It is always better to self-liquidate a loan before a loan is hard-liquidated.  This is because the health calculation values your collateral lower than its actual worth. In this example, the borrower would have gotten back 11,107 crvUSD more if they had self-liquidated their loan instead of letting it be hard-liquidated.</p>"},{"location":"crvusd/liquidations/#managing-health-self-liquidation-example","title":"Managing Health &amp; Self-Liquidation Example","text":"<p>The below example shows how to manage health and how self-liquidation works, this shows a loan in the WETH/crvUSD lending market.  When the user got into soft-liquidation they decided to repay around 10% of their debt, this increased their health from approx. 3% to 13%, but kept their soft-liquidation range the same.   They then stayed in soft-liquidation for a long time, so they self-liquidated.  If some debt is repaid while in soft-liquidation the range will stay the same but health will increase, if debt is repaid outside the soft-liquidation range, the range will move lower.</p> <p>Self-liquidating here was a good idea, this is because they already had 38,857 crvUSD as collateral (from swapped WETH in soft-liquidation), and their debt was 98,299 crvUSD, they only had to send 59,442 crvUSD and they received back their 24.3371 WETH.  If they chose to repay they would have had to repay all 98,299 crvUSD of debt, and received all collateral back (38,857 crvUSD and 24.3371 WETH) in return.</p> Self-liquidation - Borrowing crvUSD using WETH"},{"location":"crvusd/liquidations/#soft-liquidation-applet","title":"Soft-liquidation Applet","text":"<p>This applet simulates how collateral is converted through a soft-liquidation range.</p> Soft-liquidation Collateral Conversion Collateral Amount (ETH): Bottom of SL Range: Top of SL Range:"},{"location":"crvusd/loan-concepts/","title":"Loan Concepts In Depth","text":""},{"location":"crvusd/loan-concepts/#market-parameters","title":"Market Parameters","text":"<p>Each crvUSD market has the following parameters which affect all loans and change automatically due to market forces:</p> <ul> <li>Base Price: The base price is the upper price limit of band number 0.  Borrow rate increases the base price over time.</li> <li>Oracle Price: The oracle price is the current price of the collateral as determined by the oracle. The oracle price is used to calculate the collateral's value and the loan's health.</li> <li>Borrow Rate: The borrow rate is the annual interest rate charged on the loan. This rate is variable and can change based on market conditions. The borrow rate is expressed as a percentage. For example, a borrow rate of 7.62% means that the user will be charged 7.62% interest on the loan's outstanding debt.  See here for how it's calculated.</li> </ul> <p>Each market also has the following parameters which only change if the CurveDAO votes them to change:</p> <ul> <li>A: The amplification parameter A is used to calculate the density of liquidity and band width, as well as the maximum LTV of a market.</li> <li>Loan Discount: The loan discount defines how much the collateral is discounted when taking a loan, it is directly related to the maximum LTV of each crvUSD market.  See here for more information.</li> <li>Liquidation Discount: The liquidation discount is used to discount the collateral when calculating the health of the loan.  See the health section for more information.</li> <li>Sigma: Sigma changes how quickly rates increase and decrease when crvUSD depegs.  With a higher sigma interest rates will increase slower when crvUSD depegs.  See here for more information.</li> </ul>"},{"location":"crvusd/loan-concepts/#llamma-and-liquidations","title":"LLAMMA and Liquidations","text":"<p>LLAMMA (Lending-Liquidating AMM Algorithm) is a fully functional two-token AMM containing the collateral token and crvUSD, which is responsible for the liquidation mechanism. For more detailed documentation, please refer to the technical docs.</p> <p>When creating a new loan, the put-up collateral will be deposited into a specified number of bands across the AMM. Unlike regular liquidation, which has a single liquidation price, LLAMMA has multiple liquidation ranges (represented by the bands) and continuously liquidates the collateral if needed.   All bands have lower and upper price limits, each representing a \"small liquidation range.\" The user's total liquidation range is represented by the upper price of the highest band to the lower price of the lowest band.</p> <p>A loan only enters soft-liquidation mode once the price of the collateral asset is within a band. If the price is outside the bands, there is no need to partially liquidate and therefore not in soft-liquidation.</p> <p>The AMM works in a way that the collateral price within the AMM and the \"regular price\" are treated a bit differently. If the price falls into a band, prices are adjusted in a way that external arbitrageurs are incentivized to sell the collateral token and buy crvUSD in the band. So, if the price is within a band, the user's collateral will be sold for crvUSD, meaning the user's collateral is now a combination of both tokens. This happens for each individual band the user has liquidity deposited into.</p> <p>This liquidation process does not only happen when prices fall but also when they rise again. If the collateral in a band has been fully converted into crvUSD and the collateral price rises again, the earlier sold-off collateral will be bought up again.</p> <p>In short: External traders will soft-liquidate a users collateral when the collateral token's price is falling and de-liquidate it again when prices rise again.</p> <p>Losses in Soft-Liquidation</p> <p>Positions in soft-liquidation / de-liquidation are suffering losses due to the selling and buying of collateral. If the position is not in soft-liquidation, no losses occur. These losses decrease the health of the loan. Once a user's health is at 0%, the user's position may face a hard-liquidation, which closes the loan.</p>"},{"location":"crvusd/loan-concepts/#hard-liquidations","title":"Hard Liquidations","text":"<p>Hard liquidations occur when the health of a loan falls below 0%, allowing a liquidator to liquidate the loan. Anyone can act as a liquidator and liquidate eligible loans, but this is typically done by searchers.</p> <p>When a liquidator initiates the process, the following occurs within a single transaction, using a market with WETH collateral and crvUSD debt as an example:</p> <ol> <li>Any collateral which has been swapped to crvUSD in soft liquidation is transferred to Curve and removed from the user.</li> <li>The remaining crvUSD debt is repaid to Curve by the liquidator.</li> <li>The liquidator receives the remaining WETH collateral as a reward, which is normally more than the amount repaid.</li> </ol> <p>This process is illustrated in the image below:</p> <p> </p>"},{"location":"crvusd/loan-concepts/#bad-debt","title":"Bad Debt","text":"<p>Bad debt occurs when a loan is not profitable to liquidate.  This could happen for many reasons, including gas prices being higher than the profit from a liquidation, a sequencer being down on an L2, or simply no one searching for profitable liquidations in a new market.  It looks like the following:</p> <p> </p> <p>In this example no rational liquidator will begin the liquidation process because they will lose value by doing so.</p> <p>crvUSD is only minted on Ethereum and uses high-quality assets with strong liquidity to mitigate the risk of bad debt.  Due to these precautions, bad debt is not expected to occur within the crvUSD minting system. However, bad debt can and has occurred within specific Curve Lending markets, as they are permissionless and do not affect the integrity of the crvUSD stablecoin.</p>"},{"location":"crvusd/loan-concepts/#bands-n","title":"Bands (N)","text":"<p>When creating a loan, the added collateral is spread among the number of bands selected. Minimum amount is 4 bands, and the maximum amount is 50 bands.</p> <p>A band essentially is a price range, with an upper and lower price limit. If the price of the collateral is within the limits of a band, that particular band is likely to be liquidated.</p> <p>Note that band price ranges drift higher over time as base price increases by the borrow rate</p> <p> </p> <p>In the illustration above, there are multiple bands with different price ranges. The light grey areas represent the collateral token, which in this example is ETH. As depicted, the bands below the collateral token's price are entirely in ETH since there is no need for liquidation, given the higher price. The dark grey areas represent crvUSD. Because the price of ETH fell within the band on the far right, the deposited collateral (ETH) is converted into crvUSD. In this instance, the band consists of both ETH and crvUSD. If the price continues to decline, all collateral in the band will be fully converted into crvUSD, and the band to the left will undergo soft-liquidation.</p> <p>Remember: When prices rise again, the opposite is happening. The ETH which was converted into crvUSD earlier will be converted back into ETH again.</p> <p> </p> A band which has fully been soft-liquidated. All collateral was converted into crvUSD because the price of the collateral is below the liquidation range. <p> </p> A band which currently is in soft-liquidation. It contains both, the collateral token and crvUSD. <p> </p> A band which has not been liquidated yet (composition is 100% collateral token). The price of the collateral is above the liquidation range."},{"location":"crvusd/loan-concepts/#band-formulae","title":"Band Formulae:","text":"<p><code>A</code> controls the density of the liquidity.  This is directly related to the width of the bands.  Band width at any price can be estimated to be:</p> \\[\\text{bandwidth} \\approx \\frac{\\text{price}}{\\text{A}}\\] <p>To find the exact upper price limit and lower price limits of the bands the following formulae can be used:</p> \\[\\begin{aligned} \\text{upperLimit} &amp;= \\text{basePrice} * \\left( \\frac{A-1}{A} \\right)^{n} \\\\ \\text{lowerLimit} &amp;= \\text{basePrice} * \\left( \\frac{A-1}{A} \\right)^{n+1}\\end{aligned}\\] <p>Where:</p> <ul> <li>\\(\\text{basePrice}\\): The current base price of the desired market</li> <li>\\(A\\): The amplification factor of the desired market (default is 100)</li> <li>\\(n\\): The Band Number, e.g., \\(-\\)67.</li> </ul>"},{"location":"crvusd/loan-concepts/#band-calculator","title":"Band CalculatorInputs:","text":"<p>Use the calculator below to simulate how bands are shaped and how liquidity density changes with different parameters.  By definition the liquidity density will be 100% at band 1.  Liquidity density increases as band width decreases, because the same amount of collateral will be spread over a smaller price range.</p> A :  N :  Base Price ($):"},{"location":"crvusd/loan-concepts/#loan-health","title":"Loan Health","text":"<p>Based on a user's collateral and debt amount, the UI will display a health score and status. If the position is in soft-liquidation mode, an additional warning will be displayed. Once a loan reaches 0% health, the loan is eligible to be hard-liquidated. In a hard-liquidation, someone else can pay off a user's debt and, in exchange, receive their collateral. The loan will then be closed.</p> <p>The health of a loan decreases when the loan is in soft-liquidation mode. These losses do not only occur when prices go down but also when the collateral price rises again, resulting in the de-liquidation of the user's loan. This implies that the health of a loan can decrease even though the collateral value of the position increases. If a loan is not in soft-liquidation mode, then no losses occur.</p> <p>Losses are hard to quantify. There is no general rule on how big the losses are as they are dependent on various external factors such as how fast the collateral price falls or rises or how efficient the arbitrage is. But what can be said is that the losses heavily depend on the number of bands used; the more bands used, the fewer the losses.  Daily losses based on current data are shown here.</p> <p>The formula for health is below, this is visualized in the Health Calculator applet as well.</p> \\[\\begin{aligned} \\text{health} &amp;= \\frac{s \\times (1-\\text{liqDiscount}) + p}{\\text{debt}} - 1 \\\\  p &amp;= \\text{collateral} \\times \\text{priceAboveBands} \\end{aligned}\\] <p>Where:</p> <ul> <li>\\(\\text{collateralValue}\\) : the value of all collateral at the current LLAMMA prices</li> <li>\\(\\text{liqDiscount}\\) : the liquidation discount for the market (how much to discount the collateral value for safety during hard-liquidation).</li> <li>\\(\\text{debt}\\) : the debt of the user</li> <li>\\(s\\) : an estimation of how much crvUSD a user would have after converting all collateral through their bands in soft-liquidation.  This can be very roughly estimated as: \\(\\text{collateral} \\times \\left( \\frac{\\text{softLiqUpperLimit} - \\text{softLiqLowerLimit}}{2} \\right)\\)</li> <li>\\(p\\) : The value above the soft-liquidation bands.  Found by multiplying the amount of collateral by how far above soft-liquidation the current price is.  If user is in or below soft-liquidation, this value is 0.</li> <li>\\(\\text{collateral}\\) - The amount of collateral a user has, e.g., if a user has 5 wBTC, this value is 5.</li> <li>\\(\\text{priceAboveBands}\\) - The price difference between the oracle price and the top of the user's soft-liquidation range (upper limit of top band).  This value is 0 if user is in soft-liquidation.  See applet below for a visual representation.</li> <li>\\(\\text{collateralPrice}\\) - The price of a single unit of the collateral asset, e.g., if the collateral asset is wBTC, this value is the price of 1 wBTC.</li> </ul>"},{"location":"crvusd/loan-concepts/#health-calculator","title":"Health CalculatorInputs:","text":"<p>Use the applet below to simulate how health works, soft-liquidation losses are given as numbers in a comma separated list, the first number is the starting band onwards.  The light blue shaded areas in the bands represent the value without using the soft-liquidation discounts, while the dark blue areas are the values after discounting.</p> A: Starting Band: Oracle Price ($): Collateral Amount: Debt ($): Base Price ($): Finish Band: Liquidation Discount %: Soft Liquidation Losses (%): <p>Health (including value above bands):</p> <p>Health (not including value above bands):</p> <p> </p> <p> </p> <p>The Curve UI will either show health adding value above bands or without that value based on how close to liquidation a user is.  If the active band (Oracle price band) is 3 or less bands away from the user's soft liquidation bands, the UI will show the health not including value above bands.  Otherwise it will show the health including the value above bands.</p> <p>The health values on the Curve UI and within smart contracts will always be slightly less than the values here.  Health is calculated by estimating the amount of crvUSD/debt tokens the collateral will be swapped for in each band.  This takes into account how much liquidity is in each band, the more liquidity in a band the less slippage Curve estimates will occur.  This slippage estimation slightly reduces a user's health.</p>"},{"location":"crvusd/loan-concepts/#loan-discount","title":"Loan DiscountMaximum LTV Calculator","text":"<p>The <code>loan_discount</code> is used for finding the maximum LTV a user can have in a market.  At the time of writing in crvUSD markets this value is a constant 9%, in Curve Lending markets this value ranges from 7% for WETH to 33% for volatile assets like UwU.  Use the calculator below to see the maximum LTVs a user can have based on the <code>loan_discount</code>, and amplification factor <code>A</code> (with 4 bands, N=4).  The formula is:</p> \\[\\text{maxLTV} = \\left(\\frac{A - 1}{A}\\right)^2 \\times (1 - \\text{loan_discount})\\] Inputs: A: Loan Discount % : Result <p>Maximum LTV: </p>"},{"location":"crvusd/loan-concepts/#borrow-rate","title":"Borrow Rate","text":"<p>The general idea is that borrow rate increases when crvUSD goes down in value and decreases when crvUSD goes up in value.  Also, contracts called PegKeepers can also affect the interest rate and crvUSD peg by minting and selling crvUSD or buying and burning crvUSD.</p> <p>The formula for the borrow rate is as follows:</p> \\[\\begin{aligned}r &amp;= \\text{rate0} * e^{\\text{power}} \\\\ \\text{power} &amp;= \\frac{\\text{price}_\\text{peg} - {\\text{price}_\\text{crvUSD}}}{\\text{sigma}} - \\frac{\\text{DebtFraction}}{\\text{TargetFraction}} \\\\ \\text{DebtFraction} &amp;= \\frac{\\text{PegKeeperDebt}}{\\text{TotalDebt}}\\end{aligned}\\] <p>with:</p> <ul> <li>\\(r\\):  The interest rate.</li> <li>\\(\\text{rate0}\\):   The rate when PegKeepers have no debt and the price of crvUSD is exactly 1.00.</li> <li>\\(\\text{price}_\\text{peg}\\):    Desired crvUSD price: 1.00</li> <li>\\(\\text{price}_\\text{crvUSD}\\): Current crvUSD price.</li> <li>\\(\\text{sigma}\\): variable which can be configured by the DAO, lower value makes the interest rates increase and decrease faster as crvUSD loses and gains value respectively.</li> <li>\\(\\text{DebtFraction}\\):    Ratio of the PegKeeper's debt to the total outstanding debt.</li> <li>\\(\\text{TargetFraction}\\):  Target fraction.</li> <li>\\(\\text{PegKeeperDebt}\\):   The sum of debt of all PegKeepers.</li> <li>\\(\\text{TotalDebt}\\):   Total crvUSD debt across all markets.</li> </ul> <p>A tool to experiment with the interest rate model is available here.</p>"},{"location":"crvusd/loan-concepts/#pegkeeper","title":"PegKeeper","text":"<p>A PegKeeper is a contract that helps stabilize the crvUSD price. PegKeepers are deployed for special Curve pools, a list of which can be found here.</p> <p>PegKeepers take certain actions based on the price of crvUSD within the pools. All these actions are fully permissionless and callable by any user.</p> <p>When the price of crvUSD in a pool is above 1.00, they are allowed to take on debt by minting un-collateralized crvUSD and depositing it into specific Curve pools. This increases the balance of crvUSD in the pool, which consequently decreases its price.</p> <p>If a PegKeeper has taken on debt by depositing crvUSD into a pool, it is able to withdraw those deposited crvUSD from the pool again. This can be done when the price is below 1.00. By withdrawing crvUSD, its token balance will decrease and the price within the pool increases.</p> <p> More on PegKeepers here</p>"},{"location":"crvusd/loan-creation/","title":"Loan Creation & Management","text":""},{"location":"crvusd/loan-creation/#loan-creation","title":"Loan Creation","text":"<p>In standard mode, creating a loan with crvUSD involves specifying a certain amount of a collateral asset and determining the quantity of crvUSD to borrow. After the collateral amount is set, the interface displays the maximum amount of crvUSD that can be borrowed, along with the health and borrow rate of the loan.</p> <p> </p> <p>The user interface (UI) features a dropdown menu for viewing additional loan parameters, such as the current Oracle Price and Borrow Rate.</p> <p> </p>"},{"location":"crvusd/loan-creation/#loan-management","title":"Loan Management","text":"<p>Everything needed to manage a loan is available in this interface. The features include:</p> <p> </p> <p><code>Loan</code>  This tab provides options to <code>Borrow more</code> crvUSD, <code>Repay</code> debt, or <code>Self-liquidate</code> a loan</p> <p><code>Collateral</code> Options to <code>add</code> or <code>remove</code> collateral from a loan are available here.</p> <p><code>Deleverage</code>  This tab facilitates loan deleveraging. Find more details here.</p>"},{"location":"crvusd/loan-creation/#loan-details","title":"Loan Details","text":"<p>The <code>Your Loan Details</code> tab shows all the information about your personal loan:</p> <p> </p> <p>When a user creates a loan, their collateral is allocated across a number of bands (liquidation range). Should the asset price fall within this range, the loan will enter soft-liquidation mode. In this state, the user is not allowed to add additional collateral. The only recourse is to either repay with crvUSD or to self-liquidate the loan.</p> <p>When a position was or is in soft-liquidation mode, losses occur. The UI displays these losses in 3 ways:</p> <ul> <li><code>LOSS AMOUNT</code> is how much you've lost in soft-liquidation in collateral format, e.g. 0.001 ETH.</li> <li><code>% LOST</code> is percentage of deposited collateral you've lost in soft liquidation.</li> <li><code>COLLATERAL CURRENT BALANCE (EST.) / DEPOSITED</code> shows your current collateral minus any losses compared to the amount deposited.</li> </ul> <p>The <code>LLAMMA BALANCES</code> section shows the breakdown of your current loan collateral.  For example, in the above picture there is 0.01 ETH and 0 crvUSD.  If the user was in soft-liquidation some of the collateral would be swapped to crvUSD to protect from further price decreases, and this would reduce the current ETH balance and increase the crvUSD balance.</p> <p>Soft-Liquidation Mode</p> <p>During soft-liquidation, users are unable to add or withdraw collateral. They can choose to either partially or fully repay their crvUSD debt to improve their health or decide to self-liquidate their loan if their collateral composition contains sufficient crvUSD to cover the outstanding debt. If they opt for self-liquidation, the user's debt is fully repaid and the loan will be closed. Any residual amounts are then returned to the user.</p> <p>If their health declines to 0, they are hard-liquidated and lose their collateral but keep their debt.</p>"},{"location":"crvusd/loan-creation/#advanced-loan-creation-management","title":"Advanced Loan Creation &amp; Management","text":"<p>In the upper right-hand side of the screen, there is a toggle button for advanced mode.</p> <p> </p> <p>In advanced mode the UI shows more information about the Collateral Bands for your personal loan:</p> <p> </p> <p>Advanced mode also adds a tab with info about the LLAMMA Bands for all loans together:</p> <p> </p> <p>It also expands the loan creation interface by displaying the liquidation and band range, number of bands, borrow rate, and Loan to Value ratio (LTV). Additionally, users can manually select the number of bands for the loan by pressing the <code>adjust</code> button and using the slider to increase or decrease the number of bands.</p> <p> </p> <p>Tip</p> <p>A higher number of bands generally results in fewer losses when the loan is in soft-liquidation mode, see here. The maximum number of bands is 50, while the minimum is 4.</p>"},{"location":"crvusd/loan-creation/#leveraged-loans","title":"Leveraged Loans","text":"<p>The UI offers a leveraging feature for loans, accessible by navigating to the <code>Leverage</code> tab.</p> <p>More information on how to deleverage a loan here.</p> <p>Leverage</p> <p>Collateral can be leveraged up to 9x, depending on the number of bands chosen. If a user wants to use the maximum leverage (9x), they loan will have the minimum number of bands (4). Using the highest number of bands (50) only allows for a leverage of up to 3x. For the consequences of using different numbers of bands, see here.</p> <p>The process of leveraging effectively involves repeat trading of crvUSD for collateral and depositing it to maximize the collateral position. Essentially, all borrowed crvUSD is utilized to acquire more collateral.  </p> <p>Warning</p> <p>Caution is advised, as a dip in the collateral price would necessitate repaying the entire amount to reclaim the initial position.</p> <p> A good explainer how leveraging works</p> <p></p> <p>Toggling the advanced mode expands the display to show additional information about the loan, including the price impact, trade route and the actual leverage.</p> <p></p>"},{"location":"crvusd/loan-creation/#deleveraging-loans","title":"Deleveraging Loans","text":"<p>Deleveraging a loan \u2014 irrespective of it being leveraged  \u2014 is an option available through the UI. Users must navigate to the <code>Deleverage</code> tab and input the amount of collateral they intend to allocate for deleveraging. This particular collateral is then converted into crvUSD, which is used to facilitate debt repayment.</p> <p> </p> <p>Info</p> <p>When a user's loan is in soft-liquidation, deleveraging is only possible if the loan is fully repaid. Apart from that, the loan can typically be self-liquidated. If the position is not in soft-liquidation, the user can deliberately deleverage by any chosen amount.</p> <p>The UI will provide the user with their updated loan details, such as liquidation and band range, borrow rate, and health, as well as the LLAMMA changes of collateral and debt.</p> <p> </p>"},{"location":"crvusd/loan-strategies/","title":"Loan Strategies","text":"Loan Strategies &amp; Management <p>Before taking a crvUSD loan a user should consider two factors that will influence how they structure their loan:</p> <ul> <li>How much risk they would like to take?</li> <li>What management style will they employ?  Will they be actively managing their loan i.e., adding, removing collateral and repaying debt.  Or will they be passively taking a loan and leaving it in LLAMMA's hands?</li> </ul> <p>Risk and Management styles can be thought of as spectrums, and they can be visualized in the image below.</p> <p>  The above image shows 4 main quadrants:</p> <ul> <li>High risk and Passive: This is a dangerous strategy, users employing this strategy typically max borrow and make very little changes to the loan until they close or are hard-liquidated.  Some users are lucky and do well, but many are hard-liquidated.  Use at your own risk.</li> <li>High risk and Active: Users with these loans are borrowing close to the maximum allowed, and actively adding and removing collateral, and debt as required to keep a loan healthy.</li> <li>Careful and Passive: These loans are typically at low LTV ratios so their soft-liquidation ranges are far below the current price.  These loans generally don't need much management and users may only alter their loans after significant price changes.</li> <li>Careful and Active: Users borrow at low LTV ratios but actively manage the loans by adding and removing capital and debt as required to keep away from soft-liquidation.</li> </ul> <p>Example loans for each of the 4 quadrants are given in the loan example section here.  The section directly below shows soft-liquidation losses based on user data, so prospective users can estimate losses.</p> <p>Actively managing loans is gas intensive</p> <p>Actively managing loans is expensive when factoring in gas usage, loan size needs to be sufficient to offset this expense.  As a general rule allow \\(\\text{USD} \\approx \\text{gasPrice} \\times 4\\) to add collateral or repay debt, e.g. if gasPrice is 10 gWei allow $40 to add collateral or repay debt.</p>"},{"location":"crvusd/loan-strategies/#soft-liquidation-losses","title":"Soft Liquidation Losses","text":"<p>The data from all crvUSD loans so far has shown that for each band range a user can expect the following losses in the table below.  Loss amount doesn't seem to be affected by the collateral asset used (i.e., losses from wBTC seem to be the very similar as wstETH).  The band range was the biggest factor in how a user performed.  The histogram and table below show soft-liquidation losses are generally very low, but keep in mind that high volatility periods can cause double digit losses.  </p> <p>Note: you can show and hide any band ranges by clicking on them in the legend.</p>              Use percent of data for y axis                       Use days of data (time) for y axis          band range days of soft liq data min loss/day median loss/day mean loss/day std loss/day max loss/day 4-9 4601.17 0% 0.0927% 0.93% 2.18% 38.93% 10-19 2248.19 0% 0.0331% 0.62% 1.98% 43.06% 20-35 124.92 0% 0.0127% 0.20% 0.54% 6.41% 36-50 114.99 0% 0.0004% 0.11% 0.30% 3.98% <p>Using more bands (\\(\\uparrow\\)N) reduce your soft-liquidation loss per day but increase the time in soft-liquidation, while also reducing the total amount a user can borrow.  It is up to the user to choose a comfortable number of bands which allows them to borrow their required amount.</p> <p>The above results are from the notebook here</p>"},{"location":"crvusd/loan-strategies/#managing-loan-health","title":"Managing Loan Health","text":"<p>Loan health is a direct measure of the risk of a loan.  The lower the loan health, the riskier the loan.  To keep from being hard-liquidated, a loan must have a health above 0.  </p> <p>There are 2 factors which influence the health of a loan:</p> <ol> <li>LTV (Loan-To-Value ratio) - More collateral and less debt increases the health of the loan</li> <li>Increasing the <code>a</code> distance as shown on the figure here.  This can be done in 2 ways: reducing the number of bands, reducing the amount borrowed.</li> </ol> <p>There are 2 ways of increasing the health of a loan:</p> <ol> <li>Repaying debt</li> <li>Adding collateral</li> </ol> <p>However if a loan is in soft-liquidation collateral cannot be added, debt must be repaid to increase the health.</p>"},{"location":"crvusd/loan-strategies/#loan-examples","title":"Loan Examples","text":"<p>All the charts provided in this section are interactive. Click on different items in the legend to show/hide that plot.</p> <p>Here's a list of the plots that can be shown/hidden and their meaning:</p> <p>Value (Left Axis) plots: These plots only relate to the left axis, the percentage axis has no meaning for them.</p> <ul> <li><code>Oracle Price</code>: The oracle price for 1 unit of the chosen deposited collateral asset (e.g., 1 wBTC, 1 wstETH, etc)</li> <li><code>Soft-Liquidation Price Range</code>: This is the soft-liquidation price range of the user.  This can also be thought of as all the small band ranges together.  This drifts higher over time with the <code>Interest Rate</code>.</li> <li><code>CV in &lt;asset&gt;</code>: The collateral value in the deposited asset (e.g., wstETH, wBTC, etc).</li> <li><code>CV in crvUSD</code>: The value of the crvUSD held as collateral.  <code>&lt;asset&gt;</code> is swapped to crvUSD through the soft-liquidation process to protect from further declines in price.</li> <li><code>Total CV</code>: Total Collateral Value.  <code>CV in &lt;asset&gt;</code> plus <code>CV in crvUSD</code>.</li> <li><code>Debt Value</code>: The total amount of debt owed (this includes interest)</li> <li><code>AAVE/Spark Liq Price</code>: The price at which this loan would be liquidated in AAVE/Spark.  When the <code>Oracle Price</code> is lower than this price, the loan would be liquidated/not possible.</li> </ul> <p>Percentage (Right Axis) plots:  These plots only relate to the right axis, the value axis has no meaning for them</p> <ul> <li><code>LTV</code>: The loan to value ratio, this is the <code>Debt Value</code> divided by the <code>Total CV</code>.</li> <li><code>Health</code>: The health factor of the loan, a loan is Hard-liquidated when this gets to 0, see here for more info.</li> <li><code>% CV in &lt;asset&gt;</code>: The percentage of <code>Total CV</code> currently in the deposited collateral asset (e.g., wstETH, wBTC, etc).  This is <code>CV in &lt;asset&gt;</code> divided by <code>Total CV</code>.</li> <li><code>% CV in crvUSD</code>: The percentage of <code>Total CV</code> currently swapped to crvUSD.  This is <code>CV in crvUSD</code> divided by <code>Total CV</code>.</li> <li><code>% SL Collateral Loss</code>: The percentage of collateral lost to soft-liquidation.  See here for more information.</li> <li><code>% Interest Collateral Loss</code>: The collateral loss due to interest accruing on the debt.  This amount is included in the <code>Debt Value</code> plot.</li> <li><code>% Total Collateral Loss</code>: <code>% SL Collateral Loss</code> plus <code>% Interest Collateral Loss</code>.</li> <li><code>% Max Deposited Collateral</code>: This is the percentage of the current deposited collateral vs. the maximum that will get deposited over the life of the loan.  This is shown as a percentage so it can be represented along side other plots.  This is just to show the magnitude and timing of deposits/withdrawals, not exact amounts. An example would be if there were 20 wstETH deposited at the beginning, but the user deposits another 5 (total 25 wstETH) at another point without withdrawing any, this value will be start at \\(20/25=80\\%\\).</li> <li><code>Interest Rate</code>: The current borrow interest rate for the market.</li> </ul>"},{"location":"crvusd/loan-strategies/#careful-and-passive-loan-example","title":"Careful and Passive Loan Example","text":"<p>This user deposited 188 wBTC as collateral.  They borrowed 1.05 million crvUSD.  They were very careful and only borrowed with a 21% LTV.  They used N=10.</p> <p>As you can see from above the user remained passive as they were far from soft-liquidation at all times.  They only fee they incurred was from the borrow interest rate increasing their debt, but luckily wBTC price went up fast enough to offset that.  </p> <p>Throughout the approx. 100 day duration of the loan they increased their loan to 1.27 million crvUSD but their LTV actually went down as wBTC price went up ~30%.</p> <p>This is a good strategy for loans less than 10,000 crvUSD as gas costs for managing the loan are minimal.</p>"},{"location":"crvusd/loan-strategies/#careful-and-active-loan-example","title":"Careful and Active Loan Example","text":"<p>This loan was opened with N=50, 93 sfrxETH collateral, 105500 crvUSD debt.  This was a LTV of 67%.</p> <p>This user starts with 105k crvUSD debt, but slowly over time adds collateral and borrows more debt.  Ending with 219 sfrxETH collateral and 298k crvUSD debt.  They actively managed to stay out of soft-liquidation, and spend 0.56 ETH of fees on 32 transactions over this 2 month period.  The only fees they incurred were from borrowing interest and Ethereum transactions fees.</p> <p>This loan LTV is possible in other systems, but soft-liquidations aren't.  Soft-liquidations reassure the user that they are protected from sudden price drops.</p>"},{"location":"crvusd/loan-strategies/#high-risk-and-active-loan-example","title":"High Risk and Active Loan Example","text":"<p>This user opened their loan using N=4, deposited 20 wstETH, and borrowed 32600 crvUSD.  This equated to an 85% LTV.</p> <p>The user with the loan pictured above is tracked over a period of ~102 days, during which they actively managed their loan to maintain an LTV around 85%.  By taking a crvUSD loan, the user locked in 85% of the value of wstETH instantly while still benefiting from price increases on wstETH. This loan would not have been possible on other platforms due to the LTV of the wstETH collateral.</p> <p>The user fell into soft-liquidation around the 15-day mark and experienced health erosion, the user repaid 10% of their debt on the 18<sup>th</sup> day, restoring their health.  As the price of wstETH rose around the 70-day mark, the user decided to borrow more, changing their soft-liquidation range. They quickly repaid the newly added debt after falling into soft-liquidation in this higher range.  Around the 85<sup>th</sup> day, the user chose to add more collateral and increased their debt.</p> <p>Throughout this period, the user seemed comfortable in soft-liquidation, only losing ~22% of their collateral from soft-liquidation and borrowing interest. Their collateral was fully swapped to crvUSD multiple times, protecting them from further price declines.</p> <p>LLAMMA saved the user from hard-liquidation that would have occurred in any other system, which can be seen by making the <code>AAVE/Spark Liquidation Price</code> plot visible.  Even after reducing the LTV on the 18<sup>th</sup> day, the user would have been liquidated on other platforms by the two wicks below $1767 on the 25<sup>th</sup> and 55<sup>th</sup> days, preventing them from recouping value during the subsequent price appreciation.</p> <p>This loan shows that actively managing high risk loans can result in outcomes not possible in any other system.</p>"},{"location":"crvusd/loan-strategies/#high-risk-and-passive-loan-example-hard-liquidation","title":"High Risk and Passive Loan Example (Hard-liquidation)","text":"<p>This loan was opened with N=4, 5.95 wstETH collateral, 10500 crvUSD debt.  This was a LTV (Loan-To-Value) of 84%.</p> <p>The user almost max borrowed.  Putting their liquidation range very close to the current price.  They stayed above their soft-liquidation range for a long time before falling into soft liquidation on day 50.  They quickly fell through soft liquidation to the safety on the other side but lost 3.1% to soft liquidation fees.  </p> <p>At any time from day 50 to day 62 they could have repaid debt to increase their health.  As they were passive and did nothing soft-liquidation fees reduced their health to 0 when going back up through their soft-liquidation range.  This is an unfortunate situation where the increasing collateral price caused hard-liquidation.</p> <p>Use this strategy at your own risk</p> <p>Users in this quadrant are at the highest risk of hard-liquidation.  Using this strategy is not advised.</p>"},{"location":"crvusd/loan-strategies/#under-soft-liquidation-loan-example","title":"Under Soft-Liquidation Loan Example","text":"<p>This loan started with 57.07 wstETH collateral, with N=4 and 102k crvUSD debt.  They paid off small amounts of debt a few times throughout the loan and finished with 93.5k crvUSD debt and 53.44 wstETH collateral.</p> <p>This loan is a great example of the power of LLAMMA and soft-liquidations.  The user spent more than 50% of the loan time under the soft-liquidation range.  Yet the loss from soft-liquidation fees was only 6.37%.  While under the soft-liquidation range the user was shielded from any further losses in the wstETH price as all their collateral was converted to crvUSD.  Yet when the price rose the user benefited from price increases as their collateral was swapped back to wstETH.</p> <p>The AAVE/Spark Liq price plot for this loan shows that this loan would not be possible in competitor systems except from the 91<sup>st</sup> day when debt was lower and wstETH price rose.</p>"},{"location":"crvusd/loan-strategies/#strategies","title":"Strategies","text":""},{"location":"crvusd/loan-strategies/#borrowing-to-lending-rate-arbitrage","title":"Borrowing to Lending Rate Arbitrage","text":"<p>As crvUSD is minted with high quality collateral in crvUSD markets, a user can usually make profit by minting crvUSD and supplying it elsewhere, especially to riskier markets.  This strategy is simple, you borrow crvUSD and supply it at higher rates, making the difference:</p> \\[\\text{profitRate = supplyRate - borrowRate}\\] <p>Strategy:</p> <ol> <li>Supply collateral (e.g., ETH, wBTC, wstETH) to a crvUSD market</li> <li>Borrow crvUSD</li> <li>Supply crvUSD to a market with a higher supplying rate than crvUSD borrow rates, e.g., Curve Lending Markets, Conic Omnipools, Silo Finance Markets.</li> </ol> <p>Risks:</p> <ul> <li>The user must monitor their loan health to stay out of any liquidations (soft or hard) as losses from liquidation may be larger than profit from the rate arbitrage.</li> <li>crvUSD risk, i.e., smart contract risk from crvUSD stablecoin and the crvUSD markets, see crvUSD risk disclaimer here</li> <li>Smart contract and bad debt risk from lending markets, i.e., if you supply to Curve lending, see Curve Lending risk disclaimer here.  Otherwise please research and be informed of risks for other platforms.  Mentions of platforms here is not an endorsement of their safety.</li> </ul>"},{"location":"crvusd/understanding-crvusd/","title":"Understanding crvUSD","text":"<p>Curve Stablecoin infrastructure enables users to mint crvUSD using a variety of crypto collaterals.</p> <p>Positions are managed passively: if the price of the collateral decreases, the loan automatically enters a soft-liquidation mode, wherein some of the collateral is converted to crvUSD. Conversely, if the collateral's price increases, the system reclaims the collateral by converting crvUSD back to the collateral token.</p> <p>However, this process may incur some losses due to the soft-liquidations and de-liquidations.</p> <p>Manage crvUSD positions at https://crvusd.curve.fi/.</p>"},{"location":"crvusd/understanding-crvusd/#markets","title":"Markets","text":"<p>On the <code>Markets</code> tab, all available collateral types are displayed.</p> <p>The page displays the current borrow rate, total debt, debt cap, remaining amount available for borrowing, and the total value of collateral.</p> <p> </p> <p>If a user does not have an existing loan, clicking on any market will lead to the loan creation interface.</p> <p>Should a loan already exist, a dollar sign overlay will appear on the left. Selecting the market in this case will lead to the loan management interface.</p>"},{"location":"crvusd/understanding-crvusd/#risks","title":"Risks","text":"<p>Please consider the following risk disclaimers when using the Curve Stablecoin infrastructure:</p> <ol> <li>If your collateral enters soft-liquidation mode, you can't withdraw it or add more collateral to your position. Should the price of the collateral drop sharply over a short time interval, your position will get hard-liquidated, with no option of de-liquidation. Please choose your leverage wisely, as you would with any collateralized debt position.<ol> <li>If your collateral enters soft-liquidation mode, you can't withdraw it or add more collateral to your position.</li> <li>Should the price of the collateral change drop sharply over a short time interval, it can result in large losses that may reduce your loan's health.</li> <li>If you are in soft-liquidation mode and the price of the collateral goes up sharply, this can result in de-liquidation losses on the way up. If your loan's health is low, value of collateral going up could potentially reduce your underwater loan's health.</li> <li>If the health of your loan drops to zero or below, your position will get hard-liquidated with no option of de-liquidation. Please choose your leverage wisely, as you would with any collateralized debt position.</li> </ol> </li> <li>The crvUSD stablecoin and its infrastructure are currently in beta testing. As a result, investing in crvUSD carries high risk and could lead to partial or complete loss of your investment due to its experimental nature. You are responsible for understanding the associated risks of buying, selling, and using crvUSD and its infrastructure.</li> <li>The value of crvUSD can fluctuate due to stablecoin market volatility or rapid changes in the liquidity of the stablecoin.</li> <li>crvUSD is exclusively issued by smart contracts, without an intermediary. However, the parameters that ensure the proper operation of the crvUSD infrastructure are subject to updates approved by Curve DAO. Users must stay informed about any parameter changes in the stablecoin infrastructure.</li> </ol>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/","title":"Creating a Stableswap NG Pool","text":"Creating a Stableswap-NG pool <p>The Stableswap pool creation is appropriate for assets expected to hold a price peg very close to each other, like a pair of dollarcoins. The creation wizard will guide you through the process of creating a pool, but if you have questions throughout you are encouraged to speak with a member of the Curve team in the Telegram or Discord.</p> <p>Stableswap pools are liquidity pools containing up to eight tokens using the StableSwap algorithm (Curve V1). For a better understanding of Curve V1, please see here: Understanding Curve V1.</p> <p>Stableswap-NG</p> <p>StableSwap-NG is an improved and refined version of the first StableSwap implementation. It is highly gas optimized and also includes dynamic fees which increases as liquidity utilization increases.</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#tokens-in-pool","title":"Tokens in Pool","text":"<p>The token selection tab can be used to select between two and eight tokens. A token can be selected by searching for the symbol of any token that is already being used on Curve, or by pasting the pool's address. Additional tokens can be added through the blue <code>Add token</code> button.</p> <p>When creating a metapool, only two tokens can be selected. One is the LP token, and the other is the token to pair against it.</p> <p>Warning</p> <ul> <li><code>ERC20:</code> Users are advised to do careful due diligence on ERC20 tokens that they interact with, as this contract cannot differentiate between harmless and malicious ERC20 tokens.</li> <li><code>Oracle:</code> When using tokens with oracles, it is important to know that they may be controlled externally by an EOA.</li> <li><code>Rebasing:</code> Users and integrators are advised to understand how the AMM contract works with rebasing balances.</li> <li><code>ERC4626:</code> Some ERC4626 implementations may be susceptible to Donation/Inflation attacks. Users are advised to proceed with caution.</li> </ul> <p>For the AMM to function correctly, the appropriate asset type needs to be chosen when selecting the assets. The following asset types are supported:</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#standard-erc-20","title":"Standard ERC-20","text":"<p>Standard ERC-20 tokens do not need any additional configuration.</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#tokens-with-oracles","title":"Tokens with Oracles","text":"<p>Oracle Precision</p> <p>The precision of the rate oracle must be \\(10^{18}\\). Otherwise, the liquidity pool will not function correctly, as the exchange rate will be broken.</p> <p>Some tokens might require an external rate oracle to ensure correct calculations within the AMM. This is especially useful for tokens with rates against their underlying tokens, such as rETH against ETH. In this case, when selecting a token with an oracle, the corresponding box needs to be ticked, and an extra section for the contract address and oracle price method will appear. Some tokens might source their price oracle from a contract other than the token contract.</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#rebasing-tokens","title":"Rebasing Tokens","text":"<p>Rebasing tokens in crypto are cryptocurrencies that automatically adjust their supply periodically based on a predetermined algorithm, typically to maintain a stable value or peg to another asset. </p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#erc-4626","title":"ERC-4626","text":"<p>ERC-4626 is a standard designed to optimize and unify the technical parameters of yield-bearing vaults. It provides a standard API for tokenized yield-bearing vaults that represent shares of a single underlying ERC-20 token. When using these kinds of tokens, the pool calculates the underlying amount as if the underlying tokens were in the pool.</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#parameters","title":"Parameters","text":"<p>Stableswap-NG offers three different default Pool Parameter Presets:</p> <ul> <li><code>Swap Fee ranging from 0% to 1%</code>: The swap fee charged during transactions.</li> <li><code>A ranging from 1 to 5,000</code>: <code>A</code> is an amplification coefficient, which defines the pool's liquidity depth. The higher the value of <code>A</code>, the deeper the liquidity.</li> <li><code>Offpeg Fee Multiplier from 0 to 12.5</code>: A multiplier that adjusts the Swap Fee based on the pool's state.</li> <li><code>Moving Average Time ranging from 60 to 3600 seconds</code>: The moving average time window for the built-in oracle.</li> </ul> <p><code>Offpeg Fee Multiplier</code></p> <p>Stableswap-NG introduces a dynamic fee. The use of the <code>Offpeg Fee Multiplier</code> allows the system to dynamically adjust the fee based on the pool's state.</p> <p>A tool to play around with the dynamic fee: https://www.desmos.com/calculator/zhrwbvcipo?</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#pool-info","title":"Pool Info","text":"<p>Finally, after setting all the parameters, a <code>Pool Name</code> and <code>Pool Symbol</code> can be chosen:</p>"},{"location":"factory-pools/creating-a-stableswap-ng-pool/#deploying-the-pool","title":"Deploying the Pool","text":"<p>On the right-hand side, there is a tab that summarizes all the tokens, parameters, and information. The pool can finally be deployed by pressing the blue <code>Create Pool</code> button at the bottom.</p> <p>After deployment, make sure to seed initial liquidity and potentially create a gauge.</p>"},{"location":"factory-pools/creating-a-tricrypto-ng-pool/","title":"Creating a Tricrypto NG Pool","text":"Creating a Tricrypto-NG Pool <p>A tricrypto-NG pool is a liquidity pool containing three volatile assets using the CryptoSwap algorithm (Curve V2). For a better understanding of Curve v2, please see here: Understanding Curve v2.</p> <p>Due to safety reasons, the use of plain ETH is no longer possible. Instead, wrapped ETH (wETH) needs to be used.</p> <p>The following documentation will present a rundown of the process of creating such a pool using the Pool Creation Interface:</p>"},{"location":"factory-pools/creating-a-tricrypto-ng-pool/#tokens-in-pool","title":"Tokens in Pool","text":"<p>In the token selection tab, three tokens can be chosen. By default, the UI allows a user to select two tokens, but clicking on the blue <code>Add token</code> button will extend the token selection by one more token.</p>"},{"location":"factory-pools/creating-a-tricrypto-ng-pool/#parameters","title":"Parameters","text":"<p>The UI provides two presets for parameter values:</p> <ul> <li><code>Tricrypto</code>: Suitable for pools containing a USD stablecoin, BTC (e.g., tBTC or wBTC), and ETH.</li> <li><code>Three Coin Volatile</code>: Suitable for pools containing a volatile token paired with ETH and USD stablecoins.</li> </ul> <p>On the parameters tab, you can review and adjust the predefined parameters from the preset. Crypto v2 pools contain many parameters. If you are uncertain which parameters to use, you may want to ask for help in any Curve channel before deploying.</p> <p>The basic parameters include the fees charged to users who interact with the pool. This is divided dynamically into a <code>Mid fee</code> and <code>Out fee</code> parameter, which represent the minimum and maximum fees during periods of low and high volatility.</p> <ul> <li><code>Mid Fee ranging from 0.005% to 3%</code>: This is the minimum fee and is charged when the pool is perfectly balanced.</li> <li><code>Out Fee ranging from 0.01% to 3%</code>: This is the maximum fee and is charged when the pool is completely out of balance.</li> </ul> <p>In CryptoSwap pools, the liquidity is concentrated. These initial liquidity concentration prices are fetched from CoinGecko. If the tokens do not exist there or for some reason cannot be fetched, the user must set these values manually.</p> <p>The Advanced toggle allows you to adjust several other parameters under the hood.</p> <p>Tip</p> <p>A great article on understanding parameters can be found here: https://nagaking.substack.com/p/deep-dive-curve-v2-parameters?s=curve.</p> <ul> <li><code>Amplification Parameter (A) ranging from 4,000 to 400,000,000</code>: Larger values of A make the curve better resemble a straight line in the center (when the pool is near balance). Highly volatile assets should use a lower value, while assets that are closer together may be best with a higher value.</li> <li><code>Gamma ranging from 0.00000001 to 0.002</code>: The gamma parameter can further adjust the shape of the curve. Default values recommend 0.000145 for volatile assets and 0.0001 for less volatile assets.</li> <li><code>Allowed Extra Profit ranging from 0 to 0.01</code>: As the pool takes profit, the allowed extra profit parameter allows for greater values. Recommended 0.000002 for volatile assets and 0.00000001 for less volatile assets.</li> <li><code>Fee Gamma ranging from 0 to 1</code>: Adjusts how fast the fee increases from Mid Fee to Out Fee. Lower values cause fees to increase faster with imbalance. Recommended value of 0.0023 for volatile assets and 0.005 for less volatile assets.</li> <li><code>Adjustment Step ranging from 0 to 1</code>: As the pool rebalances, it must do so in units larger than the adjustment step size. Volatile assets are suggested to use larger values (0.000146), while less volatile assets do not move as frequently and may use smaller step sizes (default 0.0000055).</li> <li><code>Moving Average Time ranging from 0 to 604,800 seconds</code>: The price oracle uses an exponential moving average to dampen the effect of changes. This parameter adjusts the half-life used.</li> </ul>"},{"location":"factory-pools/creating-a-tricrypto-ng-pool/#pool-info","title":"Pool Info","text":"<p>Finally, after setting all the parameters, a <code>Pool Name</code> and <code>Pool Symbol</code> can be chosen:</p>"},{"location":"factory-pools/creating-a-tricrypto-ng-pool/#deploying-the-pool","title":"Deploying the Pool","text":"<p>On the right-hand side, there is a tab that summarizes all the tokens, parameters, and information. The pool can finally be deployed by pressing the blue <code>Create Pool</code> button at the bottom.</p> <p>After deployment, make sure to seed initial liquidity and create a gauge.</p>"},{"location":"factory-pools/creating-a-twocrypto-ng-pool/","title":"Creating a Twocrypto NG Pool","text":"Creating a Twocrypto-NG Pool <p>A twocrypto-NG pool is a liquidity pool containing two volatile assets using the CryptoSwap algorithm (Curve V2). For a better understanding of Curve v2, please see here: Understanding Curve v2.</p> <p>Due to safety reasons, the use of plain ETH is no longer possible. Instead, wrapped ETH (wETH) needs to be used.</p> <p>The following documentation will present a rundown of the process of creating such a pool using the Pool Creation Interface:</p>"},{"location":"factory-pools/creating-a-twocrypto-ng-pool/#tokens-in-pool","title":"Tokens in Pool","text":"<p>In the token selection tab, two tokens can be chosen. By default, the UI allows a user to select two tokens, but clicking on the blue <code>Add token</code> button will extend the token selection by one more token, which would result in the creation of a Tricrypto-NG pool.</p>"},{"location":"factory-pools/creating-a-twocrypto-ng-pool/#parameters","title":"Parameters","text":"<p>The UI provides three presets for parameter values:</p> <ul> <li><code>Crypto</code>: Suitable for most volatile pairs such as LDO &lt;&gt; ETH</li> <li><code>Forex</code>: Suitable for forex pairs with low relative volatility such as crvUSD &lt;&gt; EURe</li> <li><code>Liquidity Staking Derivatives</code>: Suitable for liquid staking derivatives soft-pegged to its underlying asset such as wETH &lt;&gt; cbETH</li> <li><code>Liquid Restaking Tokens</code>: Suitable for liquid restaking tokens such as WETH &lt;&gt; pufETH.</li> </ul> <p>On the parameters tab, you can review and adjust the predefined parameters from the preset. Crypto v2 pools contain many parameters. If you are uncertain which parameters to use, you may want to ask for help in any Curve channel before deploying.</p> <p>The basic parameters include the fees charged to users who interact with the pool. This is divided dynamically into a <code>Mid fee</code> and <code>Out fee</code> parameter, which represent the minimum and maximum fees during periods of low and high volatility.</p> <ul> <li><code>Mid Fee ranging from 0.005% to 3%</code>: This is the minimum fee and is charged when the pool is perfectly balanced.</li> <li><code>Out Fee ranging from 0.26% to 3%</code>: This is the maximum fee and is charged when the pool is completely out of balance.</li> </ul> <p>In CryptoSwap pools, the liquidity is concentrated. These initial liquidity concentration prices are fetched from CoinGecko. If the tokens do not exist there or for some reason cannot be fetched, the user must set these values manually.</p> <p>The Advanced toggle allows you to adjust several other parameters under the hood.</p> <p>Tip</p> <p>A great article on understanding parameters can be found here: https://nagaking.substack.com/p/deep-dive-curve-v2-parameters?s=curve.</p> <ul> <li><code>Amplification Parameter (A) ranging from 4,000 to 400,000,000</code>: Larger values of A make the curve better resemble a straight line in the center (when the pool is near balance). Highly volatile assets should use a lower value, while assets that are closer together may be best with a higher value.</li> <li><code>Gamma ranging from 0.00000001 to 1.99</code>: The gamma parameter can further adjust the shape of the curve. Default values recommend 0.000145 for volatile assets and 0.0001 for less volatile assets.</li> <li><code>Allowed Extra Profit ranging from 0 to 0.01</code>: As the pool takes profit, the allowed extra profit parameter allows for greater values. Recommended 0.000002 for volatile assets and 0.00000001 for less volatile assets.</li> <li><code>Fee Gamma ranging from 0 to 1</code>: Adjusts how fast the fee increases from Mid Fee to Out Fee. Lower values cause fees to increase faster with imbalance. Recommended value of 0.0023 for volatile assets and 0.005 for less volatile assets.</li> <li><code>Adjustment Step ranging from 0 to 1</code>: As the pool rebalances, it must do so in units larger than the adjustment step size. Volatile assets are suggested to use larger values (0.000146), while less volatile assets do not move as frequently and may use smaller step sizes (default 0.0000055).</li> <li><code>Moving Average Time ranging from 0 to 604,800 seconds</code>: The price oracle uses an exponential moving average to dampen the effect of changes. This parameter adjusts the half-life used.</li> </ul>"},{"location":"factory-pools/creating-a-twocrypto-ng-pool/#pool-info","title":"Pool Info","text":"<p>Finally, after setting all the parameters, a <code>Pool Name</code> and <code>Pool Symbol</code> can be chosen:</p>"},{"location":"factory-pools/creating-a-twocrypto-ng-pool/#deploying-the-pool","title":"Deploying the Pool","text":"<p>On the right-hand side, there is a tab that summarizes all the tokens, parameters, and information. The pool can finally be deployed by pressing the blue <code>Create Pool</code> button at the bottom.</p> <p>After deployment, make sure to seed initial liquidity and create a gauge.</p>"},{"location":"factory-pools/pool-creation-overview/","title":"Pool Creation Overview","text":"Curve Pool Creation <p>The Curve pool creation interface allows any user to permissionlessly deploy a Curve pool. These pools can contain a variety of assets, including pegged tokens, unpegged tokens, and some pool tokens, for example 3crv. This interface supports deploying pools on most chains, although there might be some chains that are not supported yet.</p> <p>Liquidity Pool Risks</p> <p>Each liquidity pool brings risks with it. Before using or creating any pools, please read the Risk Disclaimer.</p> <p>Asset 1 <code>Pool Creation Interface</code></p> <p>To get started, visit the <code>Pool Creation</code> tab at the top of the Curve homepage, and select whether you would like to create a \"Stableswap Pool\" (a pool with pegged assets, e.g., crvUSD &lt;&gt; USDT) or a \"Cryptoswap Pool\" (containing assets whose prices may be volatile, e.g., CRV &lt;&gt; ETH).</p> <p>Info</p> <p>NG stands for New-Generation and represents enhanced and improved versions of prior implementations. All newly created pools are \"new-generation pools\".</p> <ul> <li> <p>Stableswap</p> <p>Stableswap pools are liquidity pools containing up to eight pegged assets, for example crvUSD &lt;&gt; USDT &lt;&gt; USDC.</p> <p> <code>Getting started</code></p> </li> <li> <p>Twocrypto NG</p> <p>Twocrypto pools are liquidity pools containing two volatile assets, for example CRV &lt;&gt; ETH.</p> <p> <code>Getting started</code></p> </li> <li> <p>Tricrypto NG</p> <p>Tricrypto pools are liquidity pools containing three volatile assets, for example crvUSD &lt;&gt; BTC &lt;&gt; ETH.</p> <p> <code>Getting started</code></p> </li> </ul>"},{"location":"factory-pools/understanding-oracles/","title":"Understanding oracles","text":"<p>This article primarily covers the role of internal \u201cprice oracles\u201d within Curve Finance v2 pools, with a brief note at the end of LLAMMA price oracles.</p> <p>Please note that Curve v1 and v2 pools do not rely on external price oracles. Misuse of external price oracles is a contributing factor to several major DeFi hacks. If you are looking to use Curve\u2019s \u201cprice oracle\u201d functions, or any price oracle, to provide on-chain pricing data in a decentralized application you are building, we recommend extreme caution.</p>"},{"location":"factory-pools/understanding-oracles/#purpose","title":"Purpose","text":"<p>\u200bCurve v2 pools, which consist of assets with volatile prices, require a means of tracking prices. Instead of relying on external oracles, the pool instead calculates the price of these assets internally based on the trading activity within the pool.</p> <p>This is tracked by two similar but distinct parameters:</p> <ul> <li>Price Oracle: The pool\u2019s expectation of the asset\u2019s price</li> <li>Price Scale: The price based on the pool\u2019s actual concentration of liquidity</li> </ul> <p>Pools keep track of recent trades within the pool as a variable called <code>last_prices</code>. The <code>price_oracle</code> is calculated as an exponential moving average of recent trade prices. The <code>price_oracle</code> represents what the pool believes is the fair price of the asset .</p> <p>In contrast, <code>price_scale</code> is a snapshot of how the liquidity in the pool is actually distributed. For this reason, <code>price_scale</code> lags <code>price_oracle</code>. As users make trades, the pool calculates how to profitably readjust liquidity, and the <code>price_scale</code> moves in the direction of the <code>price_oracle</code>.</p> <p></p> <p>Price Oracle and Price Scale shown in the Curve UI</p>"},{"location":"factory-pools/understanding-oracles/#exponential-moving-average","title":"Exponential Moving Average","text":"<p>As discussed above, the <code>price_oracle</code> variable is calculated as an \u201cexponential moving average\u201d of <code>last_prices</code>.</p> <p>For comparison, traders commonly rely on a \u201csimple moving average\u201d as a technical analysis indicator, which calculates the average of a certain number points (ie, a 200-day moving average computes the average of the trailing 200 days of data).</p> <p>The \u201cexponential moving average\" is similar, except it applies a weighting to emphasize newer data over older data. This weighting falls off exponentially as it looks further back in time, so it can react quicker to recent trends.</p> <p></p>"},{"location":"factory-pools/understanding-oracles/#updates","title":"Updates","text":"<p>An internal function <code>tweak_price</code> is called every time prices might need to be updated by an operation which might adjust balances within a pool (hereafter referred to as a liquidity operation):</p> <ul> <li><code>add_liquidity</code></li> <li><code>remove_liquidity_one_coin</code></li> <li><code>exchange</code></li> <li><code>exchange_underlying</code></li> </ul> <p>The <code>tweak_price</code> function is a gas expensive function which can execute several state changing operations to state variables_._</p>"},{"location":"factory-pools/understanding-oracles/#price-oracle","title":"Price Oracle","text":"<p>The <code>price_oracle</code> is updated only once per block. If the current timestamp is greater than the timestamp of the last update, then <code>price_oracle</code> is updated using the previous <code>price_oracle value</code> and data from <code>last_prices</code>.</p> <p>The updated <code>price_oracle</code> is then used to calculate the vector distance from the <code>price_scale</code>, which is used to determine the amount of adjustment required for the <code>price_scale</code>.</p>"},{"location":"factory-pools/understanding-oracles/#profits-and-liquidity-balances","title":"Profits and Liquidity Balances","text":"<p>Curve v2 pools operate on profits. That is, liquidity is rebalanced when the pool has earned sufficient profits to do so. Every time a liquidity operation occurs, the pool chooses whether it should spend profits on rebalancing. The pool\u2019s actions may be considered as an attempt to rebalance liquidity close to market prices.</p> <p>Pools perform all such operations strictly with profits, never with user funds. Profits are occasionally claimed by administrators, otherwise funds remain in the pool. In other words, profits can be calculated from the following function:</p> <p><code>profits == erc20.balanceOf(i) - pool.balances(i)</code></p> <p>Internally, every time the <code>tweak_price</code> function is called during a liquidity operation, the pool tracks profits. It then uses the updated profit values to consider if it should rebalance liquidity.</p> <p>Specifically, pools carry a public parameter called <code>allowed_extra_profit</code> which works like a buffer. If the pool\u2019s virtual price has grown by more than a function of profits and the <code>allowed_extra_profit</code> buffer value, then the pool is considered profitable enough to rebalance liquidity.</p> <p>From here, the pool further checks that the <code>price_scale</code> is sufficiently different from <code>price_oracle</code>, to avoid rebalancing liquidity when prices are pegged. Finally, the pool computes the updates to the + and how this affects other pool parameters. If profits still allow, then the liquidity is rebalanced and prices are adjusted.</p>"},{"location":"factory-pools/understanding-oracles/#manipulation","title":"Manipulation","text":"<p>We do not recommend using Curve pools by themselves as canonical price oracles. It is possible, particularly with low liquidity pools, for outside users to manipulate the price.</p> <p>Curve pools nonetheless include protections against some forms of manipulation. The logic of the Curve <code>price_oracle</code> variable only updates once per block, which makes it more resistant to manipulation from malicious trading activity within a single block.</p> <p>Due to the fact that changes to <code>price_oracle</code> are dampened by an exponential moving average, attempts to manipulate the price may succeed but would require a prolonged attack over several blocks.</p> <p></p> <p>Actual $CVX price versus CVX-ETH Pool Price Oracle and Price Scale during rapid volatility</p> <p>These safeguards all help to prevent various forms of manipulation. However, for pools with low liquidity, it is not difficult for whales to manipulate the price over the course of several transactions. When relying on oracles on-chain, it is safest to compare results among several oracles and revert if any is behaving unusually.</p>"},{"location":"factory-pools/understanding-oracles/#v1-pools","title":"v1 Pools","text":"<p>Newer v1 Pools also contain a price oracle function, which also displays a moving average of recent prices. If the moving average price was written to the contract in the same block it will return this value, otherwise it will calculate on the fly any changes to the moving average since it was last written.</p> <p>Curve v1 pools do not have a concept of price scale, so no endpoint exists for retreiving this value. Older v1 pools will also not have a price oracle, so use caution if you are attempting to retrieve this value on-chain.</p>"},{"location":"factory-pools/understanding-oracles/#llamma","title":"LLAMMA","text":"<p>The LLAMMA use of oracles is quite different than Curve v2 pools in that it can utilize external price oracles. In LLAMMA, the <code>price_oracle</code> function refers to the collateral price (which can be thought of as the current market price) as determined by an external contract.</p> <p>For example, LLAMMA uses <code>price_oracle</code> to convert $ETH to $crvUSD at a specific collateral price. When the external price is higher than the upper price (internally: <code>P_UP</code>), all assets in the band range are converted to $ETH. When the price is lower than the lower price (internally: <code>P_DOWN</code>), all assets are converted to $crvUSD. When the oracle price is in the middle, the current band is partially converted, with the exact proportion determined by price changes.</p> <p></p> <p>When the external price changes, an arbitrage opportunity exists. External arbitrageurs can deposit $ETH or $crvUSD to balance the pool, until the pool price reaches parity with the external price. LLAMMA applies an exponential moving average to the <code>price_oracle</code> to prevent users from absorbing losses due to drastic fluctuations.</p> <p>More information on price oracles and other LLAMMA dynamics are available at this article.</p>"},{"location":"glossary-branding/branding/","title":"Branding & Icons","text":"Branding &amp; Icons <p>Info</p> <p>To have a protocol's asset icon deployed on the Curve frontend, the icon needs to be added to the <code>curve-assets</code> repository on GitHub.  See the repository for more information.</p> <p>Official Curve logos can be found here:</p> Logo Description Data Type and Size Link Asset 1 <code>CRV</code> SVG Download Asset 1 <code>CRV</code> PNG <code>(200x200)</code> Download image/svg+xml <code>veCRV</code> SVG Download image/svg+xml <code>veCRV</code> PNG <code>(256x256)</code> Download <code>crvUSD</code> SVG Download <code>crvUSD</code> PNG <code>(200x200)</code> Download"},{"location":"glossary-branding/glossary/","title":"Glossary","text":"Glossary <p>This page should help any new user learn what people are talking about in different social channels or in these resources or the technical documentation.</p>"},{"location":"glossary-branding/glossary/#curvev1","title":"CurveV1","text":"<p>CurveV1 refers to first product Curve deployed, which was the stablecoin swap pools.  This term is used to describe any stable asset swap pool, e.g., USDT/USDC/DAI, stETH/ETH.</p>"},{"location":"glossary-branding/glossary/#curvev2","title":"CurveV2","text":"<p>CurveV2 was the second product Curve deployed, this was the cryptopool swap pools.  Cryptopools are swap pools which have assets which are not stable to each other, e.g., BTC/ETH/USDT, CRV/ETH.</p>"},{"location":"glossary-branding/glossary/#stableswap","title":"Stableswap","text":"<p>See CurveV1.</p>"},{"location":"glossary-branding/glossary/#cryptoswap","title":"Cryptoswap","text":"<p>See CurveV2</p>"},{"location":"glossary-branding/glossary/#liquid-lockers","title":"Liquid Lockers","text":"<p>Some projects offer to take CRV, lock it in a smart contract as veCRV and give a user tokens representing the veCRV in the smart contract.  These are called liquid lockers because the underlying veCRV is locked but can be transferred (is liquid).</p>"},{"location":"glossary-branding/glossary/#3crv","title":"3CRV","text":"<p>3CRV is the LP token for the 3Pool (sometimes referred to as TriPool). Trading fees are distributed in 3CRV.</p>"},{"location":"glossary-branding/glossary/#admin-fee","title":"Admin fee","text":"<p>Admin fee is the share of trading fees that are received by governance participants who have locked their CRV (see veCRV).</p>"},{"location":"glossary-branding/glossary/#base-pools","title":"Base Pools","text":"<p>Base pools are an old Curve concept, yet still working in some pools such as GUSD.  Base pool tokens can be paired with other tokens to create new pools, e.g. 3crv pool token (USDT, USDC, DAI) paired with GUSD.</p>"},{"location":"glossary-branding/glossary/#boosting-also-boosties","title":"Boosting (also boosties)","text":"<p>The act of locking your CRV to earn more CRV on your provided liquidity.</p> <p>Boosting your CRV Rewards</p>"},{"location":"glossary-branding/glossary/#crv","title":"CRV","text":"<p>Governance and utility token for the Curve DAO.</p>"},{"location":"glossary-branding/glossary/#defi-decentralized-finance","title":"DeFi (Decentralized Finance)","text":"<p>Decentralized finance (commonly referred to as DeFi) is an experimental form of finance that does not rely on financial intermediaries such as brokerages, exchanges, or banks, and instead utilizes blockchains, most commonly the Ethereum blockchain.</p>"},{"location":"glossary-branding/glossary/#metamask","title":"Metamask","text":"<p>Metamask is an Ethereum wallet that allows you to interact with Curve and other dapps. You can also use it with Ledger and Trezor hardware wallets. It's the most popular Ethereum web wallet and is available as an add-on for most browsers.</p>"},{"location":"glossary-branding/glossary/#metapool","title":"Metapool","text":"<p>Metapools are a type of pool on Curve composed of one asset as well as as LP tokens from another pool.</p>"},{"location":"glossary-branding/glossary/#llamas","title":"Llamas","text":"<p>Llamas are wonderful and magical creatures. Each Curve team member must own at least one llama as part of their contract with Curve Finance.</p>"},{"location":"glossary-branding/glossary/#lp-liquidity-provider","title":"LP (Liquidity provider)","text":"<p>Users providing liquidity (funds/assets) on the Curve or other DeFi protocols.</p>"},{"location":"glossary-branding/glossary/#lp-tokens-liquidity-provider-token","title":"LP tokens (Liquidity provider token)","text":"<p>When you deposit into a Curve pool, you receive a counter party token which represents your share of the pool.</p>"},{"location":"glossary-branding/glossary/#vecrv","title":"veCRV","text":"<p>Stands for vote-escrowed CRV. They are CRV locked for the purpose of voting and earning fees.</p> <p>Understanding $CRV</p>"},{"location":"glossary-branding/glossary/#vote-locked-crv","title":"Vote-locked CRV","text":"<p>This term is used interchangeably with Vote-escrowed CRV and veCRV.</p>"},{"location":"glossary-branding/glossary/#yearn","title":"Yearn","text":"<p>Yearn Protocol is a set of Ethereum Smart Contracts focused on creating a simple way to generate high risk-adjusted returns for depositors of various assets via best-in-class lending protocols, liquidity pools, and community-made yield farming strategies on Ethereum. It was founded by Andre Cronje who has been a long term collaborator of Curve Finance.</p>"},{"location":"governance/community-fund/","title":"Community Fund","text":"Community Fund <p>The initial distribution of CRV allocated around 151M CRV to a community fund, intended for use in emergencies or as rewards for community-led initiatives. </p> <p>The Curve DAO has full access to these funds and can decide to award part of this fund through a proposal. Funds can only be distributed through linear vesting over a minimum duration of one year using a vesting contract.</p> <p>The contract is deployed on Ethereum at <code>0xe3997288987e6297ad550a69b31439504f513267</code>.</p> <p>If you have a project you believe deserves a grant, please create a proposal or discuss it with a team member on  Discord or  Telegram.</p> <p>More information on proposals: Creating a DAO proposal</p>"},{"location":"governance/understanding-governance/","title":"Understanding Governance","text":"Understanding Governance"},{"location":"governance/understanding-governance/#voting-on-the-curve-dao","title":"Voting on the Curve DAO","text":"<p>To vote in the Curve DAO, users need to vote lock their CRV. By doing so, participants can earn a boost on their provided liquidity and vote on all DAO proposals. Users who reach a voting power of 2,500 veCRV can also create new proposals. There is no minimum voting power required to participate in voting. The duration of governance proposals is seven days.</p> <p>Voting Power Decay</p> <p>When voting on DAO proposals, a user's voting power on an individual proposal starts to decay halfway through the vote as a measure to protect against manipulation by whales. This does not apply to gauge weight votes. Additionally, overall voting power decays linearly over time. More details are provided in the section below.</p> <p>Example: A user begins the voting period for a proposal with 100 veCRV. If the voting duration is 7 days, their voting power will remain at 100 veCRV for the first 3.5 days. After this point, their voting power starts to decay linearly. By day 5.25 (which is halfway through the decay period), their voting power would have decreased to 50 veCRV. By the end of the 7-day voting period, the user\u2019s voting power would have diminished further, approaching 0 veCRV.</p>"},{"location":"governance/understanding-governance/#voting-power","title":"Voting Power","text":"<p>veCRV stands for vote-escrowed CRV. It's a mechanism where users can lock their CRV tokens for varying lengths of time to gain voting power. Users have the option to lock their CRV for a minimum of one week and a maximum of four years. Those with longer voting escrows wield more stake, thereby receiving greater voting power.</p> <p>A user's voting power gradually decreases over time until it reaches zero at the time of unlock. For instance, if a user decides to lock 100 CRV for four years, they will initially receive 100 veCRV. After one year, due to the constant decay, the user's veCRV balance will reduce to 75 veCRV, then to 50 veCRV after two years, etc... until it finally zeroes out after four years.</p> <p>The existing lock can be extended at every point in time, resulting in a increased veCRV balance again.</p>"},{"location":"governance/understanding-governance/#dao-votes","title":"DAO Votes","text":"<p>There are three different kinds of votes:</p> <ol> <li>Ownership votes, which control most functionality within the protocol. These votes require a 30% quorum with 51% support.</li> <li>Parameter votes, which can modify pool parameters. These votes require a 15% quorum with 60% support.</li> <li>Emergency votes, which are executed through a multisig consisting of nine members, comprised of reputable figures within the DeFi and Crypto community. More here: Emergency DAO.</li> </ol> <p>Voting Quorum</p> <p>Intuitively, one might think that the total number of votes (<code>YES</code> and <code>NO</code>) would count towards the quorum. However, this is not the case here. Only <code>YES</code> votes are counted towards the quorum.</p> <p>This can lead to scenarios like this: https://twitter.com/WormholeOracle/status/1782646259536531808</p>"},{"location":"governance/understanding-governance/#emergency-dao","title":"Emergency DAO","text":"<p>The EmergencyDAO is a 5 of 9 multisig which has very limited actions. It may kill non-factory pools up to 2 months old. Pools that have been killed will only allow users to <code>remove_liquidity</code>. It may also kill liquidity gauges at any time, setting its rate of CRV emissions to 0 and therefore not allowing any further CRV emission to the pool. </p> <p>The EmergencyDAO multisig is deployed at <code>0x467947EE34aF926cF1DCac093870f613C96B1E0c</code> and currently consists of the following signers:</p> Name Details - Telegram Handle <code>banteg</code> <code>Yearn, @banteg</code> <code>Calvin</code> <code>@calchulus</code> <code>C2tP</code> <code>Convex, @c2tp_eth</code> <code>Darly Lau</code> <code>@Daryllautk</code> <code>Ga3b_node</code> <code>@ga3b_node</code> <code>Naga King</code> <code>@nagakingg</code> <code>Peter MM</code> <code>@PeterMm</code> <code>Addison</code> <code>@addisonthunderhead</code> <code>Quentin Milne</code> <code>StakeDAO, @Kii_iu</code>"},{"location":"governance/understanding-governance/#cross-chain-governance","title":"Cross-Chain Governance","text":"<p>Since Curve is deployed on various chains, there is a need for a permissionless cross-chain governance framework to grant the DAO control over contracts across these chains. To address this, Curve has deployed various contracts on those chains to ensure DAO control. Even for cross-chain votes, voting always takes place on the Ethereum Mainnet. Once the vote concludes, the final outcome is transmitted via a message to the corresponding chain, where it is then executed.</p> <p>DAO Control Across Chains</p> <p>While DAO control of Curve smart contracts is ensured on most chains, some chains might not yet offer the required infrastructure to support this cross-chain framework. A list of all cross-chain ownership-related contracts, as well as more technical documentation, can be found here.</p>"},{"location":"governance/understanding-governance/#the-dao-dashboard","title":"The DAO Dashboard","text":"<p>Users can access the Curve DAO dashboard at https://dao.curve.fi/dao. This dashboard provides an overview of all current and closed votes. Each proposal should have a corresponding topic on the Curve governance forum, accessible at https://gov.curve.fi/.</p>"},{"location":"governance/understanding-governance/#creating-proposals","title":"Creating Proposals","text":"<p>To create an official proposal, users should first draft the proposal and post it on the governance forum. It\u2019s important to evaluate the proposal\u2019s feasibility and gauge community interest through the Curve Discord, Telegram, or Governance forum.</p> <p>If users are unsure about the technical aspects of submitting the proposal to the Ethereum blockchain, they can seek assistance from a member of the team.</p> <p>For more details, see: Creating DAO Proposals</p>"},{"location":"governance/voting/","title":"Voting","text":""},{"location":"governance/voting/#how-to-participate-in-governance","title":"How to participate in governance?","text":"<p>To participate in governance, Curve Finance users need to lock their CRV into a voting escrow.</p> <p>You can do so at this address: https://dao.curve.fi/locker\u200b</p>"},{"location":"governance/voting/#what-are-vecrv","title":"What are veCRV?","text":"<p>veCRV stands for voting escrow CRV. They are your CRV locked for voting. The longer you lock your CRV for, the more voting power you have (and the bigger boost you can reach). You can vote lock 1,000 CRV for a year to have a 250 veCRV weight.</p> <p>Your veCRV weight gradually decreases as your escrowed tokens approach their lock expiry. A graph illustrating the decrease can be found at this address: https://dao.curve.fi/locker\u200b</p> <p>Get more voting power by locking your CRV for a longer period of time.</p>"},{"location":"governance/voting/#can-i-start-voting-right-away","title":"Can I start voting right away?","text":"<p>You can only vote using your voting weight at the block where a proposal was created.</p>"},{"location":"governance/voting/#how-to-vote","title":"How to vote?","text":"<p>Simply visit the proposal of your choice, click your vote option and confirm your transaction. You can find DAO proposals at this address: https://dao.curve.fi/dao\u200b</p> <p></p>"},{"location":"governance/voting/#where-can-i-find-out-about-governance","title":"Where can I find out about governance?","text":"<p>You can visit the Curve Finance governance forum at this address http://gov.curve.fi/\u200b</p>"},{"location":"governance/proposals/creating-a-dao-proposal/","title":"Creating a DAO proposal","text":"<p>Official DAO proposals are the only way to create enforceable changes in the Curve protocol. There are currently two types of votes: parameter and text.</p> <p>Parameter votes are automatically committed to the DAO three days after they are enacted at the end of the vote. Text proposals are different as they often necessitate development. For these, it is recommended to discuss with the Curve team to understand the feasibility and to create a signaling proposal.</p> <p>Before creating an on-chain vote, it might make sense to do a temperature check on the governance forum, especially if the subject is of an important matter.</p> <p>To actually create an on-chain proposal, 2500 veCRV are required. (1)</p> <ol> <li>But there's nothing to worry about, my friend. If you don't have 2500 veCRV, there are plenty of helpful community members who will surely help you create one.</li> </ol>"},{"location":"governance/proposals/creating-a-dao-proposal/#creating-your-vote","title":"Creating your vote","text":"<p>Visit the Curve DAO: https://dao.curve.fi/dao, select your type of vote and submit it.</p> <p></p>"},{"location":"governance/proposals/creating-a-dao-proposal/#creating-your-proposal","title":"Creating your proposal","text":"<p>Every DAO proposal must be accompanied with a proposal on the Curve governance forum. Visit the proposal section: https://gov.curve.fi/c/proposals/8 and click \"New Topic\".</p> <p>You will then be presented with a template to help you present your proposed choices to the community.</p> <p></p> <p>After that's done, be sure to engage with members of the community who have questions about your proposal.</p>"},{"location":"lending/create-lending-market/","title":"How to Create a Lending Market","text":"Creating Lending Markets"},{"location":"lending/create-lending-market/#creating-a-pool","title":"Creating a Pool","text":"<p>Before attempting to create a lending market, a curve pool for the ASSET paired with crvUSD which implements an unmanipulatable price oracle must exist.   Pools with unmanipulatable oracles are the following:</p> <ul> <li>twocrypto-ng - for 2 unpegged assets, e.g., crvUSD/CRV</li> <li>tricrypto-ng - for 3 unpegged assets, e.g., crvUSD/WETH/CRV</li> <li>stableswap-ng - for 2 pegged assets, e.g., crvUSD/USDC</li> </ul> <p>Custom Price Oracles</p> <p>If an ASSET/WETH pool is more desirable than an ASSET/crvUSD pool, it is possible to link the ASSET/WETH price to the WETH/crvUSD price using a custom price oracle.  This can then be used to create a lending market.  Please get in contact with the team in telegram if this is the case.</p> <p>The easiest way to create a pool is through the official Create Pool UI.</p> <p>Guides are available for creating a stableswap-ng pool, twocrypto-ng pool, and a tricrypto-ng pool.</p>"},{"location":"lending/create-lending-market/#creating-a-lending-market","title":"Creating a Lending Market","text":"<p>To create a lending market use the <code>create</code>, or <code>create_from_pool</code> methods in the <code>OneWay Lending Factory</code> smart contract to deploy all relevant contracts and set all parameters.  Find the <code>OneWay Lending Factory</code> addresses for different chains here.  There is no UI for this step, it has to be done through Etherscan, or manually.</p> <p>To deploy a lending market using the <code>create_from_pool</code> method after deploying a pool the following unique parameter is used:</p> <ul> <li><code>pool</code> : the address of the pool which includes both the <code>borrowed_token</code> and <code>collateral_token</code>.</li> </ul> <p>To deploy a lending market using the <code>create</code> method with a custom oracle the following unique parameter is used:</p> <ul> <li><code>price_oracle</code> : address of the custom price oracle contract</li> </ul> <p>Then for both methods the following additional parameters must be supplied:</p> <ul> <li><code>borrowed_token</code> : address of the token to be supplied and borrowed</li> <li><code>collateral_token</code> : address of the token to be used as collateral</li> <li><code>A</code> : the amplification factor, most markets use a value between 10-30.  Use lower values for riskier assets.  Input as a normal number, e.g., 10 = 10</li> <li><code>fee</code> : the amm swap fee, most pools use between 0.3-1.5%.  Input as a \\(10^{18}\\) number, e.g., 0.06% = 6000000000000000.</li> <li><code>loan_discount</code> : the amount to discount collateral for calculating maximum LTV.  This is usually higher than <code>liquidation_discount</code> by 3-4%.  Input as a \\(10^{18}\\) number, e.g., 11% = 110000000000000000.</li> <li><code>liquidation_discount</code> : the amount to discount collateral for health and hard-liquidation calculations.  This is usually less than <code>loan_discount</code> by 3-4%.  Input as a \\(10^{18}\\) number, e.g., 8% = 80000000000000000.</li> <li><code>name</code> : The name of the market</li> </ul> <p>Finally, the following parameters are optional for both methods, if they are not supplied they are set to the default values set by the CurveDAO:</p> <ul> <li><code>min_borrow_rate</code> : the minimum borrow rate, as rate/sec.  Input as a \\(10^{18}\\) number, e.g., 1% APR = 317097919</li> <li><code>max_borrow_rate</code> : the maximum borrow rate, as rate/sec.  Input as a \\(10^{18}\\) number, e.g., 80% APR = 25367833587</li> </ul> <p>Warning</p> <p>Parameters are given in different formats: <code>A</code> is just given as itself, e.g., 30 = 30, but others like <code>loan_discount</code> are given as a a \\(10^{18}\\) number, e.g., 11% = 110000000000000000.</p> <p>Using the <code>OneWay Lending Factory</code> will add the pool to the Curve UI and deploy all contracts needed for the market to function.</p>"},{"location":"lending/create-lending-market/#crv-rewards-and-other-incentives-for-suppliers","title":"CRV Rewards and other Incentives for Suppliers","text":""},{"location":"lending/create-lending-market/#deploying-a-gauge","title":"Deploying a Gauge","text":"<p>A Curve lending market requires a gauge linked to the supply vault before suppliers can stake their vault shares to receive incentives/rewards.  A gauge can be easily deployed through the <code>OneWay Lending Factory</code> by calling the <code>deploy_gauge</code> method and supplying the newly created <code>vault</code> contract address.  Anyone can deploy a gauge for a market that does not have one.</p>"},{"location":"lending/create-lending-market/#receiving-crv-rewards-from-weekly-emissions","title":"Receiving CRV rewards from weekly emissions","text":"<p>Before a gauge is eligible to receive CRV from weekly emissions, it must be added to the <code>Gauge Controller</code> contract, the contract is deployed on Ethereum here.  To be added to the <code>Gauge Controller</code> the CurveDAO must vote to add the lending market's gauge.  See here for how to create a vote to add a gauge to the <code>Gauge Controller</code>.</p> <p>Once a Curve lending market has a gauge added to the <code>Gauge Controller</code> and it receives some gauge weight, the suppliers will receive CRV rewards when they stake their vault shares into the gauge.</p>"},{"location":"lending/create-lending-market/#adding-other-incentives-for-suppliers","title":"Adding other incentives for suppliers","text":"<p>The deployer of the Curve Lending Market is given the role of <code>manager</code>.  The <code>manager</code> can add reward tokens to the pool through the <code>add_reward</code> method within the lending market's gauge.  Once a token is added, the <code>manager</code> can deposit the token using the <code>deposit_reward_token</code> method.  The tokens then stream to the suppliers staked in the gauge over the specified period.</p>"},{"location":"lending/create-lending-market/#lending-market-deployment-parameters","title":"Lending Market Deployment Parameters","text":""},{"location":"lending/create-lending-market/#amplification-factor-a","title":"Amplification Factor (A)","text":"<p>The amplification factor <code>A</code> defines the width of bands, see formula below and more detailed information here and applet here.  <code>A</code> is also a part of the calculation for the maximum LTV of the market, see <code>loan_discount</code> section.</p> \\[\\text{band_width} \\approx \\frac{\\text{price}}{\\text{A}}\\]"},{"location":"lending/create-lending-market/#loan-discount","title":"Loan Discount","text":"<p>The <code>loan_discount</code> is used for finding the maximum LTV (loan-to-value) a user can have in a lending market.  At the time of writing this value ranges from 7% for WETH to 33% for volatile and less liquid assets like UwU.  Use the calculator here to see the maximum LTVs a user can have based on the <code>loan_discount</code>, amplification factor <code>A</code> and their number of bands <code>N</code>.  The formula is:</p> \\[\\text{max_LTV} = 1 - \\text{loan_discount} - \\frac{N}{2*A}\\]"},{"location":"lending/create-lending-market/#liquidation-discount","title":"Liquidation Discount","text":"<p><code>liquidation_discount</code> defines how much to discount the collateral for the purpose of a hard-liquidation.  This is usually 3-4% lower than the <code>loan_discount</code>.  A user is hard-liquidated when their health is less than 0, and the <code>liquidation_discount</code> is an integral part of the health calculation.  See here for more information</p>"},{"location":"lending/create-lending-market/#borrowing-interest-rates","title":"Borrowing Interest RatesInputs:Utilization Chart     Utilization Table","text":"<p>When creating a market the creator must define the <code>min_borrow_rate</code> and <code>max_borrow_rate</code> of the market.  Use the tool below to simulate how utilization affects borrowing and lending interest rates.  In the smart contracts the rates they are given as interest per second, converting from a desired <code>APR</code> to a <code>borrow_rate</code> in interest per second is as follows:</p> \\[\\text{borrow_rate} = \\frac{\\text{APR}}{\\text{seconds_in_year}} = \\frac{\\text{APR}}{86400 \\times 365}\\] Rate Calculator Min Borrow APR % : Max Borrow APR % :"},{"location":"lending/faq/","title":"Lending FAQ","text":"Curve Lending: FAQ"},{"location":"lending/faq/#general","title":"General","text":""},{"location":"lending/faq/#whats-the-difference-between-minting-crvusd-and-lending-markets","title":"What's the difference between minting crvUSD and lending markets?","text":"<p>Lending markets work very similarly to the markets for minting crvUSD. Here are the major differences:</p> <ul> <li>Lending markets are permissionless; any assets in combination with crvUSD can be used. This means users can borrow against tokens like CRV, LRT's, etc. You name it. The only requirement is a proper oracle<sup>1</sup>. Although, before creating a lending market, proper parameters should be simulated.</li> <li>The interest rate of lending markets solely depends on the utilization of the supplied assets, unlike for minting markets which depend on various factors such as crvUSD price, pegkeeper debt, and other parameters.</li> </ul>"},{"location":"lending/faq/#how-much-can-you-borrow-against-your-collateral-ltv","title":"How much can you borrow against your collateral (LTV)?","text":"<p>The maximum borrowable amount (LTV) is dependent on the parameter <code>A</code> and number of bands (<code>N</code>) chosen when creating a market. The more bands used, the higher the LTV.</p>"},{"location":"lending/faq/#how-does-the-llamma-liquidation-process-differ-from-other-debt-based-stablecoins","title":"How does the LLAMMA liquidation process differ from other debt-based stablecoins?","text":"<p>crvUSD uses an innovative mechanism to reduce the risk of liquidations. Instead of instantly triggering a liquidation at a specific price, a user\u2019s collateral is converted into stablecoins across a smooth range of prices.</p> <p>Simulations suggest most price drops would result in the loss of just a few percentage points worth of collateral value, instead of the instant and total loss implemented by the liquidation process common to most debt-based stablecoins.</p>"},{"location":"lending/faq/#what-tokens-can-be-used-in-lending-markets-how-to-create-a-lending-market","title":"What tokens can be used in lending markets? How to create a lending market?","text":"<p>Curve lending is totally permissionless. Everyone can create markets. The only requirement is, that crvUSD is either the borrowable or collateral token. Although creating a market is totally permissionless, some important parameters need to be simulated ahead of deployment.</p>"},{"location":"lending/faq/#what-is-a-loan-discount-and-what-impact-does-it-have","title":"What is a 'loan discount' and what impact does it have?","text":"<p>A 'loan discount' is a percentage applied to reduce the value of collateral for determining the maximum borrowable amount. A higher loan discount results in a lower borrowing limit, acting as a safety margin for lenders against collateral value declines. </p> <p>The maximum amount that can be borrowed is also influenced by other factors, such as market conditions and asset volatility. For more details on these factors and their impact on borrowing, see the technical documentation at https://docs.curve.fi/crvUSD/amm/.</p>"},{"location":"lending/faq/#what-is-the-difference-between-self-liquidating-and-repaying","title":"What is the difference between self-liquidating and repaying?","text":"<p>You cannot self-liquidate a partial amount of a loan, self-liquidating closes the loan, but you can repay a partial amount, e.g., 20% of the debt, this increases the health of the loan.  If the repayment takes you out of soft-liquidation, your bands may move.</p> <p>When repaying and self-liquidating the whole loan, repaying and self liquidating work slightly differently, let's show this using a market lending crvUSD using WETH as collateral:</p> <ul> <li>For self-liquidating, if some WETH has been converted to crvUSD during soft-liquidation, then the user must transfer the difference between the crvUSD held as collateral and the debt.</li> <li>When repaying with crvUSD, you must transfer enough crvUSD to cover the debt, and you receive all the collateral in return.  However in new markets (markets with leverage), it's possible to repay with collateral.  In this case, the user does not need to send anything, all collateral is transferred to crvUSD, and the user receives back any crvUSD left after debt is repaid.</li> </ul>"},{"location":"lending/faq/#liquidation-process","title":"Liquidation Process","text":""},{"location":"lending/faq/#what-is-my-liquidation-price","title":"What is my liquidation price?","text":"<p>When creating a loan, collateral is deposited and equally distributed over a range of prices, not just a single liquidation price. Should the price fall within this range, the collateral begins its conversion into crvUSD. This process aids in maintaining the loan's health and, under most conditions, wards off liquidation. As a result, there isn't one specific liquidation price.</p>"},{"location":"lending/faq/#when-depositing-collateral-how-do-i-adjust-and-select-my-collateral-deposit-price-range","title":"When depositing collateral, how do I adjust and select my collateral deposit price range?","text":"<p>The price range can be optionally adjusted and customized during the initial loan creation process. In the UI, the <code>\"Advanced Mode\"</code> toggle provides further insights into this range. </p>"},{"location":"lending/faq/#what-happens-when-the-collateral-price-drops-into-my-selected-range-soft-liquidation","title":"What happens when the collateral price drops into my selected range? (soft-liquidation)","text":"<p>Each lending market is linked to a LLAMMA, which is a special AMM. If the collateral price falls into the selected range, this collateral becomes tradable in the AMM. At this juncture, traders have the opportunity to acquire the collateral, substituting it with crvUSD. Consequently, the loan becomes collateralized by stablecoins, known for their more reliable value retention, contributing to the sustained health of the loan.</p>"},{"location":"lending/faq/#what-happens-if-the-collateral-price-recovers-de-liquidation","title":"What happens if the collateral price recovers? (de-liquidation)","text":"<p>As the collateral price increases, the aforementioned process reverses. The position undergoes trading through the AMM, transitioning from crvUSD back to the original form of collateral. Owing to AMM trading fees, it's typical for a slight percentage of the original collateral value to be diminished once the collateral price surpasses the upper limit of the predetermined liquidation range.</p>"},{"location":"lending/faq/#under-what-circumstances-can-i-be-liquidated-hard-liquidation","title":"Under what circumstances can I be liquidated? (hard-liquidation)","text":"<p>When a loan's health falls below 0%, it becomes eligible for liquidation. In this case, another party (called a liquidator) can step in to repay the debt. The liquidator receives the user's collateral in return for this service. While the user gets to keep what they borrowed, they permanently lose their collateral that was securing the loan.</p> <p>Although the crvUSD collateral conversion mechanism within the AMM is designed to protect against liquidations, it might not keep up with severe price fluctuations. It is advisable for borrowers to maintain their loan health, especially when prices fall within the selected liquidation range.</p>"},{"location":"lending/faq/#how-do-i-maintain-my-loan-health-if-collateral-price-drops-into-my-range","title":"How do I maintain my loan health if collateral price drops into my range?","text":"<p>When the collateral price falls into the liquidation range, adding new collateral to protect loan health is not permitted. Within this liquidation range, loan health can only be improved by repaying debt. Even minimal debt repayments can be effective in preventing liquidation while the collateral price resides within this range.</p>"},{"location":"lending/faq/#what-happens-to-the-collateral-in-the-event-of-hard-liquidation","title":"What happens to the collateral in the event of hard liquidation?","text":"<p>In the event of a hard liquidation, all available collateral is sold off by the AMM system, the debt is covered, and the loan is closed.</p>"},{"location":"lending/faq/#what-is-a-liquidation-discount-and-how-is-the-liquidation-discount-calculated-during-a-liquidation","title":"What is a \u2018liquidation discount\u2019 and how is the 'liquidation discount' calculated during a liquidation?","text":"<p>The 'liquidation discount' is calculated based on the collateral's market value and is designed to incentivize liquidators to participate in the liquidation process. This factor is used to effectively discount the collateral valuation when calculating the health for liquidation purposes.</p> <p>In other protocols, this may be referred to as a \u201cliquidation threshold\u201d and is often hard-coded instead of calculated dynamically.</p>"},{"location":"lending/faq/#interest-rate","title":"Interest Rate","text":""},{"location":"lending/faq/#what-is-the-borrow-rate","title":"What is the borrow rate?","text":"<p>The borrow rate is the variable interest rate charged on the debt of the loan. The borrow rate is solely determined by the utilization of the market.</p>"},{"location":"lending/faq/#how-is-the-borrow-rate-calculated","title":"How is the borrow rate calculated?","text":"<p>For the calculation of the borrow rate, see here.</p>"},{"location":"lending/faq/#what-is-the-lend-rate","title":"What is the lend rate?","text":"<p>The lend rate is the variable interest rate a lender receives in exchange for lending out their assets to borrowers.</p>"},{"location":"lending/faq/#how-is-the-lend-rate-calculated","title":"How is the lend rate calculated?","text":"<p>For the calculation of the lend rate, see here.</p>"},{"location":"lending/faq/#safety-and-risks","title":"Safety and Risks","text":""},{"location":"lending/faq/#what-are-the-risks-of-using-crvusd","title":"What are the risks of using crvUSD","text":"<p>A risk disclaimer can be found here</p>"},{"location":"lending/faq/#how-can-i-best-manage-my-risks-when-borrowing-assets","title":"How can I best manage my risks when borrowing assets?","text":"<p>Best risk management practices include maintaining a safe collateralization ratio, understanding the potential for liquidation, and keeping an eye on market conditions.</p>"},{"location":"lending/faq/#has-the-lending-system-been-audited","title":"Has the lending system been audited?","text":"<p>Yes. All public audits can be found here.</p>"},{"location":"lending/faq/#can-i-see-the-code","title":"Can I see the code?","text":"<p>The code is publicly available on the Curve Github.</p> <ol> <li> <p>New Curve pools such as stableswap-ng, twocrypto-ng, or tricrypto-ng provide a suitable oracle.\u00a0\u21a9</p> </li> </ol>"},{"location":"lending/how-to-borrow/","title":"How to Borrow & Use Leverage","text":"How to Borrow &amp; Use Leverage"},{"location":"lending/how-to-borrow/#borrowing-ui","title":"Borrowing UI","text":"<p>When selecting the <code>\"BORROW\"</code> tab from the main UI, all relevant market information and values for borrowers are displayed:</p> <p><code>Collateral</code> displays the collateral token of the market, while <code>Borrow</code> shows the token which can be borrowed.  The <code>leverage</code> column shows whether or not built-in leverage is available in the market.</p> <p><code>Borrow APY</code> represents the current borrow rate.  The <code>Available</code> column shows the amount of assets left to borrow and <code>Borrowed</code> is the total amount currently borrowed.</p> <p><code>Supplied</code> shows the total amount of the borrowable token which has been supplied by users.  The <code>Utilization (%)</code> is the ratio of <code>Borrowed</code> to <code>Supplied</code> tokens, see here for more information.</p>"},{"location":"lending/how-to-borrow/#creating-a-new-loan","title":"Creating A New Loan","text":"<p>In order to create a loan and borrow tokens against collateral, a user first needs to choose a lending market. This can simply be done by clicking the desired market.</p> <p>Having <code>\"Advanced Mode\"</code> activated when creating a loan allows the user to additionally select the number of bands for the loan and displays the corresponding liquidation range. If deactivated, the loan will be created with a default amount of 10 bands.</p> Advanced Mode can be toggled on the top right of the page. <p>Number of Bands (N)</p> <p>A higher number of bands results in fewer losses when the loan is in soft-liquidation mode. The maximum number of bands is 50, while the minimum is 4.</p> <p>Additionally, the UI shows the future borrow APY when the user's loan is created and the loan-to-value (LTV) ratio.</p> <p>Advanced mode also enables an overview of the entire LLAMMA including important values such as lend or borrow APY, available amount to borrow, etc.</p> <p>Down below, a section containing relevant contracts and the current parameters for the lending market is displayed.</p> <ul> <li><code>Fee</code>: The current exchange fee for swapping tokens in the AMM.</li> <li><code>Admin Fee</code>: The percentage of the total fee, which is awarded to veCRV holders. Currently, all fees go to liquidity providers in the AMM (which are the borrowers).</li> <li><code>A</code>: The amplification parameter A defines the density of liquidity and band size.</li> <li><code>Loan Discount</code>: The percentage used to discount the collateral for calculating the maximum borrowable amount when creating a loan.</li> <li><code>Liquidation Discount</code>: The percentage used to discount the collateral for calculating the recoverable value upon liquidation at the current market price.</li> <li><code>Base Price</code>: The base price is the price of the band number 0.</li> <li><code>Oracle Price</code>: The oracle price is the current price of the collateral as determined by the oracle. The oracle price is used to calculate the collateral's value and the loan's health.</li> </ul> <p>Navigating to the <code>\"Your Details\"</code> tab displays all the user's loan details:<sup>1</sup></p>"},{"location":"lending/how-to-borrow/#loan-management","title":"Loan Management","text":"<p>Loan Management when in soft-liquidation mode</p> <p>During soft-liquidation, users are unable to add or withdraw collateral. They can choose to either partially or fully repay their crvUSD debt to improve their health ratio or decide to self-liquidate their loan if their collateral composition contains sufficient crvUSD to cover the outstanding debt. If they opt for self-liquidation, the user's debt is fully repaid and the loan will be closed. Any residual amounts are then returned to the user.</p> <p>Understanding how soft-liquidations, loan health and hard-liquidations work is essential for understanding how to manage loans on Curve.  Be sure to read and understand the following sections before taking out a loan:</p> <ul> <li>Understanding Soft-Liquidations</li> <li>Understanding Loan Health &amp; Hard-Liquidations</li> </ul> <p>The rest of this section talks about how to use the UI to manage loans and collateral.</p>"},{"location":"lending/how-to-borrow/#collateral-tab","title":"Collateral Tab","text":"<p>The <code>\"Collateral\"</code> tab allows the adjustment of collateral:</p>"},{"location":"lending/how-to-borrow/#add-collateral","title":"Add collateral","text":"<p>Add more collateral to the loan.  This is not possible while in soft-liquidation.  If health is getting low, some debt must be repaid instead of adding more collateral.</p>"},{"location":"lending/how-to-borrow/#remove-collateral","title":"Remove collateral","text":"<p>Remove collateral from the loan.</p>"},{"location":"lending/how-to-borrow/#manage-loan-tab","title":"Manage Loan Tab","text":"<p>The <code>\"Manage Loan\"</code> tab has the following options:</p>"},{"location":"lending/how-to-borrow/#borrow-more","title":"Borrow More","text":"<p>Borrow more simply allows the user to borrow more debt and add more collateral at the same time.</p>"},{"location":"lending/how-to-borrow/#repay","title":"Repay","text":"<p>Repay has the following options, and all options allow the user to partially or fully repay their loans.  If only a partial repayment is done then the liquidation range will change for the user.</p> <p></p> <p>Repay From Collateral will remove the collateral (e.g., WETH or crvUSD) out of the lending market, convert them all to the debt asset if required (e.g., crvUSD), and send any leftover debt asset (e.g., crvUSD) back to the user if the loan is fully paid and closed.  Note this is only available on new markets (markets which allow leverage allow this feature).  For older markets it's required to repay with the debt token.</p> <p>Repay from wallet has two boxes, one for the collateral asset, and one for the debt asset:</p> <ul> <li> <p>Collateral asset, e.g., WETH: this works the same way as Repay From Collateral, all sent WETH would be converted to crvUSD, debt would be repaid and any remaining crvUSD transferred back to the user if the loan is fully paid and closed.</p> </li> <li> <p>Debt asset, e.g., crvUSD: this repays the debt with the sent crvUSD.  If all debt is repaid the loan is closed and all collateral in the lending market is sent back to the user, in the above case the user would receive back their WETH.</p> </li> </ul>"},{"location":"lending/how-to-borrow/#self-liquidate","title":"Self-liquidate","text":"<p>This allows a user to liquidate themselves before they get hard-liquidated.  Users using this feature will most likely already be in soft-liquidation.  This lets the user retrieve their collateral and stops them from losing the amount defined by the <code>liquidation_discount</code>.</p> <p>Let's look at user called Alice who intially borrowed 1000 crvUSD using 1 WETH as collateral for how this works.  Alice is in soft liquidation and her health is getting low.  In soft liquidation 0.2 WETH has been converted to 250 crvUSD, so she now has 0.8 WETH and 250 crvUSD backing her 1000 crvUSD loan.  Alice wants to self liquidate.  Alice only needs to send 750 crvUSD to self-liquidate, because she already has 250 crvUSD of collateral, both these amounts together will pay off the 1000 crvUSD debt.  Alice then receives back her 0.8 WETH.</p>"},{"location":"lending/how-to-borrow/#how-to-take-out-a-leverage-loan","title":"How to take out a leverage loan","text":"<p>All new lending markets allow users to use leverage.  E.g., the WBTC market below allows up to 11x leverage when borrowing from this lending market.  11x leverage means 10x the deposited amount of WBTC is borrowed as crvUSD and swapped to WBTC using 1inch.</p> <p></p> <p>Info</p> <p>If the market does not display a value in the leverage column, then leverage can still be built up manually by looping.</p> <p>Click on the desired market with leverage, then navigate to the <code>leverage</code> tab next to the <code>create loan</code> tab shown here:</p> <p></p> <p>After navigating to the <code>leverage</code> tab, the following options will be displayed:</p> <p></p> <p>This shows all the information and options to open a leveraged loan.  Notice that the <code>ADD FROM WALLET</code> allows both assets to be added to the loan.  In this market a user could add WBTC, or crvUSD or both.  See the information about depositing a combination of assets for how this works.</p> <p>The <code>BORROW AMOUNT</code> lets the user specify how much they would like to borrow.</p> <p>If <code>Advanced Mode</code> is enabled, then the user can click on the <code>adjust</code> button next to the liquidation range.  This allows a user to change the number of bands <code>N</code> for their liquidation range.  An example of this is shown below with the other loan details:</p> <p></p> <p><code>Leverage</code> is calculated using the following formula:</p> \\[ \\text{Leverage} = \\frac{\\text{value deposited} + \\text{value borrowed}}{\\text{value deposited}}\\] <p>For example if $10,000 crvUSD and $10,000 of WBTC is deposited ($20,000 value total deposited) and the user borrows $80,000 crvUSD, then leverage is 5x.</p> <p><code>Expected</code> and <code>Expected avg. price</code> both relate in this case to how much WBTC is expected to be received after swapping the borrowed crvUSD, and what the expected average price for swapping is.  <code>Expected</code> has collapsible details which shows the route the assets will be swapped through.  These swaps are always provided by 1inch.  An example of these details are provided below and show that 125 crvUSD will be swapped to 0.0019074 WBTC.</p> <p></p> <p><code>Price impact</code> is the difference between the oracle price and the average swap price.</p> <p><code>Band range</code> is the starting and finishing bands of liquidity for the loan, e.g., \"4 to 13\" means the loan will begin soft-liquidation in band 4, and finish in band 13.  <code>Price range</code> shows the <code>Band range</code> but as a price range, e.g., band 4 to 13 could be a price range like 52,994 to 60,607. See here for more information about bands.</p> <p><code>Health</code> is how healthy the loan is, this value must be positive, if it is less than or equal to 0 then the loan can be hard liquidated.  See here for more information about health.</p> <p><code>Borrow APY</code> shows the interest rate before and after the loan is created.  <code>Loan to Value Ratio</code> shows the deposited collateral value compared to the borrowed collateral.</p> <p><code>Estimated TX Cost</code> shows the gas cost in USD.  <code>Slippage tolerance</code> is the maximum slippage allowed when swapping.</p> <p>Before taking out a loan, a screen will appear showing the details of the loan, for example: </p> <p></p> <p>Then the tokens which will be used as collateral need to be approved and then the loan can be taken out by clicking the <code>Get Loan</code> and sending the transaction.</p>"},{"location":"lending/how-to-borrow/#closing-a-leveraged-loan","title":"Closing a leveraged loan","text":"<p>Closing a leveraged loan can be done in 2 ways, either through repaying, or self-liquidating.  The most efficient of these options is to Repay with collateral.  This removes all collateral, swaps it to the same token as the debt, repays the debt and transfers the rest back to the user.  Otherwise the debt needs to be fully repaid to close the loan, and as this is a leveraged loan, the debt may be higher than the user's available assets, making this unviable.</p> <ol> <li> <p>This tab will only show up if a user has a loan and their wallet is connected to the site.\u00a0\u21a9</p> </li> </ol>"},{"location":"lending/how-to-supply/","title":"How to Supply","text":"How to Supply (Lend)"},{"location":"lending/how-to-supply/#supplying-ui","title":"Supplying UI","text":"<p>By choosing the <code>\"SUPPLY\"</code> tab from the main UI, all relevant market information and values for lenders are displayed:</p> <p><code>Supply</code> shows the underlying token of the vault which can be supplied. <code>Lend APY</code> is the current annualized rate for doing so.</p> <p>Additionally, vaults can have gauges, which are eligible to receive CRV emissions once they are added to the GaugeController. These rewards will show up in the <code>Rewards APR / CRV + Incentives</code> column if there are any.  See here for information about what's required to have CRV rewards.</p> <p><code>TVL</code> displays the total value locked into the vault.</p>"},{"location":"lending/how-to-supply/#how-do-supply-vaults-work","title":"How do Supply Vaults work?","text":"<p>Liquidity for borrowers is provided in ERC-4626 vaults. For detailed documentation on how they work, please check out the official Ethereum documentation or visit the technical docs of Curve.</p> <p>These vaults are yield-bearing, meaning there is no need for the user to claim awarded rewards for lending out their assets<sup>1</sup>. The shares they receive for depositing assets into the vault increase in value because the balance of the underlying asset increases due to the dynamics of interest rates.</p>"},{"location":"lending/how-to-supply/#depositing-assets","title":"Depositing Assets","text":"<p>In order to supply tokens to the vault, the user must specify the amount of underlying tokens to add. Underlying tokens are referred to as the asset in the vault, which is the asset that's borrowed. When depositing, the UI previews the amount of shares to receive and projects the lend APY after the deposit. For depositing, there is no cap. Users can deposit as much as they want.</p>"},{"location":"lending/how-to-supply/#staking-assets","title":"Staking Assets","text":"<p>After depositing, if desired, users can stake their vault shares into the corresponding gauge (if there is one) under the <code>\"Stake\"</code> tab.  This allows the user to receive Rewards APR if there is any available.  Click on the <code>Deposit</code> -&gt; <code>Stake</code> tab to deposit your assets.  By staking your supply vault shares you are sending them to the Rewards Gauge, you retain ownership, but they are nontransferable while staked.  Staking requires a transaction.</p> <p>Liquidity gauges of vaults can be added to the GaugeController in order to be eligible to receive CRV emissions or external rewards can be added to the gauge by the deployer.</p>"},{"location":"lending/how-to-supply/#unstaking-assets","title":"Unstaking Assets","text":"<p>Unstaking withdraws your Vault Shares from the Rewards Gauge to your address.  It requires a transaction to unstake.  Unstaking and claiming rewards can be done together in a single transaction.  It can be done from the <code>Withdraw</code> -&gt; <code>Unstake</code> tab of the Supply UI for the lending market you've supplied to.</p> <p>You must <code>Unstake</code> your Vault shares before being able to <code>Withdraw</code>.</p>"},{"location":"lending/how-to-supply/#withdrawing-assets","title":"Withdrawing Assets","text":"<p>If a user already has some shares, they can withdraw a desired amount of the underlying asset under the <code>\"Withdraw\"</code> tab. There is also a \"Withdraw in full\" option, which burns all the user's shares and converts them into the underlying asset<sup>2</sup>. </p> <p>The UI previews the amount of shares to be burned in order to receive the underlying tokens. If a user has staked the vault shares in a gauge, they are required to unstake them under the <code>\"Unstake\"</code> tab before being able to withdraw.</p> <p>Lending Rates when Depositing or Withdrawing Assets</p> <p>When depositing underlying assets into the vault, the lending rate may decrease depending on the amount of assets added. The reason for this is that when supplying additional assets, the market's Utilization Rate will decrease (as there are now more assets to borrow from), which simultaneously decreases the borrow rate. When the borrow rate decreases, the lending rate decreases as well.</p> <p>Vice versa: Withdrawing assets from the vault reduces the total amount of assets. This drives the utilization rate up, which increases the borrow rate and therefore also the lending rate.  </p> <p>See here for more information about Utilization and how it affects lending and borrow rates</p>"},{"location":"lending/how-to-supply/#claiming-rewards","title":"Claiming Rewards","text":"<p>Any rewards from a Rewards APR will be available under the <code>Withdraw</code> -&gt; <code>Claim Rewards</code> tab here:</p> <p>Claiming rewards requires a transaction, however unstaking and claiming together can be done in a single transaction.</p> <p>Having <code>\"Advanced Mode\"</code> enabled adds a full overview of the vault.</p> <p>If a user has shares, the user can view their personal vault information on the <code>\"Your Details\"</code> tab.</p> <ol> <li> <p>This does not apply to rewards awarded from liquidity gauges. They need to be claimed under the <code>\"Withdraw\" -&gt; \"Claim Rewards\"</code> tab.\u00a0\u21a9</p> </li> <li> <p>This method will only work if the vault has enough underlying assets to fully redeem all the shares.\u00a0\u21a9</p> </li> </ol>"},{"location":"lending/leverage/","title":"Leverage","text":"Leverage <p>This section explains how leverage works, if you would like to know how to take out a leverage loan, see How to take out a leverage loan section of the how to borrow page.</p>"},{"location":"lending/leverage/#how-leverage-works","title":"How Leverage Works","text":"<p>Leverage on Curve Lending allows a user to multiply their gains (and losses) by the amount of leverage they desire. For example, if a user is borrowing crvUSD with WETH collateral at 2x leverage, they will make twice as much profit in crvUSD compared to just holding their WETH without leverage (not accounting for borrowing rates).  Let's look at a few quick examples:</p> ETH starting price ETH end price Deposited Collateral Borrowed Collateral Total Collateral Leverage Profit ETH Profit 1000 crvUSD 2000 crvUSD 1 ETH 0 ETH 1 ETH 1x 1000 crvUSD 0 1000 crvUSD 2000 crvUSD 1 ETH 1 ETH 2 ETH 2x 2000 crvUSD 1 ETH 1000 crvUSD 2000 crvUSD 1 ETH 2 ETH 3 ETH 3x 3000 crvUSD 2 ETH <p>Warning</p> <p>Multiplied profits from leverage also means multiplied loses when prices decrease.</p>"},{"location":"lending/leverage/#leverage-looping","title":"Leverage Looping","text":"<p>Anyone can create their own leverage in any lending market, let's see how it can be done:</p> <p> </p> <p>In the above example Alice can create her own leverage by simply continually depositing her WETH, borrowing crvUSD, swapping the borrowed crvUSD back to WETH, and then depositing the new WETH, and borrowing more crvUSD.  This process can be repeated as much as desired, but each time the user will loop less and less as the loan LTV is always less than 100%.</p> <p>If 1 WETH is worth 3,000 crvUSD and the user has borrowed 6,000 crvUSD then that is called 2x leverage.</p>"},{"location":"lending/leverage/#built-in-leverage","title":"Built-in Leverage","text":"<p>Some Curve Lending markets allow leverage without doing the looping strategy mentioned above.  This built-in leverage allows the user to achieve their desired leverage using a single transaction.  Only some lending markets have this functionality, below is a image of the lending UI which shows the WBTC market.  This market allows a leverage of up to 11x.  </p> <p></p> <p>Built-in leverage works and can be used in the following way:</p> <p></p>"},{"location":"lending/leverage/#depositing-a-combination-of-assets","title":"Depositing a combination of assets","text":"<p>Instead of depositing only WETH, Curve Lending also lets Alice deposit crvUSD and WETH together.  If Alice chooses to do this, then any crvUSD she deposits will be added to the borrowed crvUSD and converted to WETH through 1inch before it's all deposited into the lending market, let's look at that quickly below.</p> <p></p> <p>Note: as Alice's total collateral is still worth 3,000 crvUSD (1,500 crvUSD + 0.5 WETH), with 5x leverage she still borrows 12,000 crvUSD (4x her deposited collateral).  Also, the repayments transaction and profit made in this instance work exactly the same as shown in the other image above as all the collateral is converted to WETH even though she deposited WETH and crvUSD together.</p>"},{"location":"lending/overview/","title":"Overview","text":"Curve Lending Overview <p>Curve Lending allows users to borrow crvUSD against any collateral token or to borrow any token against crvUSD, while benefiting from the soft-liquidation mechanism provided by LLAMMA.  This innovative approach to overcollateralized loans enhances risk management and user experience for borrowers.  Additionally, Curve Lending allows users to generate interest through lending (supplying) their assets to be borrowed by others.</p> <p>Collateral in Lending Markets DO NOT back crvUSD</p> <p>The collateral used in Curve Lending markets does not back crvUSD. All crvUSD within Curve Lending is supplied by users.  Conversely, minting new crvUSD requires high-quality crypto collateral approved by the DAO.  The crvUSD minting system is separate from the lending markets. See here for more differences between Curve Lending and minting crvUSD.</p> <p>Curve Lending Risk Disclaimer</p> <p>Full risk disclaimer on using Curve Lending can be found here</p> <ul> <li> <p> Borrowers</p> <p>Borrowers are the ones borrowing assets. To do so, they create a loan and put up some collateral. In exchange for borrowing, they pay a certain Borrow Interest Rate (Borrow APY).</p> <p> How to Borrow</p> </li> <li> <p> Lenders</p> <p>Lenders supply their assets so they can be loaned to borrowers. To do so, they deposit their assets into a Vault. In exchange for supplying their assets, they are awarded a Lending Interest Rate.</p> <p> How to Supply (Lend)</p> </li> </ul>"},{"location":"lending/overview/#overview","title":"Overview","text":"<p>Let's take a look at a single market to see the basics of how it works:</p> <p> </p> <p>Let's breakdown the different entities and their roles in this market:</p> Entity Role Business Llama Business Llama represents the lending market and smart contracts in the system.  This llama uses CRV as collateral, and lends out crvUSD.  Business Llama charges interest on crvUSD users borrow (Borrow APY), and pays interest to lenders who supply crvUSD (Lend APY). Bob Bob always thinks the market will crash, so he supplies his crvUSD and Business Llama lends it out and pays Bob interest (Lend APY). Alice Alice wants to go trade meme coins but doesn't want to sell her CRV, so she deposits CRV and uses it as collateral to borrow crvUSD.  She feels safe knowing she's better protected here with LLAMMA and soft-liquidations than other lending markets.  She is charged the Borrow APY on her debt while the loan is open. Charlie &amp; Daisy Charlie and Daisy are just talking to the wrong Business Llama (lending market).  All Curve Lending Markets are one-way, and isolated. They need to go and find the Business Llama that lends out CRV with crvUSD collateral. (Business llama with the red background here)"},{"location":"lending/overview/#markets","title":"Markets","text":"<p>There are many Curve Lending markets listed on the main UI.  Each market uses a single type of collateral, and make loans in a single asset (all markets are one-way, and all markets are isolated).  Some of the markets available are pictured below (we've used llamas in suits to illustrate different markets), but there are many more available, and new markets can be permissionlessly deployed by anyone, at anytime (as long as the asset has a suitable price oracle).  </p> <p></p> <p>Note: All markets are paired with crvUSD. crvUSD must be either the collateral or the coin being borrowed.</p>"},{"location":"lending/overview/#supplying-lending","title":"Supplying (Lending)","text":"<p>Earning interest for supplying assets to Curve Lending is simple.</p> <p>Let's have a look at an example where Bob lends his crvUSD for a year and how much he earns:</p> <p> </p> <p>So after 1 year Bob earned 20 crvUSD and $20 worth of CRV, this equates to an APR of 40% over that year.</p>"},{"location":"lending/overview/#depositing-and-withdrawing","title":"Depositing and Withdrawing","text":"<p>After depositing to a lending market your assets are added to the pool of available supply.</p> <p>You can withdraw a supplied asset provided there are sufficient available (un-borrowed) assets in the market. For example in the below image Bob could have withdrawn up to 1200 crvUSD from the market, but he only withdrew 300 crvUSD.  </p> <p> </p> <p>If there are insufficient available assets for a full withdrawal, you can withdraw the maximum amount currently available. The high utilization rate will cause Borrow APY and Lend APYs to increase, incentivizing borrowers to repay their loans, and more lenders to supply. As available supply increases you can withdraw your remaining balance over time.</p> <p>Bad Debt</p> <p>Bad debt is rare, but if it exists within a lending market, it may be impossible to withdraw supplied assets, as it locks supplied assets as \"borrowed\" indefinitely.  It is recommended not to supply assets to markets with large amounts of bad debt.  Use this notebook or see the code on github here to find which markets have bad debt.  </p> <p>At the time of writing (May, 2024) no bad debt exists on Ethereum markets. On Arbitrum, two markets have bad debt - CRV/crvUSD: 1700 crvUSD bad debt, FXN/crvUSD: 39,000 crvUSD bad debt.</p>"},{"location":"lending/overview/#supply-vault-share-tokens","title":"Supply Vault Share Tokens","text":"<p>By Supplying assets on Curve Lending, you are given Supply Vault Shares (more info here).  These are tokens representing your share of the total supply.  The value of these shares increases by Lend APY.</p> <p>When you withdraw your supplied assets, the Vault Shares you had previously deposited are returned to the Lending Market. At this point, you receive the current value of the Vault Shares you are returning. This is how your interest on the supplied assets accrues. By withdrawing your assets, you effectively claim the interest that has been earned on your initial deposit during the time it was being lent out in the market.</p>"},{"location":"lending/overview/#rewards-apr","title":"Rewards APR","text":"<p>Rewards APR is a combination of CRV emission rewards and any other incentives provided to suppliers. Rewards accrue altogether and can be claimed at any time.</p> <p>Rewards APR is ONLY given to Suppliers STAKED in the Liquidity Gauge</p> <p>You MUST stake your Supply Vault Shares in the Lending Market's Liquidity Gauge to receive Reward APR. You will not get any Rewards APR if you DO NOT stake.  See here</p> <p>For a market to have CRV rewards the following conditions must be met:</p> <ol> <li>The Curve DAO must vote to add a Liquidity Gauge to the <code>GaugeController</code> for that specific lending market</li> <li>The liquidity gauge must receive a positive gauge weight through votes from veCRV holders. This will result in CRV being emitted to the liquidity gauge.</li> </ol> <p>Due to the boosting mechanism of liquidity gauges, the Reward APR will be displayed as a range based on the user's boost factor. Learn more about boosting here.</p> <p>Other incentives can be added by anyone, i.e., if a project wants to incentivize their token being used as collateral they may add incentives to a Lending Market. See here for more details and how to add them.</p>"},{"location":"lending/overview/#borrowing","title":"Borrowing","text":"<p>When borrowing from Curve Lending Markets, you are taking an overcollateralized loan against deposited assets (e.g., borrowing crvUSD with CRV collateral). In exchange, you are charged the Borrow APY on the borrowed assets.</p> <p>Collateral is deposited into each lending market's LLAMMA system and split evenly across the chosen number of bands (N).  Each band represents a small liquidation price range, with an upper and lower limit.  If the oracle price enters one of your bands, soft-liquidation begins.  Your loan is safe while the oracle price is higher than any of your bands.  </p> <p>See the image below for a breakdown of how supplied assets are borrowed, and how collateral is deposited into bands.</p> <p> </p> <p>By minimizing the number of bands (N=4), you can maximize the amount you borrow (LTV), just like Charlie. Alice, however, prefers spreading his liquidity, so he chooses 10 bands (N=10) and does not maximize his borrowing. This explains why Charlie's loan is split into bands 3-12, while Alice's is split into bands 1-4. When you borrow, you can choose to split your collateral into any number of bands from 4 to 50.</p> <p>There is no set rule for whether fewer or more bands are better. Different numbers of bands are better in different scenarios:</p> <ul> <li>More bands equate to having fewer losses in soft-liquidation, but this also widens your Liquidation Range, potentially extending the duration of soft-liquidation.</li> <li>Fewer bands will narrow your Liquidation Range, causing your collateral to be traded more aggressively, but you may remain in the Liquidation Range for a shorter time.</li> </ul>"},{"location":"lending/overview/#soft-liquidation","title":"Soft-liquidation","text":"<p>Soft-liquidation is a mechanism that gradually exchanges collateral (e.g., WETH) for the borrowed asset (e.g., crvUSD) as the collateral's value declines, avoiding the need for a single large liquidation. It also reverses this process if the collateral's value rises. The system sells collateral at a small discount, which increases with market volatility. Users undergoing soft-liquidation experience minor losses over time (in crvUSD minting markets typical losses are &lt;0.1% per day), though this can vary based on loan and market conditions.</p> <p>Soft-liquidation begins if the oracle price of your collateral falls into one of your bands. At this point, your collateral will be linearly traded for your borrowed asset as the price continues to drop through each band.</p> <p>Let's examine what soft-liquidation looks like in a simplified example with a single band in an ETH/crvUSD LLAMMA market. This example illustrates that if the price declines by 20% within the band, 20% of the ETH is converted to crvUSD. When the price is below the lower bound of the band (&lt;$990), all the collateral is converted to crvUSD (100% crvUSD, 0% ETH). Conversely, when the price exceeds the upper bound (&gt;$1000), all collateral remains as ETH (100% ETH, 0% crvUSD).</p> <p> </p> <p>The below image represents multiple bands through soft-liquidation.  Note the higher bands than the current price are fully converted to crvUSD and the lower bands are still ETH.</p> <p> </p> <p>The value of traded assets remains as loan collateral throughout soft-liquidation. For example, if ETH is swapped for crvUSD, the value of that crvUSD is added to the collateral backing the loan. Additionally, LLAMMA works both ways; if prices increase through your bands, any swapped collateral will be traded back for your initial collateral (e.g., ETH swapped to crvUSD as the price decreased will be swapped back to ETH as the price increases).</p> <p>Rebalancing collateral through soft-liquidation is incentivized for arbitrage traders by offering a small discount (when required) to buy or sell through LLAMMA. Trading back and forth your collateral is the reason why your health factor erodes over time during soft-liquidation. Higher volatility generally leads to greater losses. However, your losses are partly recouped by the earned trading fees for providing liquidity.</p> <p>Collateral CANNOT be deposited while in soft-liquidation</p> <p>Collateral cannot be deposited during soft-liquidation. Only debt repayment is allowed.</p>"},{"location":"lending/overview/#health-hard-liquidation","title":"Health &amp; Hard-Liquidation","text":"<p>Loan Health is a measure of debt to collateral value.  As long as health is positive, the position remains open. The health of a loan decreases due to losses in soft-liquidation and when debt increases due to interest paid.</p> <p>Soft-liquidation losses do not only occur when prices go down but also when the collateral price rises again. This implies that the health of a loan can decrease even though the collateral value of the position increases.</p> <p>A loan becomes eligible for hard-liquidation when its health drops below 0. In this process, an external party can repay the user's debt and claim their collateral in return, closing the loan. Going below the soft-liquidation range does not trigger a hard-liquidation. The key trigger is the health falling below 0.</p> <p>It's possible for a loan to be below the soft-liquidation range, and have all its collateral converted to the borrowed asset (e.g., all CRV to crvUSD) while still maintaining a positive health.  In this scenario, further price drops don't impact the position, as the converted collateral covers both the debt and safety buffer.</p> <p>In contrast, most other lending platforms will hard-liquidate your collateral and terminate your loan if your loan falls below a minimum collateral ratio (LTV), even if only by a small amount for a brief time. This can be highly stressful for borrowers and lead to significant losses. Curve Lending offers a safer space and more peace of mind for borrowers.</p>"},{"location":"lending/overview/#leverage","title":"Leverage","text":"<p>All new lending markets allow leverage.  This allows users to multiply their gains (and losses) by the amount of leverage they desire.  In a WETH/crvUSD market for example, this would allow the user to borrow up to 9x the amount of collateral they deposit.  The caveat is that the user doesn't receive the borrowed crvUSD into their wallet, it is swapped for more WETH through 1inch and deposited into the lending market.  To see how leverage works please see the dedicated leverage page.</p>"},{"location":"lending/overview/#utilization-lend-apy-and-borrow-apy","title":"Utilization, Lend APY and Borrow APY","text":"<p>The Lend APY and Borrow APY are affected by the Utilization of the market.  It is the ratio of assets supplied, to assets borrowed. In the image below the Utilization is 80% as 80% of the Supply is borrowed. Higher Utilization means a higher Lending APY and Borrowing APY.</p> <p> </p>"},{"location":"lending/overview/#utilization-rate","title":"Utilization Rate","text":"<p>The formula for Utilization is the following:</p> \\[\\text{Utilization} = \\frac{\\text{Total assets borrowed}}{\\text{Total assets supplied}}\\]"},{"location":"lending/overview/#borrow-rate","title":"Borrow Rate","text":"<p>The borrow APR is the rate a borrower pays for borrowing out assets.  In the Curve UI this is quoted as an APY not an APR, see the info box below for the conversion formula and difference.</p> <p>Borrowing rates are calculated differently based on whether the collateral asset has a crvUSD minting market.</p>"},{"location":"lending/overview/#borrow-rate-for-assets-with-a-crvusd-minting-market","title":"Borrow Rate for assets with a crvUSD Minting Market","text":"<p>Assets with minting markets currently are: ETH (=WETH in lending markets), WBTC, wstETH, sfrxETH, tBTC.  For these assets, the borrowing rates on Curve Lend depend on two factors: the borrow rate for minting crvUSD and the utilization of the lending pool.  The technical documentation shows the borrowing rate formula here.  To decide whether to mint crvUSD or borrow from the lending market, consider the following:</p> <ul> <li>Lending market utilization below 85% -&gt; Borrowing rate will be lower on the Lending Market</li> <li>Lending market utilization above 85% -&gt; Borrowing rate will be lower on the crvUSD Minting Market</li> <li>Lending market utilization equals 85% -&gt; Borrowing rates will be equal</li> </ul>"},{"location":"lending/overview/#borrow-rate-for-all-other-assets","title":"Borrow Rate for all other Assets","text":"<p>The formula for the borrow rate if the collateral asset does not have a minting market (e.g., CRV, pufETH, sUSDe, etc) is as follows:</p> \\[\\text{rate} = \\text{rate}_{\\text{min}} \\cdot \\left(\\frac{\\text{rate}_{\\text{max}}}{\\text{rate}_{\\text{min}}}\\right)^{\\text{utilization}}\\] \\[\\text{borrowAPR} = \\text{rate} \\cdot (365 \\cdot 86400)\\] <p>\\(\\text{rate}_{\\text{min}}\\) and \\(\\text{rate}_{\\text{max}}\\) values are obtained from the monetary policy contract of each Lending Market and are given in interest per second.  We multiply the rate by \\(365 \\cdot 86400\\) to get the APR because this is the amount of seconds in a year (\\(365\\) days \\(\\times 86400\\) seconds in a day).</p>"},{"location":"lending/overview/#lend-rate","title":"Lend Rate","text":"<p>Lend APR is the yield a lender receives in exchange for lending out their assets.  The lend APR is calculated the same way for all lending markets.</p> <p>Formula to calculate the Lend APR:</p> \\[\\text{lendAPR} = \\text{borrowAPR} \\cdot \\text{utilization}\\] <p>Difference between <code>APR</code> and <code>APY</code></p> <ul> <li><code>APR</code> represents the Annual Percentage Rate (interest without compounding)</li> <li><code>APY</code> is the Annual Percentage Yield (interest with compounding)</li> </ul> <p>To convert the APR into APY, we need to annualize it and compound it every second (86400 seconds in a day):</p> \\[\\text{APY} = \\left(1 + \\frac{APR}{86400 \\cdot 365}\\right)^{86400 \\cdot 365} - 1\\] <p>For the current CRV Lending Market the Borrow APR and Lend APR for different Utilization rates is the following:</p>"},{"location":"lending/overview/#more-information","title":"More Information","text":"<p>For information relating to opening loans see the loan creation page</p> <p>For information relating to how to supply assets see supplying assets page</p> <p>For Frequently Asked Questions about Curve Lending see the FAQ here</p> <p>For more technical information especially relating to the underlying smart contracts please see the Lending section within the Curve Docs</p>"},{"location":"lp/calculating-yield/","title":"Calculating yield","text":"<p>Explanation of how the Curve UI displays yield calculations</p> <p>Warning</p> <p>This page is outdated and will be updated soon.  Much of this information has changed.  If you need up to date information please check the new Technical Documentation or ask in the Curve Telegram.  There are some links here to the old Technical Documentation, documentation there is also outdated.</p> <p>Like all documentation within this guide, this article is intended to be detailed but non-technical, outside of a few light mathematical formulas. While we highlight specific smart contract function names that the Curve UI may reference for convenience, no knowledge of coding is otherwise necessary to understand this article.</p>"},{"location":"lp/calculating-yield/#types-of-yield","title":"Types of Yield","text":"<p>Curve UI displaying different types of displayed Curve yield (tAPY and tAPR).</p> <p>In the above screenshot you can see a Curve pool has the potential to offer many different types of yield. The documentation provides an overview of the different types of yield here:</p> <p>Understanding CRV</p> <p>It\u2019s important to remember that these numbers are a projections of historical pool performance. The user would get this rate if the pool performance stays exactly the same for one year.</p> <p>These yield types are:</p> <ul> <li>Base vAPY: Shown on the first line, this number represents the fees that accrue to holders of the LP token based on trading volume. More Info\u200b</li> <li>$CRV Rewards tAPR: Shown on the second line, the rewards tAPR represents the rate of $CRV token emissions one would have earned if the pool has a rewards gauge and the user stakes into this rewards gauge. The number is listed as a range of possible rewards, based on the user\u2019s locked veCRV the size of this boost can vary. More Info\u200b</li> <li>Incentives Rewards tAPR: Some pools also choose to stream rewards in the form of a different token \u2014 this is represented on the third line if applicable.</li> </ul> <p><code>vAPY</code> stands for \u201cvariable annual percentage yield\u201d, this value calculates an annualized estimate of the trading fee yield based on the past day\u2019s trading activity, inclusive of any effect of compounding.</p> <p>The rewards <code>tAPR</code> stands for \u201ctoken annual percentage rate\u201d \u2014 token rewards must be claimed manually and therefore do not automatically compound, so \u201crate\u201d is the more proper term.</p>"},{"location":"lp/calculating-yield/#base-vapy","title":"Base vAPY","text":"<p>When Curve pools are launched, they receive a value for both the <code>fee</code> (the overall fee applied to trades) and the <code>admin_fee</code> (the percentage of this fee that goes to the Curve DAO as opposed to pool LPs). These parameters are directly viewable on the smart contract through the corresponding function names.</p> <p>These fees are displayed on the Curve UI pool page:</p> <p></p> <p>These parameters may also be updated in the future by the Curve DAO by calling the <code>commit_new_fee</code> method. If the fees are in the process of being changed, these are readable in the smart contract via the <code>future_fee</code> and <code>future_admin_fee</code> methods.</p> <p>The fees are specifically earned or charged every time a user interacts with a pool contract through a transaction which may affect the pool balances. For example, directly calling the <code>exchange</code> function would rebalance the pool, so a fee clearly applies. If you add or remove liquidity in an imbalanced fashion, this would also adjust the ratios of tokens within the pool and thus be subject to fees. No fees are charged if a user adds coin in a balanced proportion or on removal.</p> <p>When you call methods to preview how many tokens you might receive for interacting with a pool (ie <code>get_dy</code> or <code>calc_token_amount</code>) the values they return are usually but not always inclusive of any fees \u2014 the UI calculations are intended to make any corrections where appropriate, but be sure to ask the support team if you have questions.</p> <p>Theoretically, one could calculate the base vAPY for any period by calculating the fees for every transaction and summing over the entire range. However, the Curve UI utilizes a simpler methodology to calculate the base vAPY, where <code>t</code> is the time in days:</p> \\[\\left( \\frac{\\text{virtual_price}(t=0)}{\\text{virtual_price}(t=-1)} \\right)^{365} - 1\\] <p>In other words, the vAPY measures the change in the pool\u2019s \"virtual price\" between today and yesterday, then annualizes this rate. The \"virtual price\" is a measure of the pool growth over time, and is viewable directly on the UI.</p> <p></p> <p>The UI receives this value directly by calling the <code>get_virtual_price</code> method on the pool contract.</p> <p>Every time a transaction occurs that charges a fee, the virtual price is incremented accordingly. Thus, when a pool launches with a virtual price of exactly 1, if the pool\u2019s virtual price is 1.01 at some future time, an LP holding a token has seen the token\u2019s value increase by 1%.</p> \\[\\frac{1.01}{1.00} - 1 = 0.01 = 1\\%\\] <p>A virtual price of 1.01 means an LP will get 1% more value back on removing liquidity. Similarly, new users adding liquidity will receive 1% fewer LP tokens on deposit.</p> <p>For pegged stablecoin pools, virtual price can easily be utilized to calculate vAPY of the pool since inception with no further calculations necessary. For v2 pools, one must also consider the fluctuating prices of underlying assets.</p> <p>For developers, here are more details about trade fees from the technical documentation:</p> <ul> <li>\u200bAbout Trade Fees\u200b</li> <li>\u200bClaiming Admin Fees\u200b</li> <li>\u200bFee Distribution\u200b</li> </ul>"},{"location":"lp/calculating-yield/#crv-rewards-tapr","title":"CRV Rewards tAPR","text":"<p>The Curve DAO also authorizes some pools to receive bonus rewards from $CRV token emission, as described in the Understanding Gauges section of the documentation. If the pool has an eligible gauge, then the UI displays the range of possible tAPR values users are earning at present, subject to change in the future.</p> <p>The formula used here to calculate rewards tAPR:</p> \\[tAPR = \\frac{\\text{crv_price} \\times \\text{inflation_rate} \\times \\text{relative_weight} \\times 12614400}{\\text{working_supply} \\times \\text{asset_price} \\times \\text{virtual_price}}\\] <p>These parameters are obtained from various data sources, mostly on-chain:</p> <ul> <li><code>crv_price:</code> The current price of the $CRV token in USD. This could be extrapolated from on-chain data, but the UI relies on the CoinGecko API to fetch this value.</li> <li><code>inflation_rate:</code> The inflation rate of the $CRV token, accessed from the <code>rate</code> function of the $CRV token.</li> <li><code>relative_weight:</code> Based on weekly voting, each Curve pool rewards gauge has a weighting relative to all other Curve gauges. This value can be calculated by calling the same function on the Curve gauge controller contract.</li> </ul> <p></p> <p>\u200bhttps://dao.curve.fi/\u200b</p> <ul> <li><code>working_supply:</code> Accessed by calling the same function on the specific Curve gauge contract for the pool.</li> <li><code>asset_price:</code> The price of the asset \u2014 that is, if the pool contains only bitcoin, you would use the current price of $BTC. For v2 pools, this must be calculated by averaging over the specific assets within the pool.</li> <li><code>virtual_price:</code> The measure of the pool growth over time, as described above.</li> </ul> <p>The magic number <code>12614400</code> is number of seconds in a year <code>(60 * 60 * 24 * 365 = 31536000)</code> times 0.4. In this case the 0.4 is due to the effect of boosts (minimum boost of 1 / maximum boost of 2.5 = 0.4).</p> <p>As shown in the UI, all tAPR values are displayed as a range, with the base rate on the left of the arrow representing the default rate one would receive if the user has no boost, and the value on the right of the arrow representing the maximum value a user could receive if the user has the maximum boost, which is 2.5 times higher than the minimum boost. Further details about calculating boosts are provided here.</p> <p>For developers, here are relevant links to the technical documentation:</p> <ul> <li>\u200bAbout Liquidity Gauges\u200b</li> <li>\u200bGauge Controller\u200b</li> <li>\u200bGauges for EVM Sidechains\u200b</li> <li>\u200bGauge Proxy\u200b</li> </ul>"},{"location":"lp/calculating-yield/#incentives-tapr","title":"Incentives tAPR","text":"<p>All pools may permissionlessly stream other token rewards without approval from the Curve DAO. The UI displays these bonus rewards only when applicable. In the example of stETH below, note how the pool is streaming $LDO tokens in addition to $CRV rewards.</p> <p></p> <p>\u200bPool Overview Page\u200b</p> <p></p> <p>\u200bstETH Pool Page\u200b</p> <p>Further information on these extra incentives is available in the developer documentation.</p>"},{"location":"lp/charts_poolactivity/","title":"Charts and Pool Activity","text":"<p>The Curve UI offers a variety of charts related to token prices, as well as an overview of exchanges and liquidity activities (such as adding or removing liquidity) for each pool.\"</p> <p>Info</p> <p>Chart and Pool Activity information is currently only available for pools on ethereum mainnet.</p>"},{"location":"lp/charts_poolactivity/#charts","title":"Charts","text":"<p>LP tokens are tokens received upon depositing assets into a liquidity pool. These tokens represent the holder's share of the pool and can be redeemed for a portion of the funds, plus any fees accrued over time. Similar to other tokens, their value is contingent on the prices of the underlying assets in the liquidity pool.</p> <p>Navigating to the <code>Chart</code> tab reveals a graphical interface of the LP Token price in relation to, for example, USDT. In the top right corner, options are available to expand/minimize or refresh the chart, as well as to adjust its timeframe.</p> <p> </p> <p>Clicking on <code>LP Token Price (USDT)</code> reveals a drop-down menu with additional charts.</p> <p> </p>"},{"location":"lp/charts_poolactivity/#pool-activity","title":"Pool Activity","text":"<p>Besides a chart for prices, the UI also provides an overview of swaps and liquidity actions for the pool under the <code>Pool Activity</code> tab. </p> <p>On the <code>Swaps</code> tab, the interface shows the tokens swapped and the time of each transaction, indicating how many hours or minutes ago it occurred. Clicking on a specific swap will redirect the user to the transaction on Etherscan.</p> <p> </p> <p>Navigating to the <code>Liquidity</code> tab to display deposits and withdrawals in the pool.</p> <p> </p>"},{"location":"lp/deposit-faqs/","title":"Deposit FAQ","text":""},{"location":"lp/deposit-faqs/#what-is-the-deposit-wrapped-option","title":"What is the \u201cdeposit wrapped\u201d option?","text":"<p>(This applies to metapools or pools with c-tokens or a-tokens). If you deposit a stablecoin to one of the pools with lending, Curve will automatically wrap your token to a cToken (for Compound) or aToken (for AAVE). The option is simply there if you have already previously lent them on Compound or AAVE. If your stablecoin is in its original form, you can ignore this option. If you deposit into metapools and you have the corresponding basepool token (for example, 3Crv), you can also use the \"deposit wrapped\" option to deposit this token.</p> <p> </p>"},{"location":"lp/deposit-faqs/#what-happens-when-you-provide-liquidity-on-curve","title":"What happens when you provide liquidity on Curve?","text":"<p>When you go to the deposit page and deposit one stablecoin, it then gets split between each token in the pool. That\u2019s something you have to keep in mind because if you were to deposit 1000 DAI in the Pool, as per the screenshot below, your balance would be roughly equal to 390.7 GUSD, 120 DAI, 119.8 USDC and 362.6 USDT. Those values change constantly as people trade and arb the price of stable coins.</p> <p> </p>"},{"location":"lp/deposit-faqs/#does-the-coin-i-deposit-matter","title":"Does the coin I deposit matter?","text":"<p>Besides the deposit bonus explained below, it doesn\u2019t matter. Your tokens will get split into the pool and it doesn\u2019t affect your returns so you can deposit one, some or all the coins into the pool without worrying about it affecting your returns.</p>"},{"location":"lp/deposit-faqs/#understanding-deposit-bonuses","title":"Understanding deposit bonuses","text":"<p>On the screenshot above, you can see GUSD is quite low as it should make up 50% of the total pool because it's a metapool paired against 3crv. So if your plan was to join the gusd-pool, you would ideally deposit GUSD into it.  As you can see on the screenshot, you would get an instant 0.0082% bonus for depositing GUSD into the pool.</p> <p>The main reason for this is that GUSD is currently slightly more expensive so if you went to a centralized exchange you might sell it for $1.007 instead of $1. The deposit bonus reflects that.</p> <p>The other reason behind this is that the pools are always trying to balance themselves and go back to equal parts (in this case 50% GUSD) so depositing the coin with the lowest share will get you a deposit bonus.</p> <p> </p>"},{"location":"lp/deposit-faqs/#but-does-that-mean-i-can-still-withdraw-in-my-favorite-stable-coin","title":"But does that mean I can still withdraw in my favorite stable coin?","text":"<p>When you withdraw, the same principle as in the question above applies- but reversed. If you withdraw the stable coin with the biggest share, you would get a bonus but you still choose what stable coin you want to withdraw.</p>"},{"location":"lp/deposit-faqs/#how-quickly-does-interest-accruecompound","title":"How quickly does interest accrue/compound?","text":"<p>Interests for pools using lending protocols compound every block or 15 seconds or immediately after fees are paid. It\u2019s also compounded automatically.</p>"},{"location":"lp/deposit-faqs/#what-is-arbitrage","title":"What is arbitrage?","text":"<p>Arbitrage is the simultaneous buying and selling of, in our case, a token to make a profit. Because cryptocurrency markets can often lack liquidity, there are often opportunities for traders to take advantage of price discrepancies to make a profit which can be helped by protocols like Curve.</p> <p>An example transaction: \u200bEtherscan\u200b</p> <p>In this transaction, someone used Curve and OasisDex and made around $200. This goes back to what was discussed earlier with liquidity pools. The idea is that is you incentivize traders to take advantage of price discrepancies which we all get rewarded for.</p>"},{"location":"lp/deposit-faqs/#what-are-incentivized-pools","title":"What are incentivized pools?","text":"<p>Liquidity pools (particularly one without an opportunity cost) are a great way to help stable coins keep their pegs. It makes easy for traders to arb (see question above) when the price slips off the peg which is very important for all the companies and foundations developing stable coins as having a $0.98 stablecoin is never a good look.</p> <p>As a result, some pools on Curve are \u201cincentivized\u201d. That means that on top of trading fees and lending fees, the companies will give rewards to people providing liquidity to the pools with their coins.</p> <p></p>"},{"location":"lp/deposit-faqs/#what-makes-the-incentives-apr-move","title":"What makes the incentives APR move?","text":"<p>The steth pool in this screenshot earns another 2.69% of LDO per year and there are three variables that can make this change:</p> <ul> <li>The LDO distributed is based on the number of people staking their LP tokens, which means your share of rewards gets lower if more people start staking</li> <li>The price of LDO (price of LDO going up would make the yearly bonus go up)</li> <li>The size of weekly rewards (48,000 SNX as of today) could also be lowered as Lido reevaluates its partnership with Curve</li> </ul>"},{"location":"lp/overview/","title":"Overview","text":"Pools Overview <p>If you are new to Ethereum or DeFi, liquidity pools are a seemingly complicated concept to understand.  </p> <p>Pools hold multiple assets, allowing users to swap between them. Liquidity providers who deposit assets earn fees from these swaps.</p> <p>In Curve, pools can be 2 different types, these are:</p> <ul> <li>Stableswap Pools for coins that are pegged to each other, for example USDC and USDT, or stETH and ETH.  </li> <li>Cryptoswap Pools which are for assets which fluctuate in value against each other, for example USDT and ETH, or CRV and ETH.</li> </ul> <p>It\u2019s important to understand that when you provide liquidity to a pool, no matter what coin you deposit, you essentially gain exposure to all the coins in the pool which means you want to find a pool with coins you are comfortable holding.</p> <p>Liquidity Pool Risks</p> <p>Before using liquidity pools, it's advisable to review our risk disclaimer page for a comprehensive overview of potential risks.</p>"},{"location":"lp/overview/#stableswap-curve-v1","title":"Stableswap (Curve V1)","text":"<p>Stableswap pools have assets pegged to each other.  For example USDC and USDT, as their value should always be close to a 1:1 ratio.</p> <p>Let's look at an example about how it works for a liquidity provider:</p> <p> </p> <p>Note: Alice can deposit/withdraw any combination of assets/amounts, but pays a small fee for unbalanced actions (e.g., USDC-only deposit).</p>"},{"location":"lp/overview/#cryptoswap-curve-v2","title":"Cryptoswap (Curve V2)","text":"<p>Cryptoswap pools contain unpaired assets like USDC and ETH, whose relative values fluctuate. This necessitates a different pool design than Stableswap.</p> <p>Cryptoswap pools maintain an equal value balance between their assets. For example, $1,000,000 in USDC would be matched by $1,000,000 worth of ETH.</p> <p>Let's look at an example about how it works for a liquidity provider:</p> <p> </p> <p>Note: Bob can deposit/withdraw any combination of assets/amounts, but pays a small fee for unbalanced actions (e.g., ETH-only deposit).</p>"},{"location":"lp/overview/#pool-fees","title":"Pool Fees","text":"<p>Pool fees are specific to each pool, they typically range from 0.01%-0.04%.  They are shown under the <code>pool details</code> tab on the pool's page.   All new pools also have dynamic fees, so in times of high volatility, fees earned by the pools increase.</p> <p>50% of the pool fees go to the Liquidity Providers increasing the value of LP tokens, and 50% to DAO (veCRV holders).</p> <p>Balanced deposits and withdrawals are free. Unbalanced actions incur a small fee (max 50% of swap fee). This prevents free swaps via deposit/withdraw cycles. Note: \"Balanced\" means equal asset values in Cryptoswap pools, but matches current ratios in Stableswap pools.</p>"},{"location":"lp/overview/#rewards-yield","title":"Rewards &amp; Yield","text":"<p>Liquidity providers are rewarded with 2 different types of yield:</p> <ul> <li>Base vAPY: This is how much the LP token value is increasing due to accruing pool fees.</li> <li>Rewards tAPR: These are CRV inflation rewards, other token incentives, and points. Staking LP tokens is required to earn CRV and other token rewards, which accrue through the pool's gauge. Points programs are project-specific; many don't require LP token staking. Refer to each project's point program for the most accurate information.</li> </ul> <p> </p> <p>Some pools include yield-bearing tokens like sUSDe and sDAI. All yield from these tokens goes directly to Liquidity Providers, none is taken away by fees or the pool.</p>"},{"location":"lp/depositing/depositing-into-a-cryptoswap-pool/","title":"Depositing into a cryptoswap-pool","text":"<p>Cryptoswap pools contain two volatile assets and are designed to offer deep liquidity for a wide variety of assets with different levels of volatility.</p> <p>Learn more about v2 pools</p> <p>For instance, the CVX/ETH pool is used in the examples below.</p>"},{"location":"lp/depositing/depositing-into-a-cryptoswap-pool/#depositing-into-the-pool","title":"Depositing into the pool","text":"<p>Visit the deposit page (https://curve.fi/#/ethereum/pools/cvxeth/deposit). You will need at least one of the two tokens in the pool to deposit. CVX/ETH-pool consists of CVX and ETH.</p> <p> </p> <p>First, it's important to understand that you don't have to deposit both coins, you can deposit one or both of the coins in the pool and it won't affect your returns. Depositing the coin with the smallest share in the pool will result in a small positive price impact. Since crypto pools have a rebalancing mechanism, the balances of the pool should be relatively equal.</p> <p>Second, once you deposit one coin, it gets split over the two different coins in the pool which means you now have exposure to all of them. The first checkbox (Add all coins in a balanced proportion) allows you to deposit both coins in the same proportion they currently are in the pool, resulting in no price impact.</p> <p>The second checkbox (Deposit Wrapped) allows users to deposit wrapped ETH (wETH) instead of plain ETH.</p>"},{"location":"lp/depositing/depositing-into-a-cryptoswap-pool/#confirming-and-staking","title":"Confirming and staking","text":"<p>You will then be asked to approve the Curve Finance contract, follow by a deposit transaction which will deposit your into the pool. This transaction can be expensive so you ideally want to wait for gas to be fairly cheap if this will impact the size of your deposit.</p> <p>After depositing in the pool, you receive liquidity provider (LP) tokens. They represent your share of ownership in the pool and you will need them to stake for CRV.</p> <p>After depositing, you will be prompted with a new transaction that will deposit your LP tokens in the DAO liquidity gauge. Confirming the transaction will let you mine CRV. This second transaction will only pop up if you deposited your tokens under the \"Deposit and stake\" tab. Otherwise it will just deposit the tokens in the pool.</p> <p>If you already have LP tokens, you can also directly stake them into the gauge under the 'Stake' tab.</p> <p>Once that's done, you're providing liquidity and staking so all that's left to do is wait for your trading fees to accrue.</p> <p>You can click the link below to learn how to boost your CRV rewards by locking CRV on the Curve DAO:</p> <ul> <li>Boosting your CRV Rewards</li> <li>Staking your $CRV</li> </ul>"},{"location":"lp/depositing/depositing-into-a-metapool/","title":"Depositing into a metapool","text":"<p>Metapools is a old concept to Curve Finance, it allows a single coin to be pooled with all the coins in another (base) pool without diluting its liquidity. Currently, the most common base pool is the 3Pool. It uses the three most liquid stable coins (USDT-USDC-DAI).</p>"},{"location":"lp/depositing/depositing-into-a-metapool/#depositing","title":"Depositing","text":"<p>Metapools offer several options for deposits. For example, in the GUSD/3Pool Metapool you can deposit the following:</p> <ul> <li>GUSD</li> <li>Any of the 3Pool (DAI-USDC-USDT)</li> <li>3Pool LP token (3crv)</li> </ul> <p></p> <p>When becoming a liquidity provider, you don't have to deposit all the coins, you can deposit one or several of the coins in the pool and it won't affect your returns. Depositing the coin with the smallest share in the pool will result in a small deposit bonus.</p> <p>Second, once you deposit one stable coin, it gets split over the four different coins in the pool which means you now have exposure to all of them. The first checkbox (Add all coins in a balanced proportion) allows you to deposit all four coins in the same proportion they currently are in the pool, resulting in no slippage occurrence.</p> <p>The deposit wrapped option lets you deposit the base pool token (usually 3Pool).</p> <p></p> <p>When depositing coins into a metapool, and thus having exposure to a base pool token (e.g., 3CRV) and its paired token, you will earn at the rate of the metapool gauge. However, you'll receive trading fees from both the base and metapool.</p>"},{"location":"lp/depositing/depositing-into-a-metapool/#confirming-and-staking","title":"Confirming and staking","text":"<p>You will then be asked to approve the Curve Finance contract, follow by a deposit transaction which will wrap your stable coins and deposit them into the pool. This transaction can be expensive so you ideally want to wait for gas to be fairly cheap if this will impact the size of your deposit.</p> <p>After depositing in the pool, you receive liquidity provider (LP) tokens. They represent your share of ownership in the pool and you will need them to stake for CRV.</p> <p>After depositing, you will be prompted with a new transaction that will deposit your LP tokens in the DAO liquidity gauge. Confirming the transaction will let you mine CRV. This second transaction will only pop up if you deposited your tokens under the \"Deposit and stake\" tab. Otherwise it will just deposit the tokens in the pool.</p> <p>If you already have LP tokens, you can also directly stake them into the gauge under the 'Stake' tab.</p> <p>Once that's done, you're providing liquidity and staking so all that's left to do is wait for your trading fees to accrue.</p> <p>You can click the link below to learn how to boost your CRV rewards by locking CRV on the Curve DAO:</p> <ul> <li>Boosting your CRV Rewards</li> <li>Staking your $CRV</li> </ul>"},{"location":"lp/depositing/depositing-into-a-tricrypto-pool/","title":"Depositing into a tricrypto-pool","text":"<p>Tricrypto pools contain three volatile assets.</p> <p>Learn more about v2 pools</p> <p>For instance, the TriCRV pool is used in the examples below.</p>"},{"location":"lp/depositing/depositing-into-a-tricrypto-pool/#depositing-into-the-pool","title":"Depositing into the pool","text":"<p>Visit the deposit page (https://curve.fi/#/ethereum/pools/factory-tricrypto-4/deposit). You will need at least one of the three tokens in the pool to deposit. The TriCRV pool consists of CRV, crvUSD, and ETH.</p> <p> </p> <p>First, it's important to understand that you don't have to deposit all coins, you can deposit one or several of the coins in the pool and it won't affect your returns. Depositing the coin with the smallest share in the pool will result in a small positive price impact. Since crypto pools have a rebalancing mechanism, the balances of the pool should be relatively equal.</p> <p>Second, once you deposit one coin, it gets split over the three different coins in the pool which means you now have exposure to all of them. The first checkbox (Add all coins in a balanced proportion) allows you to deposit all three coins in the same proportion they currently are in the pool, resulting in no price impact.</p> <p>The second checkbox (Deposit Wrapped) allows users to deposit wrapped ETH instead of plain ETH.</p>"},{"location":"lp/depositing/depositing-into-a-tricrypto-pool/#confirming-and-staking","title":"Confirming and staking","text":"<p>You will then be asked to approve the Curve Finance contract, follow by a deposit transaction which will deposit your into the pool. This transaction can be expensive so you ideally want to wait for gas to be fairly cheap if this will impact the size of your deposit.</p> <p>After depositing in the pool, you receive liquidity provider (LP) tokens. They represent your share of ownership in the pool and you will need them to stake for CRV.</p> <p>After depositing, you will be prompted with a new transaction that will deposit your LP tokens in the DAO liquidity gauge. Confirming the transaction will let you mine CRV. This second transaction will only pop up if you deposited your tokens under the \"Deposit and stake\" tab. Otherwise it will just deposit the tokens in the pool. </p> <p>If you already have LP tokens, you can also directly stake them into the gauge under the 'Stake' tab.</p> <p>Once that's done, you're providing liquidity and staking so all that's left to do is wait for your trading fees to accrue.</p> <p>You can click the link below to learn how to boost your CRV rewards by locking CRV on the Curve DAO:</p> <ul> <li>Boosting your CRV Rewards</li> <li>Staking your $CRV</li> </ul>"},{"location":"lp/depositing/depositing-into-the-tri-pool/","title":"Depositing into the tri-pool","text":"<p>The Tri-Pool is a classic Curve pool and improved upon earlier offerings in many ways.</p> <p>Here are some of the major improvements this pool:</p> <ul> <li>A new rampable A parameter (like on BTC pools) which can adjust liquidity density without causing losses to the virtual price (and to LPs)</li> <li>Gas optimised</li> <li>Will be used as a base pool for meta pools (which would essentially allow some pools to seemingly trade against underlying \u201cbase\u201d pools without diluting liquidity)</li> <li>By only having the three most liquid stable coins in crypto, this pool should grow to become the most liquid and offer the best prices</li> </ul> <p>This pool is expected to become the most liquid and the cheapest to interact with making it a good place to start for newcomers wanting to try Curve with small amounts of capital. Because this pool is likely to offer the best prices, it will also likely be one of the Curve pools getting the most volume.</p> <p>See how to deposit and stake into the 3Pool: https://www.youtube.com/watch?v=OsRrGij9Ou8</p>"},{"location":"lp/depositing/depositing-into-the-tri-pool/#depositing-into-the-pool","title":"Depositing into the pool","text":"<p>Visit the deposit page (https://curve.fi/#/ethereum/pools/3pool/deposit). You will need one or multiple stable coins to deposit. The Tri-Pool takes DAI, USDC and USDT.</p> <p> </p> <p>First, it's important to understand that you don't have to deposit all coins, you can deposit one or several of the coins in the pool and it won't affect your returns. Depositing the coin with the smallest share in the pool will result in a small deposit bonus.</p> <p>Second, once you deposit one stable coin, it gets split over the three different coins in the pool which means you now have exposure to all of them. The first checkbox (Add all coins in a balanced proportion) allows you to deposit all three coins in the same proportion they currently are in the pool, resulting in no slippage occurrence.</p>"},{"location":"lp/depositing/depositing-into-the-tri-pool/#confirming-and-staking","title":"Confirming and staking","text":"<p>You will then be asked to approve the Curve Finance contract, follow by a deposit transaction which will wrap your stable coins and deposit them into the pool. This transaction can be expensive so you ideally want to wait for gas to be fairly cheap if this will impact the size of your deposit.</p> <p>After depositing in the pool, you receive liquidity provider (LP) tokens. They represent your share of ownership in the pool and you will need them to stake for CRV.</p> <p>After depositing, you will be prompted with a new transaction that will deposit your LP tokens in the DAO liquidity gauge. Confirming the transaction will let you mine CRV. This second transaction will only pop up if you deposited your tokens under the \"Deposit and stake\" tab. Otherwise it will just deposit the tokens in the pool.</p> <p>If you already have LP tokens, you can also directly stake them into the gauge under the 'Stake' tab.</p> <p>Once that's done, you're providing liquidity and staking so all that's left to do is wait for your trading fees to accrue.</p> <p>You can click the link below to learn how to boost your CRV rewards by locking CRV on the Curve DAO:</p> <ul> <li>Boosting your CRV Rewards</li> <li>Staking your $CRV</li> </ul> <p>\u200b</p>"},{"location":"lp/depositing/depositing/","title":"Overview","text":""},{"location":"lp/depositing/depositing/#before-depositing","title":"Before depositing...","text":"<p>Before depositing into a Curve pool, it is highly recommended to familiarise yourself with how Curve works, how it makes money and its basic mechanisms.</p> <p>You can do so by visiting the page below:</p> <p>Understanding Curve v1 Understanding Curve v2</p>"},{"location":"lp/depositing/depositing/#choosing-the-right-pool","title":"Choosing the right pool","text":"<p>Curve has many pools to choose from currently accepting stable coins and tokenised Bitcoin (Bitcoin on Ethereum). If you are not sure which pool is right for you, click the link below:</p> <p>Understanding Curve Pools</p>"},{"location":"multichain/bridging-crvusd-to-bsc/","title":"How to Bridge crvUSD to BSC","text":"User Guide: Bridging crvUSD"},{"location":"multichain/bridging-crvusd-to-bsc/#overview","title":"Overview","text":"<p>This guide explains how to bridge crvUSD tokens from the Ethereum Mainnet to the Binance Smart Chain (BSC) or vice versa, utilizing LayerZero infrastructure.</p> <p>Requirements include having a wallet with crvUSD tokens and either ETH or BNB, depending on the bridging direction, to cover transaction fees.</p> <p>Disclaimer</p> <p>This guide is only applicable for bridging crvUSD to BSC or vice versa. Using the contracts below will only allow the bridging of crvUSD. Attempting to use other tokens will cause the transaction to revert.</p> <p>Contract Addresses</p> <p>Both bridge contracts, on Ethereum and Binance Smart Chain, have the same contract addres.</p> Bridge Contract Address  Ethereum 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f  Binance Smart Chain 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f <p>The crvUSD contract address differs depending on the chain.</p>  crvUSD Contract Address  Ethereum 0xf939E0A03FB07F59A73314E73794Be0E57ac1b4E  Binance Smart Chain 0xe2fb3F127f5450DeE44afe054385d74C392BdeF4"},{"location":"multichain/bridging-crvusd-to-bsc/#bridging-crvusd-from-ethereum-to-binance-smart-chain","title":"Bridging crvUSD from Ethereum to Binance Smart Chain","text":""},{"location":"multichain/bridging-crvusd-to-bsc/#step-1-approve-the-bridge-contract","title":"Step 1: Approve the Bridge Contract","text":"<ol> <li>Navigate to the crvUSD token contract on Etherscan: 0xf939E0A03FB07F59A73314E73794Be0E57ac1b4E.</li> <li>Connect your wallet by selecting <code>Contract</code> &gt; <code>Write Contract</code> &gt; <code>Connect to Web3</code>.      </li> <li>Locate the method <code>3. approve</code> and approve the bridge contract as a spender.          <ul> <li><code>_spender</code>: Enter <code>0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f</code>, the bridge contract address.</li> <li><code>_value</code>: Specify the amount in 1e18 format (for example, for 100 crvUSD, enter <code>100000000000000000000</code>). Alternatively, to avoid manually entering the amount in 1e18 format, you can input the amount of crvUSD you wish to bridge and then append 18 zeros by using the <code>+</code> button.  </li> </ul> </li> <li>Click <code>Write</code> and complete the transaction.</li> </ol>"},{"location":"multichain/bridging-crvusd-to-bsc/#step-2-read-contract-and-quote-eth-amount","title":"Step 2: Read Contract and Quote ETH Amount","text":"<ol> <li>Visit the bridge contract on Etherscan: 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f#readContract.</li> <li>Use function <code>1. quote</code> to determine the destination chain fees.           The <code>quote</code> amount represents the cost (in ETH) of calling the bridge method in Step 3. This does not include gas costs, which need to be paid additionally.</li> </ol>"},{"location":"multichain/bridging-crvusd-to-bsc/#step-3-bridge-crvusd-to-bsc","title":"Step 3: Bridge crvUSD to BSC","text":"<ol> <li>Access the bridge contract on Etherscan: 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f#writeContract.</li> <li>Connect your wallet by selecting <code>Contract</code> &gt; <code>Write Contract</code> &gt; <code>Connect to Web3</code>.      </li> <li>Navigate to method <code>2. bridge</code> and input your values:          <ul> <li><code>bridge</code>: Enter the ETH amount quoted in Step 2. Ensure you enter the amount denominated in Ether (quoted amount / 1e18).</li> <li><code>_amount</code>: Specify the amount of crvUSD in 1e18 format. Alternatively, to avoid manually entering the amount in 1e18 format, you can input the amount of crvUSD you wish to bridge and then append 18 zeros by using the <code>+</code> button.      </li> <li><code>_receiver</code>: Enter your BSC wallet address.</li> </ul> </li> <li>Click <code>Write</code> and complete the transaction.</li> </ol> <p>After completing these steps, it may take a few minutes for your crvUSD tokens to be successfully bridged to the Binance Smart Chain.</p>"},{"location":"multichain/bridging-crvusd-to-bsc/#bridging-crvusd-from-binance-smart-chain-to-ethereum","title":"Bridging crvUSD from Binance Smart Chain to Ethereum","text":""},{"location":"multichain/bridging-crvusd-to-bsc/#step-1-approve-the-bridge-contract_1","title":"Step 1: Approve the Bridge Contract","text":"<ol> <li>Navigate to the crvUSD token contract on BSCScan: 0xe2fb3F127f5450DeE44afe054385d74C392BdeF4.</li> <li>Connect your wallet by selecting <code>Contract</code> &gt; <code>Write Contract</code> &gt; <code>Connect to Web3</code>.      </li> <li>Locate the method <code>3. approve</code> and approve the bridge contract as a spender.          <ul> <li><code>_spender</code>: Enter <code>0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f</code>, the bridge contract address.</li> <li><code>_value</code>: Specify the amount in 1e18 format (for example, for 100 crvUSD, enter <code>100000000000000000000</code>). Alternatively, to avoid manually entering the amount in 1e18 format, you can input the amount of crvUSD you wish to bridge and then append 18 zeros by using the <code>+</code> button.  </li> </ul> </li> <li>Click <code>Write</code> and complete the transaction.</li> </ol>"},{"location":"multichain/bridging-crvusd-to-bsc/#step-2-read-contract-and-quote-bnb-amount","title":"Step 2: Read Contract and Quote BNB Amount","text":"<ol> <li>Visit the bridge contract on BSCScan: 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f#readContract.</li> <li>Use function <code>1. quote</code> to determine the destination chain fees.           The <code>quote</code> amount represents the cost (in BNB) of calling the bridge method in Step 3. This does not include gas costs, which need to be paid additionally.</li> </ol>"},{"location":"multichain/bridging-crvusd-to-bsc/#step-3-bridge-crvusd-to-ethereum","title":"Step 3: Bridge crvUSD to Ethereum","text":"<ol> <li>Access the bridge contract on BSCScan: 0x0A92Fd5271dB1C41564BD01ef6b1a75fC1db4d4f#writeContract.</li> <li>Connect your wallet by selecting <code>Contract</code> &gt; <code>Write Contract</code> &gt; <code>Connect to Web3</code>.      </li> <li>Navigate to method <code>2. bridge</code> and input your values:          <ul> <li><code>bridge</code>: Enter the ETH amount quoted in Step 2. Ensure you enter the amount denominated in Ether (quoted amount / 1e18).</li> <li><code>_amount</code>: Specify the amount of crvUSD in 1e18 format. Alternatively, to avoid manually entering the amount in 1e18 format, you can input the amount of crvUSD you wish to bridge and then append 18 zeros by using the <code>+</code> button.      </li> <li><code>_receiver</code>: Enter your Ethereum wallet address.</li> </ul> </li> <li>Click <code>Write</code> and complete the transaction.</li> </ol> <p>After completing these steps, it may take a few minutes for your crvUSD tokens to be successfully bridged to Ethereum.</p>"},{"location":"multichain/bridging-funds/","title":"Bridging funds","text":"<p>In order to use Curve on chains other than Ethereum, you will need to bridge funds to the sidechain. Curve operates on several chains, documented here:</p> <p>Understanding Multichain</p> <p>Bridges are not operated by Curve, so Curve cannot offer support for using bridges. The following issues may affect users of bridges, so make sure to do research and exercise caution.</p> <ul> <li>Liquidity issues: Sometimes bridges do not have enough liquidity to process transactions. Usually the bridge will wait to refill liquidity before it permits funds getting processed.</li> <li>Stuck funds: Occasionally funds will get moved off one chain, but fail to appear on the new chain in a timely manner. Sometimes this gets resolved by simply waiting. In extreme cases, you should contact the support channels for the bridge in question.</li> <li>Hacking: Cross-chain communication can be complex, and the bridge is</li> </ul>"},{"location":"multichain/crv/","title":"CRV","text":"Multi-Chain: Curve DAO Token <p>The Curve token can be bridged across various chains, though it does not always retain full functionality. Locking CRV to obtain veCRV, as well as rewards voting for cross-chain gauges, must be conducted on the Ethereum blockchain.</p> <p>MULTICHAIN WARNING</p> <p>Multichain statement: https://twitter.com/MultichainOrg/status/1677180114227056641 The Multichain service is currently halted, and all bridge transactions are suspended on their source chains.  There is no confirmed time for service resumption. Please refrain from using the Multichain bridging service at this time.</p> Network Contract Address Bridge Arbitrum 0x11cDb42B0EB46D95f990BeDD4695A6e3fA034978 Arbitrum Bridge\u200b Base 0x8Ee73c484A26e0A5df2Ee2a4960B789967dd0415 Base Bridge Optimism 0x0994206dfE8De6Ec6920FF4D779B0d950605Fb53 Optimism Bridge polygon-matic Polygon 0x172370d5Cd63279eFa6d502DAB29171933a610AF Polygon Bridge\u200b Gnosis 0x712b3d230F3C1c19db860d80619288b1F0BDd0Bd Gnosis Bridge\u200b X-Layer 0x3d5320821bfca19fb0b5428f2c79d63bd5246f89 X-Layer Bridge\u200b Avalanche\u200b 0x47536F17F4fF30e64A96a7555826b8f9e66ec468 Multichain\u200b Fantom circle@2x Fantom\u200b 0x1E4F97b9f9F913c46F1632781732927B9019C68b Multichain\u200b Celo\u200b 0x173fd7434B8B50dF08e3298f173487ebDB35FD14 Multichain\u200b"},{"location":"multichain/crvusd/","title":"crvUSD","text":"Multi-Chain: Curve Stablecoin (crvUSD) <p>crvUSD was first introduced in May 2023 on the Ethereum blockchain. As of [specific date or period], this stablecoin can be minted exclusively on the Ethereum mainnet.</p> <p>Understanding crvUSD</p> <p>Despite being launched on Ethereum, crvUSD can be bridged to various chains:</p> Chain crvUSD Token Address Official Bridge Ethereum 0xf939E0A03FB07F59A73314E73794Be0E57ac1b4E --- Arbitrum 0x498Bf2B1e120FeD3ad3D42EA2165E9b73f99C1e5 Arbitrum Bridge Optimism 0xc52d7f23a2e460248db6ee192cb23dd12bddcbf6 Optimism Bridge Base 0x417Ac0e078398C154EdFadD9Ef675d30Be60Af93 Base Bridge Gnosis 0xaBEf652195F98A91E490f047A5006B71c85f058d Gnosis Bridge polygon-matic Polygon 0xc4Ce1D6F5D98D65eE25Cf85e9F2E9DcFEe6Cb5d6 Polygon Bridge X-Layer 0xda8f4eb4503acf5dec5420523637bb5b33a846f6 X-Layer Bridge"},{"location":"multichain/understanding-multichain/","title":"Understanding multi-chain","text":"<p>Curve exists across several chains, with several more planned. Curve's primary chain will always be Ethereum, but other sidechains have advantages including speed and cost. In order to use Curve on other chains, you must typically send your funds from Ethereum to the sidechain using the chain's bridge.</p> <p>All of Curve's active chains can be found in the \"Networks\" menu on the Curve homepage.</p> <p></p> <p>Supported Sidechains as of 11/14/2022</p>"},{"location":"multichain/understanding-multichain/#connecting-your-wallet","title":"Connecting your Wallet","text":"<p>When you move to new chains, you will need to connect your wallet with the chain's RPC and chain ID. Generally Curve sidechain pages have a button you can press to automatically switch networks and populate this information for you.</p> <p></p> <p>A common issue with sidechains is RPC networks that are temporarily or permanently unavailable. If you are having trouble connecting with RPC networks you may need to visit the chain's support networks to find a new RPC network.</p>"},{"location":"multichain/understanding-multichain/#curve-forks","title":"Curve Forks","text":"<p>Tip</p> <p>For Bridges and CRV contract addresses on other chains please see Important Bridges.</p> <p>Curve forks include the following:</p>"},{"location":"multichain/understanding-multichain/#avalanche","title":"Avalanche","text":"<p>Avalanche is a sidechain that bills itself as \"blazingly fast, low-cost and eco-friendly.\" Curve's Avalanche site is hosted at https://avax.curve.fi/\u200b</p>"},{"location":"multichain/understanding-multichain/#arbitrum","title":"Arbitrum","text":"<p>Arbitrum is an Optimistic Ethereum L2. Arbitrum validators optimistically assume nodes will be operating in good faith, which allows for faster transactions. However, to retroactively allow opportunity to challenge malicious behavior, settlement time can be slower. In some cases this could mean it takes up to one week to bridge funds off-chain, so plan accordingly. Curve on Arbitrum: https://curve.fi/#/arbitrum/pools \u200b</p>"},{"location":"multichain/understanding-multichain/#binance-smart-chain","title":"Binance Smart Chain","text":"<p>Curve does not operate on Binance Smart Chain. The team at Ellipsis (https://ellipsis.finance/) launched a fork of Curve that provides similar functionality. The Curve team authorized this fork, but does not actively maintain this fund.</p>"},{"location":"multichain/understanding-multichain/#fantom","title":"Fantom","text":"<p>Fantom is a high-performance, scalable, and secure smart contract platform designed to overcome the limitations of traditional blockchain networks by utilizing a DAG-based consensus algorithm. Curve on Fantom: https://curve.fi/#/fantom/pools</p>"},{"location":"multichain/understanding-multichain/#harmony","title":"Harmony","text":"<p>Harmony is a proof-of-stake sidechain promising two seconds of transaction speed and a hundred times lower gas fee. Curve's Harmony offerings are at https://harmony.curve.fi/\u200b.</p>"},{"location":"multichain/understanding-multichain/#optimism","title":"Optimism","text":"<p>Optimism is verified by a series of smart contracts on the Ethereum mainnet and thus not considered a real sidechain. Curve's Optimism branch is located at https://curve.fi/#/optimism/pools\u200b</p>"},{"location":"multichain/understanding-multichain/#polygon","title":"Polygon","text":"<p>Polygon (previously known as Matic Network) is a multi-chain scaling solution for Ethereum that aims to provide faster and cheaper transactions using Layer 2 sidechains. Curve on Polygon: https://curve.fi/#/polygon/pools</p>"},{"location":"multichain/understanding-multichain/#xdaignosis","title":"xDai/Gnosis","text":"<p>The xDai chain is a stable payments EVM (Ethereum Virtual Machine) blockchain designed for fast and inexpensive transactions. Curve on xDai/Gnosis: https://curve.fi/#/xdai/pools \u200b</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/","title":"Boosting your CRV rewards","text":"<p>This guide assumes the reader has already provided liquidity and is currently staking LP tokens on the DAO gauge.</p> <p>One of the main incentives for CRV is the ability to boost rewards on provided liquidity. Vote locking CRV enables the acquisition of voting power to participate in the DAO and earn a boost of up to 2.5x on the liquidity provided on Curve.</p> <p> Boosting your CRV rewards</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/#figuring-out-the-required-boost","title":"Figuring out the required boost","text":"<p>The first step to getting rewards boosted is to determine the amount of CRV needed for lock. Each gauge has different requirements, meaning some pools are easier to boost than others. This depends on the amount others have locked and the liquidity gauge's capacity.</p> <p>The calculator can be found at this address: https://dao.curve.fi/minter/calc</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/#locking-crv","title":"Locking CRV","text":"<p>After determining how much and for how long to lock, visit the following page: https://dao.curve.fi/locker</p> <p></p> <p>Enter the amount to lock and select the expiry. Remember, locking is not reversible. The amount of veCRV received will depend on the amount and duration of the vote lock.</p> <p>A lock can be extended, and CRV can be added to it at any point, but having CRV with different expiry dates is not possible.</p> <p>After creating a lock, the next step is to apply the boost.</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/#applying-the-boost","title":"Applying the boost","text":"<p>Proceed to the minter page: https://dao.curve.fi/minter/gauges</p> <p>If the new boost is visible after 'Current boost:', then no further action is required.</p> <p>If the current boost hasn't updated, it may be necessary to claim CRV from each of the gauges where liquidity is provided to update the boost. After doing so, the boost should be visible.</p> <p>Locking your Boost</p> <p>Boosts are only updated when a withdrawal, deposit, or claim is made from a liquidity gauge</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/#boost-info","title":"Boost Info","text":"<p>The list of pools and boost/reward information has been relocated from the minter page. This information can now be found on each pool page on the classic.curve.fi site.</p> <p> </p> <p>Alternatively, this information is also available in the new UI (curve.fi) under the \"Your Details\" section on the pool page. Note: The new UI does not display future boost yet.</p> <p> </p> <p>Visit the old or new dashboard to see all your pools!</p>"},{"location":"reward-gauges/boosting-your-crv-rewards/#formula","title":"Formula","text":"<p>The boost mechanism calculates the earning weight of the liquidity you provide to pools and vaults.  If you have enough voting weight (veCRV) you will be able to boost the earning weight of the liquidity you provide by up to 2.5x.  This means if you have a boost of 2.5x and deposit $10,000 of value to a pool your rewards are for $25,000 of value in the pool.  The formula for calculating your boost (\\(B\\)) is given below.  \\(B\\) has a maximum of 2.5 so if the formula gives a value greater than 2.5 then your boost is 2.5.</p> \\[B = 1.5 \\times \\frac{D \\times v}{V \\times d} + 1\\] <p>Where:</p> <ul> <li>\\(B\\) is your rewards boost (if it's more than 2.5 it just equals 2.5).</li> <li>\\(d\\) is the value you deposit, in USD.</li> <li>\\(D\\) is the total value deposited to the pool's reward gauge, in USD.</li> <li>\\(v\\) is the amount of veCRV you have (vote weight).</li> <li>\\(V\\) is the total veCRV in the system (total vote weight) click here to find the current amount.</li> </ul>"},{"location":"reward-gauges/creating-a-pool-gauge/","title":"Creating a pool gauge","text":"<p>You can deploy the gauge directly through the UI if the gauge is for a pool.  To do so go to the following page: https://curve.fi/#/ethereum/deploy-gauge.  If you would like to deploy a gauge for a lending market, then follow the guide on the Create Lending Market page.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploying-a-pool-gauge-with-the-ui","title":"Deploying a Pool Gauge with the UI","text":"<p>Go to the Curve page to deploy a gauge here: https://curve.fi/#/ethereum/deploy-gauge.  This page has a switch with 2 options:</p> <ul> <li>Deploy Mainnet Gauge - Deploy a gauge for a pool on Ethereum Mainnet</li> <li>Deploy Sidechain Gauge - Deploy a gauge for a pool on any other chain Curve has deployed to.</li> </ul> <p>These different options have slightly different processes for deploying the gauge, but both options require that you choose the correct pool type for the gauge that is being deployed.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#pool-types","title":"Pool Types:","text":"<ul> <li>Stableswap - a pool with up to 8 pegged assets e.g., USDC and USDT</li> <li>Two Coin Cryptoswap - a pool with 2 volatile assets e.g., USDC and ETH</li> <li>Three Coin Cryptoswap - a pool with 3 volatile assets e.g., USDC, ETH and CRV</li> <li>Stableswap (old) - an old pool with pegged assets e.g., USDC and USDT.</li> <li>Two Coin Cryptoswap (old) - an old pool with 2 volatile assets e.g., USDC and ETH</li> </ul> <p>A pool is classified as old if it is not a New Generation (NG) pool.  If the pool was deployed from 2024 onwards it should be a NG pool.  If you are not sure on the pool type then try all options when deploying the gauge, the UI will show an error if the wrong option is chosen or the pool already has a gauge deployed.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploy-mainnet-pool-gauge","title":"Deploy Mainnet Pool Gauge","text":"<p>Go to the Deploy Gauge page, and make sure the switch in the right hand corner is set to the left as shown below.  The  \"Deploy Mainnet Gauge\" screen should be visible as below.</p> <p></p> <p>Simply input the  pool address (0x...) and select the pool type from the drop down menu.  Note the pool type may be pre-selected for you, if this is the case, this does not need to be changed.  </p> <p>After the options have been inputted, click on deploy gauge and submit the transaction using your preferred wallet.  The UI will show an error if the incorrect pool type is selected, or a gauge already exists for the pool, so there is no harm in trying all options if you are unsure of the pool type.</p> <p>After clicking on deploy and the transaction is confirmed the gauge is deployed.  A vote can then be created to add it to the gauge controller.  Adding the gauge to the gauge controller allows the gauge to receive CRV rewards for stakers when the gauge is allocated gauge weight.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploy-sidechain-pool-gauge","title":"Deploy Sidechain Pool Gauge","text":"<p>Sidechain gauges (the same as L2 gauges) work differently to a mainnet gauge.  They have a gauge on the sidechain which distributes rewards, as well as a mirror gauge on Ethereum mainnet so that the gauge can receive gauge weight and CRV inflation rewards.  This parent-child relationship is required because all Curve governance currently happens on Ethereum Mainnet.</p> <p>Warning</p> <p>The same address must deploy the gauge both on mainnet and the sidechain for this process to work.</p> <p>To deploy a sidechain gauge go to the Deploy Gauge page. The click the  switch so it's on the right as shown below.  The \"Deploy Sidechain Gauge\" screen will then be shown.</p> <p></p> <p>Then connect to the chain you would like to deploy the sidechain gauge to, which is the chain the pool resides on.  In this example we are choosing Base as shown below, after choosing and connecting to the network, Step 1 of deploying the sidechain gauge will be shown.</p> <p></p> <p>For step 1 simply input the LP Token Address (same as pool address for newer pools, but can be different for older pools) and select the pool type from the drop down menu and click deploy gauge. The UI will show an error if the incorrect pool type is selected, or a gauge already exists for the pool, so there is no harm in trying all options if you are unsure of the pool type.</p> <p>After the gauge has been deployed on the sidechain (called the child gauge), the mirror gauge must be deployed on Ethereum Mainnet (the parent gauge), this connects the Sidechain to Ethereum and Curve governance.  To go to step 2 click on the little arrow shown in the red rectangle in the picture below:</p> <p></p> <p>Then choose the network the pool resides by clicking on the Network dropdown menu, in this example we have chosen base, as that's where the sidechain gauge was deployed.  The same pool type as in step 1 must be selected carefully in step 2, as the UI will not raise an error if the wrong option is selected.  Then we input the LP Token address (pool address) on the L2.  The LP Token Address in step 2 is the same address as used for step 1.  </p> <p>After clicking on deploy and the transaction is confirmed, the gauge is deployed and a vote can be created to add it to the gauge controller.  Adding the gauge to the gauge controller allows the gauge to receive CRV rewards for stakers when the gauge is allocated gauge weight.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploy-a-gauge-for-an-ethereum-mainnet-pool-via-etherscan","title":"Deploy a Gauge for an Ethereum Mainnet Pool via Etherscan","text":"<p>In addition to the UI, there is an option to deploy the gauge directly through Etherscan. If the pool was deployed recently, check the Deployment Addresses for the factory contracts, otherwise use the deployment transaction to find which contract deployed the pool/lending market, this will be the factory contract.</p> <p>Warning</p> <p>Calling <code>deploy_gauge</code> on Etherscan will only work if the function is called on the Factory contract that also deployed the pool.</p> <p>To navigate to this page, first search for the corresponding Factory contract on Etherscan. Then, go to <code>Contract -&gt; Write Contract -&gt; deploy_gauge</code>. Then insert the pool address you want to add a gauge for, press on <code>Write</code> and sign the transaction.  </p> <p>Before deploying the gauge, ensure you connect your wallet by clicking the <code>Connect to Web3</code> button.</p> <p> </p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploy-a-gauge-for-a-sidechain-pool-via-etherscan","title":"Deploy a Gauge for a Sidechain Pool via Etherscan","text":"<p>To deploy a sidechain gauge we have to deploy 2 different gauges which link together:</p> <ul> <li>Child Gauge - This is the gauge on the sidechain, it is deployed first.</li> <li>Root (Parent) Gauge - This is the gauge on Ethereum Mainnet, it is deployed after the child and links the child gauge to mainnet.  The root gauge can be added to the gauge controller, allowing CRV inflation rewards to flow to the sidechain gauge.</li> </ul> <p>Warning</p> <p>When deploying the Child Gauge and Root Gauge for a sidechain pool, they must be deployed using the same address and the same salt for both gauges.  This creates the same address for the gauge on the sidechain and ethereum.  If the addresses are not the same, the gauges cannot be linked.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploying-the-sidechain-child-gauge","title":"Deploying the Sidechain (Child) Gauge","text":"<p>To deploy the sidechain child gauge go to Deployment Addresses for Sidechain Gauge Factories.</p> <p>Find the <code>ChildLiquidityGaugeFactory</code> address for your sidechain and click on it.  This will take you to the contract page on the sidechain's block explorer.  Then go to <code>Contract -&gt; Write Contract -&gt; Connect to Web3</code>.</p> <p></p> <p>After your wallet is connected, find the <code>deploy_gauge</code> function.  There may be multiple <code>deploy_gauge</code> functions, this is because there is an optional parameter called <code>_manager</code>.  If the function doesn't have this option, the manager will be set to your address.  It is required that your address is the manager for this gauge, otherwise the root gauge will not be linked to this child gauge.</p> <p></p> <p>To call the function first input the <code>_lp_token</code> address for the pool, this is the same as the pool address for newer pools, but can be different for older pools.  Then input your <code>_salt</code>, salt is used to create the address for your gauge, this can be anything, but salt must be the same when deploying this gauge and later when deploying the root gauge, read more about salt here.  Input your address as the <code>_manager</code> address if it is required, then click on <code>write</code> and submit the transaction.</p> <p>After the transaction is confirmed the sidechain gauge is deployed.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#deploying-the-ethereum-mainchain-root-parent-gauge","title":"Deploying the Ethereum Mainchain Root (Parent) Gauge","text":"<p>After the sidechain child gauge has been successfully deployed, the Ethereum mainchain root gauge can be deployed.  To do so go back to the Deployment Addresses for Sidechain Gauge Factories.  You should see the table below:</p> <p></p> <p>The correct <code>RootLiquidityGaugeFactory</code> contract on Ethereum must be chosen.  Most root gauges for sidechains are deployed using the top contract boxed in blue, but some sidechains use their own special contracts, e.g., see the contract for Fractal boxed in red, or the BSC contract boxed in yellow.  If there isn't a specific <code>RootLiquidityGaugeFactory</code> for your sidechain, then use the first one.  Once the correct contract is found click on the address and you will be taken to the contract page on etherscan.</p> <p>Once again go to <code>Contract -&gt; Write Contract -&gt; Connect to Web3</code> to connect your wallet as shown above.  This must be the same wallet that deployed the sidechain child gauge.  Then click on the <code>deploy_gauge</code> function.  </p> <p></p> <p>In this function the <code>payableAmount</code> can be inputted as 0, the <code>_chain_id</code> must be the chain id of the sidechain your pool and gauge is on.  This can be easily found from chainlist.org.  The <code>_salt</code> must be the same as the salt used to deploy the sidechain child gauge.</p> <p>Click on <code>write</code>, and submit the transaction, after this is complete the gauge is root gauge is deployed and this process is complete.  You can now submit a gauge vote to get the root gauge added to the gauge controller, see the process below.</p>"},{"location":"reward-gauges/creating-a-pool-gauge/#submit-a-dao-vote","title":"Submit a DAO Vote","text":"<p>In order for a gauge to become eligible to receive CRV emissions, it has to be added to the GaugeController. This needs to be approved by the DAO.</p> <p>Once you've created your gauge, you can submit it to the DAO for a vote: https://classic.curve.fi/factory/create_vote\u200b.</p> <p>If the gauge is for a pool on a sidechain, input the parent gauge address (Ethereum gauge address) here.</p> <p>The address that submits must have 2500 veCRV in order to create a vote.</p> <p></p> <p>Once the gauge has been submitted, politics take over. You may want to visit the governance forum and explain why your pool should be made eligible for rewards.</p> <p>Governance Forum</p>"},{"location":"reward-gauges/gauge-weights/","title":"Gauge weights","text":""},{"location":"reward-gauges/gauge-weights/#what-are-gauge-weights","title":"What are gauge weights?","text":"<p>Simply put, a gauge weight translates into how much of the daily CRV inflation it receives.</p> <p>For example on the below chart, the Y pool is currently receiving around 72% of the daily CRV inflation. This means that all liquidity providers in the Y pool share 72% of the daily CRV.</p> <p></p> <p>You can find each liquidity gauge relative weight on this page: https://dao.curve.fi/minter/gauges\u200b</p>"},{"location":"reward-gauges/gauge-weights/#why-are-gauge-weights-so-important","title":"Why are gauge weights so important?","text":"<p>Because those weights decide where the CRV inflation goes, it allows the DAO to control where most of the liquidity should go and balance liquidity. It's a powerful tool for voters that must be used responsibly.</p> <p>The gauge weight is updated once a week on Thursdays.</p>"},{"location":"reward-gauges/gauge-weights/#who-can-vote-for-gauge-weights","title":"Who can vote for gauge weights?","text":"<p>Anybody who has vote locked CRV can vote to direct its voting power towards one or multiple Curve pools.</p>"},{"location":"reward-gauges/gauge-weights/#how-can-i-vote","title":"How can I vote?","text":"<p>Visit this link: https://dao.curve.fi/gaugeweight\u200b</p> <p>Select the gauge you would like to put your voting weight towards, enter an amount in BPS (10,000 = 100% the maximum) and confirm your transaction.</p>"},{"location":"reward-gauges/gauge-weights/#how-often-can-i-move-my-voting-weight","title":"How often can I move my voting weight?","text":"<p>You can change your voting weight once every 10 days.</p>"},{"location":"reward-gauges/gauge-weights/#what-happens-when-i-add-additional-crv-to-my-existing-lock-or-extend-the-locktime","title":"What happens when I add additional CRV to my existing lock or extend the locktime?","text":"<p>Adding more $CRV to your lock or extending the locktime increases your veCRV balance. This increase is not automatically accounted for in your current gauge weight votes. If you want to allocate all of your newly acquired voting power, make sure to re-vote.</p> <p>Warning</p> <p>Resetting your gauge weight before re-voting means you'll need to wait 10 days to vote for the gauges whose weight you've reset. So, please ensure you simply re-vote; there is no need to reset your gauge weight votes before voting again.</p>"},{"location":"reward-gauges/overview/","title":"Overview","text":"<p>On Curve Finance, CRV inflation goes to users who stake in Reward Gauges in Pools and Lending markets.</p> <p>Many Curve pools and lending markets have Reward Gauges. By staking liquidity provider tokens in these gauges, users earn rewards proportional to their share of the total staked value.</p> <p>Some special gauges also exist to fund specific initiatives, like Vyper development (veFunder-vyper).</p>"},{"location":"reward-gauges/overview/#gauge-weights","title":"Gauge Weights","text":"<p>For a Gauge to receive CRV emissions it must be added to the <code>GaugeController</code>.  The DAO must vote and approve each new gauge added, more details here.</p> <p>Each Gauge added to the <code>GaugeController</code> has a weight and a type. The weights represent how much of the daily [CRV inflation]](../crv-token/supply-distribution.md#community-emissions-crv-inflation) will be received by the rewards gauge.</p>"},{"location":"reward-gauges/overview/#gauge-weight-voting","title":"Gauge Weight Voting","text":"<p>The weight system allow the Curve DAO to dictate where the CRV inflation should go. You can vote at this address: https://dao.curve.fi/gaugeweight\u200b</p> <p>By doing so, users with veCRV can put direct their voting power towards the pool, lending market or other gauge they think should receive the most CRV.</p>"},{"location":"reward-gauges/overview/#when-are-the-weights-and-rewards-updated","title":"When are the weights and rewards updated?","text":"<p>On Ethereum mainnet weights and rewards are updated every Thursday 00:00 UTC.</p> <p>On L2s and other chains, weights and rewards start on flow to intermediary gauge contracts on Ethereum mainnet every Thursday 00:00 UTC, then from the following Thursday 00:00 UTC (1 week later) they flow to gauge stakers on the L2s.  So cross-chain gauge rewards are 1 week behind Ethereum mainnet.</p>"},{"location":"reward-gauges/permissionless-rewards/","title":"Permissionless rewards","text":"Permissionless Token Rewards  <p>This section explains the process of setting any token reward using Etherscan. It's assumed that the user possesses some familiarity with Etherscan or are competent in executing the transaction through an alternative tool.  </p> <p>These rewards are called permissionless as the CurveDAO does not control them.  They are not completely permissionless however, as only the admin or manager of the gauge can approve and add these token rewards.</p> <p>Warning</p> <p>Note that Curve has employed various gauge versions over time. If your attempts are unsuccessful, it might be due to version differences. Please don't hesitate to reach out to the Curve team.</p> <p>Permissionless rewards are added in the following flow:</p> <ol> <li>Set reward token and distributor address.</li> <li>Approve reward token.</li> <li>Add rewards.</li> </ol>"},{"location":"reward-gauges/permissionless-rewards/#setting-the-reward-token-and-distributor-address","title":"Setting the Reward Token and Distributor Address","text":"<p>By calling the <code>add_reward</code> function on a specific gauge a token can be added to the gauge's list of approved reward tokens.  To call the function the reward token contract address and the distributor address must be specified. The distributor address is the source from which the reward token will be sent to the gauge.</p> <p>Info</p> <p>Ensure you have the required <code>admin/manager</code> permissions for the gauge. The address that deployed the gauge is set as the <code>admin/manager</code>. If you are not admin/manager, the transaction will fail.</p> <p>To identify the manager, check the <code>manager/admin</code> in the \"Read Contract\" section on Etherscan. Some versions of this contract may also allow the factory owner to execute this call.</p> <p>The deployer of the gauge is usually the manager of the gauge if the gauge was deployed via the Factory Contracts.</p> <p>This function should be called only once for a specific reward token. A repeated call to <code>add_reward</code> using a previously set reward token will fail. However, the distributor address for an already added reward token can be updated using the <code>set_reward_distributor</code> function. Over the lifetime of a gauge, a total of 8 different reward tokens can be set.</p> <p><code>add_reward(_reward_token: address, _distributor: address):</code></p> <p>Function to add specify a reward token and distributor for the gauge. Once a reward tokens is added, it can not be removed anymore.</p> <p></p> Parameter Type Description <code>_reward_token</code> <code>address</code> Reward Token Address <code>_distributor</code> <code>address</code> Distributor Address, who can add the Reward Token"},{"location":"reward-gauges/permissionless-rewards/#approving-the-reward-token-for-deposit","title":"Approving the Reward Token for Deposit","text":"<p>Visit the reward token's contract address (not the gauge contract address) on Etherscan and switch to the \"Write Contract\" tab. Use the <code>approve</code> function, setting the spender as the gauge contract address and specifying the desired amount.</p> <p><code>approve(_spender : address, _value : uint256) -&gt; bool:</code></p> <p>Function to approve <code>_spender</code> to transfer <code>_value</code> tokens.</p> <p></p> Parameter Type Description <code>_spender</code> <code>address</code> Gauge Contract Address <code>_value</code> <code>uint256</code> Amount to approve"},{"location":"reward-gauges/permissionless-rewards/#depositing-the-reward-token","title":"Depositing the Reward Token","text":"<p>When depositing the reward token to the contract a time period is chosen (<code>_epoche</code> seconds).  After depositing the reward epoch begins, lasting the defined number of seconds chosen by the depositor (<code>_epoch</code> seconds). Rewards are streamed at a constant rate per second to all gauge stakers over the epoch time period.  If no additional rewards of this token are deposited before the end of this time period, the rewards stop when the time period elapses.</p> <p>Reward epochs are token specific.  Different reward tokens can have different epoch time periods.</p> <p>If additional rewards for a currently streaming token are added mid epoch, both the newly added tokens and all the remaining tokens are combined (rewards = remaining + new), triggering a fresh epoch for the newly defined period of time.</p> <p>For consistent reward distributions, it's advisable to deposit near the end of an epoch. If replenishing mid-epoch, ensure you compute the appropriate amount for a steady distribution rate.  </p> <p>More information here.</p> <p><code>deposit_reward_token(_reward_token: address, _amount: uint256, _epoch: uint256 = WEEK)</code></p> <p>Function to deposit <code>_amount</code> of <code>_reward_token</code> into the gauge over the period of <code>_epoch</code> seconds.</p> <p>When depositing it is optional to use the <code>_epoch</code> parameter.  This is set to <code>WEEK</code> which means the rewards will be streamed to the gauge stakers over a 1 week period (604800 seconds).</p> <p>Info</p> <p>The <code>_epoch</code> parameter was added in newer versions of the gauge.  In older versions, rewards are all streamed over a 1 week period.</p> <p></p> Parameter Type Description <code>_reward_token</code> <code>address</code> Reward Token Address <code>_amount</code> <code>uint256</code> Amount to be distributed over the week <code>_epoch</code> <code>uint256</code> Duration the rewards are distributed across, denominated in seconds. Defaults to a week (604800s)."},{"location":"risks-security/security/","title":"Security & Audits","text":"<p>Curve Finance emphasizes its commitment to security by regularly undergoing audits from reputable third-party firms. These audits aim to uncover potential vulnerabilities and ensure that the protocol's smart contracts function as intended. </p> <p>However, as with all DeFi platforms, users should be aware that engaging with Curve Finance carries inherent risks. Despite the thoroughness of audits, they do not guarantee complete security, and potential vulnerabilities might still emerge in the future. </p> <p>Therefore, individuals should always proceed with caution and understand that the use of the protocol is at their own risk. </p>"},{"location":"risks-security/security/#audits","title":"Audits","text":"<p>For a detailed look into the audits Curve Finance has undergone, please refer to here.</p>"},{"location":"risks-security/risks/crvusd/","title":"crvUSD","text":"Curve Stablecoin Risk Disclosure <p>Curve Stablecoin infrastructure enables users to mint crvUSD using a selection of crypto-tokenized collaterals (adding new ones are subject to DAO approval). Positions are managed passively: if the collateral's price decreases, the system automatically sells off collateral in a \u2018soft liquidation mode\u2019. If the collateral's price increases, the system recovers the collateral. This process could lead to some losses due to liquidation and de-liquidation. Additional information can be found on LLAMMA Overview.</p> <p>Please consider the following risk disclaimers when using the Curve Stablecoin infrastructure:</p> <ol> <li> <ol> <li>If your collateral enters soft-liquidation mode, you can't withdraw it or add more collateral to your position.</li> <li>Should the price of the collateral change drop sharply over a short time interval, it can result in large losses that may reduce your loan's health.</li> <li>If you are in soft-liquidation mode and the price of the collateral goes up sharply, this can result in de-liquidation losses on the way up. If your loan's health is low, value of collateral going up could potentially reduce your underwater loan's health.</li> <li>If the health of your loan drops to zero or below, your position will get hard-liquidated with no option of de-liquidation. Please choose your leverage wisely, as you would with any collateralized debt position.</li> </ol> </li> <li> <p>The crvUSD stablecoin and its infrastructure are currently in beta testing. As a result, investing in crvUSD carries high risk and could lead to partial or complete loss of your investment due to its experimental nature. You are responsible for understanding the associated risks of buying, selling, and using crvUSD and its infrastructure.</p> </li> <li> <p>The value of crvUSD can fluctuate due to stablecoin market volatility or rapid changes in the liquidity of the stablecoin.</p> </li> <li> <p>crvUSD is exclusively issued by smart contracts, without an intermediary. However, the parameters that ensure the proper operation of the crvUSD infrastructure are subject to updates approved by Curve DAO. Users must stay informed about any parameter changes in the stablecoin infrastructure.</p> </li> </ol>"},{"location":"risks-security/risks/lending/","title":"Lending","text":"Curve Lending: Risk Disclaimer <p>Curve Lending enables users to permissionlessly create and interact with isolated lending pairs composed of crvUSD, a decentralized stablecoin native to the Curve ecosystem, and various paired tokens. The notifications provided herein address risks associated with Curve Lending activities. The following list is not exhaustive.</p> <p>Users wishing to acquaint themselves with a broader range of general risk disclosures are encouraged to read the Curve Risk Disclosures for Liquidity Providers. Users are also advised to review the public audit reports to assess the security and reliability of the platform before engaging in any lending or borrowing activities.</p>"},{"location":"risks-security/risks/lending/#permissionless-markets-risks","title":"Permissionless Markets Risks","text":"<p>Curve Lending markets are permissionless, allowing anyone to create and customize markets with unique token pairs, a price oracle, and parameters that influence the LLAMMA liquidation algorithm and interest rate model. Given the protocol's permissionless nature, users should verify that the market has been instantiated with sensible parameters. Curve provides a LLAMMA-simulator that can be referenced for finding optimal parameters.</p> <p>There are several factors users should consider regarding attributes of the permissionless markets:</p>"},{"location":"risks-security/risks/lending/#1-unvetted-tokens","title":"1) Unvetted Tokens","text":"<p>Curve Lending pairs consist of crvUSD and one other token, which may not undergo rigorous vetting due to the permissionless lending factory and lack of strict onboarding criteria. As a result, some tokens in Curve pools could be unvetted, introducing potential risks such as exchange rate volatility, smart contract vulnerabilities, and liquidity risks. Users should exercise caution and conduct their due diligence before interacting with any token on the platform.</p>"},{"location":"risks-security/risks/lending/#2-oracle-designation","title":"2) Oracle Designation","text":"<p>Curve Lending markets by default use a Curve pool as the oracle, as long as the pool pair contains both tokens in the market and the pool is a Curve tricrypto-ng, twocrypto-ng or stableswap-ng pool, which has manipulation-resistant oracles. However, this creates a dependency on the selected pool oracle, which may become unreliable due to market circumstances (e.g., liquidity migration) or technical bugs.</p> <p>Alternatively, market deployers may designate a custom oracle, which can introduce additional trust assumptions or technical risks, and these custom oracles may need to be thoroughly vetted due to permissionless market deployment. Users should fully understand the oracle mechanism before interacting with a Curve Lending market.</p>"},{"location":"risks-security/risks/lending/#3-parameter-configuration","title":"3) Parameter Configuration","text":"<p>There are several parameters configurable by market deployers, including \"A\" (number of bands within the LLAMMA algorithm), fee on LLAMMA swaps, loan discount (Loan-To-Value), liquidation discount (Liquidation Threshold), and min/max borrow rate. Misconfigured AMM parameters may result in greater losses than necessary during liquidation and generally negatively impact user experience involving liquidation. Misconfigured borrow rates may prevent the market from adequately reflecting rates in the broader market, potentially leading to insufficient withdrawal liquidity for lenders. Users should be aware of market parameter configurations and ensure they are suitable for the underlying assets and anticipated market conditions.</p>"},{"location":"risks-security/risks/lending/#4-governance","title":"4) Governance","text":"<p>The Curve Lending admin is the Curve DAO, a decentralized organization made up of veCRV tokenholders. Votes are required to make any change to the Curve Lending system, including individual markets. Votes undergo a 1-week vote period, requiring a 51% approval and a sufficient voter quorum to execute any on-chain actions. The DAO controls critical system functions in Curve Lending, including setting system contract implementations and configuring parameters such as min/max borrow rates, borrow discounts and AMM fees.</p>"},{"location":"risks-security/risks/lending/#borrowing-risks","title":"Borrowing Risks","text":"<p>Borrowers can choose from various lending markets to borrow crvUSD against another asset or provide crvUSD as collateral. Markets are designated as one-way or two-way. In one-way markets, collateral cannot be lent out to other users. These assets serve solely as collateral to secure the loan and maintain the borrowing capacity within the protocol. Two-way markets allow collateral to be lent out, creating an opportunity for borrowers to earn interest.</p>"},{"location":"risks-security/risks/lending/#soft-and-hard-liquidation","title":"Soft and Hard Liquidation","text":"<p>Curve Lending uses a \"soft\" liquidation process powered by the LLAMMA algorithm. LLAMMA is a market-making contract that manages the liquidation and de-liquidation of collateral via arbitrageurs. This mechanism facilitates arbitrage between the collateral and borrowed asset in line with changes in market price, allowing a smoother liquidation process that strives to minimize user losses. Additional information can be found in the LLAMMA Overview docs.</p> <p>Please consider the following risks when using the Curve Stablecoin infrastructure:</p> <ul> <li>If your collateral enters soft-liquidation mode, you can't withdraw it or add more collateral to your position.</li> <li>If the price of your collateral drops sharply over a short time interval, it can result in higher losses that may reduce your loan's health.</li> <li>If you are in soft-liquidation mode and the price of the collateral appreciates sharply, this can also result in de-liquidation losses. If your loan's health is low, collateral price appreciation can further reduce the loan's health, potentially triggering a hard liquidation.</li> <li>If the health of your loan drops to zero or below, your position will get hard-liquidated with no option of de-liquidation.</li> </ul> <p>Borrowers should be aware that, while in soft liquidation, they essentially pay a fee to arbitrageurs in the form of favorable pricing. This will gradually erode the health of the position, especially during times of high volatility and, importantly, even when the market price of their collateral is increasing. This activity can decrease the position's health and cause it to undergo \"hard\" liquidation, whereby the collateral is sold off and the Borrower's position is closed. Borrowers are advised to monitor market conditions and actively manage their collateral to mitigate the liquidation risk. Borrowers should also be aware that if the loan's health falls below a certain threshold, hard liquidation could occur, leading to collateral loss.</p>"},{"location":"risks-security/risks/lending/#interest-rates","title":"Interest Rates","text":"<p>The borrowing rate is algorithmically determined based on the utilization rate of the lending markets. It is calculated using a function that accounts for the spectrum of borrowing activity, ranging from conditions where no assets are borrowed (where the rate is set to a minimum) to conditions where all available assets are borrowed (where the rate is set to a maximum). The rates within the described monetary policy are subject to changes only by Curve DAO. More information on the interest rate model can be found in the Semi-log Monetary Policy docs.</p>"},{"location":"risks-security/risks/lending/#lending-risks","title":"Lending Risks","text":"<p>When participating in lending activities on Curve Lending, Users may deposit crvUSD (or other assets designated for borrowing) into non-custodial Vaults that accrue interest from borrowers. There may also be the opportunity for additional CRV incentives by staking Vault tokens in a Gauge contract, pending DAO approval.</p>"},{"location":"risks-security/risks/lending/#risk-of-illiquidity","title":"Risk of Illiquidity","text":"<p>While these Vaults enable Users to supply liquidity and potentially earn returns, Users maintain the right to withdraw their assets at any time, so long as liquidity is available. There may be temporary or permanent states of illiquidity that prevent Lenders from fully or partially withdrawing their funds. This may result from diverse circumstances, including excessive borrow demand, a poorly configured interest rate model, a failure associated with the collateral asset, or a drastic reduction in incentives to a market. Similarly, there may be high volatility in the behavior of either lenders, borrowers, or both, which causes sharp swings in interest rates.</p>"},{"location":"risks-security/risks/lending/#risk-of-bad-debt","title":"Risk of Bad Debt","text":"<p>In extreme scenarios, Lenders may experience a shortfall through the accumulation of bad debt. This may occur if collateral prices fall sharply, especially in combination with network congestion that inhibits timely liquidation of positions. In such cases, Borrowers may need a financial motive to repay their debt, and Lenders may race to withdraw any available liquidity, saddling the Lenders remaining in the Vault with the shortfall.</p> <p>Curve Lending is designed to minimize the risk of bad debt through over-collateralization and the LLAMMA liquidation algorithm. While over-collateralization and the LLAMMA algorithm act as risk mitigation tools, they do not fully insulate Lenders from the inherent risks associated with Curve Lending and assets in its markets, including smart contract vulnerabilities, market volatility, failures in economic models, and regulatory challenges that threaten product viability. Lenders are advised to understand their exposure to risks associated with the collateral asset in Vaults they choose to interact with and appreciate the possibility of experiencing partial or total loss.</p>"},{"location":"risks-security/risks/lending/#crvusd-risks","title":"crvUSD Risks","text":"<p>Users should be mindful of risks associated with exposure to the crvUSD stablecoin:</p> <ul> <li>Investing in crvUSD carries inherent risks that could lead to partial or complete loss of your investment due to its experimental nature. You are responsible for understanding the risks of buying, selling, and using crvUSD and its infrastructure.</li> <li>The value of crvUSD can fluctuate due to stablecoin market volatility or rapid changes in the liquidity of the stablecoin.</li> <li>crvUSD is exclusively issued by smart contracts, without an intermediary. However, the parameters that ensure the proper operation of the crvUSD infrastructure are subject to updates approved by Curve DAO. Users must stay informed about any parameter changes in the stablecoin infrastructure.</li> <li>crvUSD is not recognized as legal tender by any authority and is not guaranteed to be accepted for payments, subject to changing regulatory landscapes which may affect its legality and utility.</li> <li>Information provided by crvUSD front-end is solely for educational purposes and does not constitute any form of professional advice, leaving users solely responsible for ensuring actions meet their financial goals.</li> <li>Despite efforts to maintain price stability, crvUSD faces the risk of depegging due to market volatility, regulatory changes, or technological issues, potentially affecting its value.</li> <li>Users of crvUSD are exposed to various technological risks, including irreversible transactions, anonymity and security concerns, software dependency, cybersecurity threats, and operational and settlement risks, which can lead to potential asset loss.</li> <li>The continued development and functionality of the crvUSD protocol rely on developer contributions, with no guarantee of sustained involvement, posing a risk to its maintenance and scalability.</li> </ul>"},{"location":"risks-security/risks/lending/#general-financial-risks","title":"General Financial Risks","text":""},{"location":"risks-security/risks/lending/#volatility","title":"Volatility","text":"<p>Users should be aware that the prices of cryptocurrencies and tokens are highly volatile and subject to dramatic fluctuations due to their speculative nature and variable acceptance as a payment method. The market value of blockchain-based assets can significantly decline, potentially resulting in losses. Transactions within blockchain systems, including Ethereum Mainnet and others, may experience variable costs and speeds, affecting asset access and usability. Users are encouraged to develop their strategies for managing volatility.</p>"},{"location":"risks-security/risks/lending/#financial-loss","title":"Financial Loss","text":"<p>Users should know that cryptocurrencies and tokens are highly experimental and carry significant risks. Engaging in lending and borrowing activities involves irreversible, final, and non-refundable transactions. Users must participate in these activities at their own risk, understanding that the potential for financial loss is substantial. Users are advised to carefully evaluate their lending and borrowing strategies, considering their personal circumstances and financial resources to determine the most suitable situation.</p>"},{"location":"risks-security/risks/lending/#use-of-financial-terms","title":"Use of Financial Terms","text":"<p>Financial terms used in the context of Curve Lending, such as \"debt,\" \"lend,\" \"borrow,\" and similar, are meant for analogy purposes only. They draw comparisons between the operations of decentralized finance smart contracts and traditional finance activities, emphasizing the automated and deterministic nature of DeFi systems. These terms should not be interpreted in their traditional financial context, as DeFi transactions involve distinct mechanisms and risks. Users are encouraged to understand the specific meanings within the DeFi framework.</p> <p>For up-to-date risk disclaimer, click here.</p>"},{"location":"risks-security/risks/pool/","title":"Liquidity Pools","text":"Curve Pool Risk Disclosures for Liquidity Providers <p>Providing liquidity on Curve doesn't come without risks. Before making a deposit, it is best to research and understand the risks involved.</p> <p>Curve Whitepapers Smart Contract Audits</p>"},{"location":"risks-security/risks/pool/#technology-risk","title":"Technology Risk","text":""},{"location":"risks-security/risks/pool/#smart-contract-risk","title":"Smart Contract Risk:","text":"<p>Curve relies on smart contracts, which are self-executing pieces of code. While these contracts are designed to be secure, there is a risk that they may contain vulnerabilities or bugs. Malicious actors could exploit these vulnerabilities, resulting in the loss of funds or other adverse consequences. It is essential for users to conduct due diligence and review the smart contracts and security audit reports to assess the inherent risks.</p> <p>Curve smart contracts have undergone multiple audits by reputable firms including Trail of Bits, MixBytes, QuantStamp, and ChainSecurity to enhance protocol security. While smart contract audits play an important role in good security practices to mitigate user risks, they don't eliminate all risks. Users should always exercise caution regardless of Curve's commitment to protocol security.</p>"},{"location":"risks-security/risks/pool/#immutability-and-irreversibility-of-transactions","title":"Immutability and Irreversibility of Transactions:","text":"<p>When you engage in transactions on Ethereum or EVM-compatible blockchains, it is important to understand that these transactions are immutable and irreversible. Once a transaction is confirmed and recorded on the blockchain, it cannot be modified, reversed, or deleted. This means that if a user sends funds to an incorrect address or engage in a fraudulent transaction, it may not be possible to recover the funds. It is crucial to exercise caution, verify transaction details, and use secure wallets to minimize the risk of irreversible transactions.</p>"},{"location":"risks-security/risks/pool/#counterparty-risk","title":"Counterparty Risk","text":""},{"location":"risks-security/risks/pool/#access-control","title":"Access Control:","text":"<p>Curve pool smart contracts are intentionally designed to be immutable and noncustodial, meaning they cannot be upgraded and liquidity providers always retain full control of their funds. While this characteristic may limit protective actions in case of emergencies, it significantly strengthens user assurances about custody of their funds.</p> <p>The Curve protocol is governed by a Decentralized Autonomous Organization (DAO) comprised of veCRV tokenholders that requires a 1-week vote period with 51% approval and a sufficient voter quorum to execute any actions. It controls critical system functions, including the implementation of new system contracts and the adjustment of system parameters.</p> <p>The Curve Emergency Admin is a 5-of-9 multisig composed of Curve community members. It has restricted rights to undertake actions that do not directly impact users' funds, including canceling parameter changes authorized by the DAO and halting CRV emissions to a pool. Early pool implementations included a timelimited function to freeze swaps and deposits in case of emergency, but this precautionary function has since been deprecated in current pool implementations.</p>"},{"location":"risks-security/risks/pool/#asset-risk","title":"Asset Risk","text":""},{"location":"risks-security/risks/pool/#permanent-loss-of-a-peg","title":"Permanent Loss of a Peg:","text":"<p>Stablecoins and other derivative assets are designed to maintain a peg to a reference asset. If one of the pool assets drops below its peg, it effectively means that liquidity providers in the pool hold almost all their liquidity in that token. The depegged token may never recover as a result of a technical failure, insolvency, or other adverse situations.</p> <p>If the token fails to regain its peg, liquidity providers will encounter losses proportional to the severity of the depeg. The potential permanent loss highlights the importance of thorough consideration and caution when participating in activities involving stablecoins and/or derivative assets.</p>"},{"location":"risks-security/risks/pool/#impermanent-loss","title":"Impermanent Loss:","text":"<p>Providing liquidity to Curve pools may expose users to the risk of impermanent loss. Fluctuations in asset prices after supplying to a pool can result in losses when users remove liquidity. Before engaging in liquidity provision activities, users are advised to carefully evaluate the potential for impermanent loss and consider their own risk tolerance.</p> <p>StableSwap pools are designed to mitigate impermanent loss by pairing assets that are expected to exhibit mean-reverting behavior. This assumption may not hold true in every case, requiring diligent assessment when interacting with these pools.</p> <p>CryptoSwap V2 pools are designed with an internal oracle to concentrate liquidity around the current market price. The algorithm attempts to offset the effects of impermanent loss by calculating fees generated by the pool and ensuring the pool is in profit before re-pegging. Impermanent loss may still occur in CryptoSwap V2 pools, particularly when the earned fees are insufficient to counterbalance the impact of re-pegging. This underscores the need for users to be attentive about the dynamics of these pools when making decisions about liquidity provision.</p>"},{"location":"risks-security/risks/pool/#price-volatility","title":"Price Volatility:","text":"<p>Cryptocurrencies and ERC20 tokens have historically exhibited significant price volatility. They can experience rapid and substantial fluctuations in value, which may occur within short periods of time. The market value of any token may rise or fall, and there is no guarantee of any specific price stability.</p> <p>The overall market dynamics, including price volatility, liquidity fluctuations, and broader economic factors, can impact the value of user funds when providing liquidity. Sudden market movements or unexpected events can result in losses that may be difficult to anticipate or mitigate.</p>"},{"location":"risks-security/risks/pool/#unvetted-tokens","title":"Unvetted Tokens:","text":"<p>Due to the permissionless pool factory and the absence of strict onboarding criteria, not every token included in Curve pools undergoes a detailed independent risk assessment. Curve pools may contain unvetted tokens that have uncertain value or potential fraudulent characteristics. The presence of unvetted tokens introduces potential risks, including exchange rate volatility, smart contract vulnerabilities, liquidity risks, and other unforeseen circumstances that could result in the loss of funds or other adverse consequences.</p> <p>When participating as a liquidity provider in any pool, users should carefully assess the tokens' functionality, security audits, team credibility, community feedback, and other relevant factors to make informed decisions and mitigate potential risks associated with the pool assets.</p>"},{"location":"risks-security/risks/pool/#pools-with-lending-assets","title":"Pools with Lending Assets:","text":"<p>Due to composability within DeFi, it is possible for assets in Curve pools to be receipt tokens for deposits in third party lending platforms. Composability of this sort can amplify yields for liquidity providers, but it also exposes users to additional risks associated with the underlying lending protocol. Users interacting with pools that involve lending assets should be mindful of this additional risk and conduct due diligence on the associated lending protocol.</p>"},{"location":"risks-security/risks/pool/#regulatory-risk","title":"Regulatory Risk","text":""},{"location":"risks-security/risks/pool/#regulatory-uncertainty","title":"Regulatory Uncertainty:","text":"<p>The regulatory landscape surrounding blockchain technology, DeFi protocols, tokens, cryptocurrencies, and related activities is constantly evolving, resulting in regulatory uncertainty. The lack of clear and consistent regulations may impact legal obligations, compliance requirements, and potential risks associated with the protocol activities.</p> <p>Disclaimer: The information provided within this context does not constitute financial, legal, or tax advice personalized to your specific circumstances. The content presented is for informational purposes only and should not be relied upon as a substitute for professional advice tailored to your individual needs. It is recommended that you seek the advice of qualified professionals regarding financial, legal, and tax matters before engaging in any activities on Curve.</p>"},{"location":"troubleshooting/disabling-crypto-wallets-in-brave/","title":"Disabling crypto wallets in brave","text":"<p>The native \"Crypto Wallets\" app in your Brave browser can often interfere with your web3 provider. When using Metamask, it is important to make sure Brave is pointing to it and not its native implementation.</p>"},{"location":"troubleshooting/disabling-crypto-wallets-in-brave/#pointing-brave-to-metamask","title":"Pointing Brave to Metamask","text":"<p>Open your web browser, and paste the following in your URL bar: brave://settings/extensions</p> <p></p> <p>Click the dropdown and switch to Metamask. You can also disable Crypto Wallets on startup.</p>"},{"location":"troubleshooting/dropping-and-replacing-a-stuck-transaction/","title":"Dropping and replacing a stuck transaction","text":"<p>A short tutorial on dropping and replacing a stuck Ethereum transaction.</p> <p>You've submitted a transaction in Metamask and it just won't come through. Those gas estimates betrayed you and you're stuck looking at your pending transaction on Etherscan. It's happened to everyone and it's not pleasant but there's a fairly simple solution which most people will come to learn about.</p> <p>This guide isn't Curve Finance specific but as gas prices are reaching new highs, stuck transactions are getting more common and knowing how to drop and replace is thus become more and more useful.</p> <p>First and foremost, it's important to understand you can only do this if your transaction is pending. If it isn't your transaction cannot be cancelled anymore.</p> <p>If you want to understand how this works, you should know that Ethereum transactions must be submitted with an incremental nonce. Each transaction has a nonce (a number) assigned to it and a number cannot be skipped. The way to replace and drop is to submit a new transaction with a higher gas price and the same nonce. This will tell the miners this more expensive transaction is the one that should be mined and your stuck transaction will be discarded.</p>"},{"location":"troubleshooting/dropping-and-replacing-a-stuck-transaction/#enable-custom-nonce-in-metamask","title":"Enable custom nonce in Metamask","text":"<p>Visit Metamask and select \"Settings\", then \"Advanced\" and scroll down to find and enable \"Customize transaction nonce\".</p> <p></p>"},{"location":"troubleshooting/dropping-and-replacing-a-stuck-transaction/#finding-your-pending-transaction-nonce","title":"Finding your pending transaction nonce","text":"<p>Visit your address on Etherscan and click on your pending transaction. If you scroll down you will find \"Nonce\":</p> <p></p> <p>Write down this nonce and return to Metamask.</p>"},{"location":"troubleshooting/dropping-and-replacing-a-stuck-transaction/#replacing-your-transaction","title":"Replacing your transaction","text":"<p>Now that you have your nonce, go back to Ethereum and send yourself 0 Ethereum, on the confirmation screen, type the nonce you got from Etherscan.</p> <p>Make sure your gas price is suitable this time by checking https://ethgasstation.info/ for example.</p> <p></p> <p>Confirm your transaction and that's it. Your 0 Ethereum transaction should be mined which will drop and replace your stuck transaction which you can confirm on Etherscan.</p>"},{"location":"troubleshooting/recovering-a-cross-asset-swap/","title":"Recovering cross-asset swaps","text":"<p>This is a very old guide</p> <p>This feature was deprecated more than 12 months ago and this information is provided solely in the rare event someone still needs to recover a swap cross asset from from the synthetix era.</p> <p>If Curve has lost transaction of your cross asset swap, do not panic, there is a simple way to recover it.</p>"},{"location":"troubleshooting/recovering-a-cross-asset-swap/#finding-the-token-id","title":"Finding the token id","text":"<p>Visit your address on Etherscan and click on ERC721:</p> <p></p> <p>And then click on your latest cross-asset swap, you should find a long string of numbers like below:</p> <p></p>"},{"location":"troubleshooting/recovering-a-cross-asset-swap/#initiate-recovery","title":"Initiate recovery","text":"<p>Visit: https://classic.curve.fi/recover\u200b</p> <p>Enter your token id found on Etherscan, enter your the token you would like to receive (if your token has sBTC then it must be a Bitcoin token that shares a pool with sBTC, if your token is sUSD, it should be a token that shares a pool with sUSD) and then click recover.</p> <p>Confirm your transaction and you're done.</p>"},{"location":"troubleshooting/support/","title":"Support","text":"<p>Curve is to be used entirely at your own risk. Admins have no special keys and cannot recover funds if sent improperly.</p> <p>However, a wide variety of resources are still available to help you avoid issues. If you have questions, please make sure to check with the following sources:</p> <ul> <li>This section contains common troubleshooting questions, as does the entirety of this documentation.</li> <li>The technical documentation is a comprehensive resource for coders.</li> <li>The Telegram channel is an active place to seek support.</li> <li>The Discord also has an active support channel.</li> </ul> <p>Most users use Curve without issue, however we understand it can be complicated so make sure to ask first and save yourself any possible trouble later!</p>"},{"location":"vecrv/claiming-trading-fees/","title":"Claiming Trading Fees","text":"<p>Every time a trade occurs on Curve Finance, 50% of the trading fee is collected by users who have vote-locked their CRV. Furthermore, since the introduction of Curve's stablecoin, crvUSD, all accumulated interest rate fees are awarded to veCRV holders.</p> <p>As of 20<sup>th</sup> June, 2024, fees are now distributed in crvUSD instead of 3CRV pool tokens.</p> <p>Fees are collected weekly from the pools, converted to crvUSD, and then distributed.  See the \"How does it all work?\" section for how this process works.  Users who lock CRV can claim trading fees as often as they wish; however, fees will only be converted into crvUSD once a week.</p> <p>Info</p> <p>There is a delay before the first claim of crvUSD can be made after locking. A wait of 8 days from the Thursday following the lock is required before a claim can be done.</p>"},{"location":"vecrv/claiming-trading-fees/#new-ui","title":"New UI","text":"<p>To claim trading fees, visit https://curve.fi/#/ethereum/dashboard and click the <code>Claim LP Rewards</code> button. </p> <p> </p> <p>Info</p> <p>3CRV and crvUSD are both shown on this UI as some users may not have claimed their 3CRV fees yet.</p>"},{"location":"vecrv/claiming-trading-fees/#classic-ui","title":"Classic UI","text":"<p>Warning</p> <p>The classic UI has not been updated to claim crvUSD fees.</p> <p>when using the classic UI please visit: https://classic.curve.fi/ and look for the green <code>Claim</code> button in the box labeled <code>veCRV 3pool LP claim</code> at the bottom of the page.</p> <p> </p>"},{"location":"vecrv/claiming-trading-fees/#swapping-3crv-for-a-stable-coin","title":"Swapping 3CRV for a Stable Coin","text":"<p>Note</p> <p>No more 3CRV will be distributed as fees going forward.  The last week of 3CRV fees was 13<sup>th</sup> June, 2024.  However, there may be users who haven't claimed their 3CRV yet, so this information is left for them.</p> <p>3CRV is the liquidity provider (LP) token of the 3pool, which consists of USDC, USDT, and DAI. If the pool is perfectly balanced with 33% USDC, 33% USDT, and 33% DAI, then one 3CRV will represent 0.33 USDC, 0.33 USDT, and 0.33 DAI.</p> <p>If a user wishes to withdraw 3CRV back into a stablecoin, they can do so at: https://curve.fi/#/ethereum/pools/3pool/withdraw. The user needs to select the stablecoin they would like to receive (withdrawing in a balanced or custom proportion is also an option) and click <code>Withdraw</code>. After the transaction is confirmed, they will receive the withdrawn stablecoin.</p> <p> </p> <p>Note</p> <p>When withdrawing 3CRV into a stablecoin, it might be beneficial to take a look at the balance ratios of the pool. Withdrawing in a token with a higher balance than the other two could result in a small premium for that token. On the other hand, withdrawing a token with a lower balance relative to the other two coins may lead to receiving a slightly lesser amount. Further information can be found here.</p>"},{"location":"vecrv/claiming-trading-fees/#how-does-it-all-work","title":"How does it all work?","text":"<p>When the burn process is initiated, a contract collects fees, which come in dozens of different forms such as stablecoins, volatile assets, or LP tokens. These tokens are then burned through various contracts and pools, and converted into crvUSD through swapping in Cowswap.</p> <p>Burning is a costly process due to the complexity and number of transactions involved. However, anyone can trigger this process at any time, provided they are willing to cover the associated costs.</p> <p>Fees can only be claimed for the week that has already concluded, as the burner cannot determine each user's entitlement before the end of that period. Fees will be made available weekly, within 24 hours after Thursday midnight UTC, as long as someone \u2014 typically the Curve team \u2014 has initiated the burn process beforehand.</p> <p>Info</p> <p>See the Fee Collection &amp; Distribution page for more information about this process.</p>"},{"location":"vecrv/fee-collection-distribution/","title":"Fee Collection & Distribution","text":"Fee Collection &amp; Distribution <p>The Curve DAO earns revenue from pools and crvUSD minting markets within the ecosystem.  Each week this revenue is collected in different tokens and exchanged for a single token (currently crvUSD) which is then distributed to veCRV holders.</p>"},{"location":"vecrv/fee-collection-distribution/#admin-fees","title":"Admin Fees","text":"<p>The revenue comes in the form of admin fees.  There are three different ways these accrue and are collected:</p>"},{"location":"vecrv/fee-collection-distribution/#stableswap-fees","title":"Stableswap Fees","text":"<p>Stableswap admin fees are 50% of the total fee charged using a Stableswap pool.  The fee is taken in the output token of the swap and calculated against the final amount received. For example, if swapping from USDC to DAI, the fee is taken in DAI.  Because of this every week each coin in the pool will have accrued fees that can be collected, e.g., for the pool below Admin Fees in USDC and DAI can both be collected.</p> <p></p>"},{"location":"vecrv/fee-collection-distribution/#cryptoswap-fees","title":"Cryptoswap Fees","text":"<p>Cryptoswap admin fees are 50% of the total fee charged from a Cryptoswap pool.  As Cryptoswap pools always maintain balance, these fees accrue in the LP token of a pool, which represents an equal share of all assets in the pool.  LP shares are collected each week for these pools.</p> <p></p>"},{"location":"vecrv/fee-collection-distribution/#crvusd-minting-market-fees","title":"crvUSD Minting Market Fees","text":"<p>All accrued interest on debt in crvUSD minting markets is collected as crvUSD.  Also the AMM for crvUSD minting markets (LLAMMA) has the ability to collect admin fees on swaps, but currently all fees in these pools go to liquidity providers.</p> <p></p>"},{"location":"vecrv/fee-collection-distribution/#fee-collection-distribution-architecture","title":"Fee Collection &amp; Distribution Architecture","text":"<p>Currently there are two ways fee collection, and distribution is being achieved.  The old way relies on hardcoding exchange routes for each coin collected, and the manual collection of these each week.  This is being phased out as a new architecture has been developed which incentivizes 3<sup>rd</sup> parties to do the collection of fees and uses Cowswap's conditional orders to flexibly sell any coin/token collected.</p> <p>The distribution of each week's fees happens on Thursday.  The fees are evenly split between all veCRV and can be claimed by veCRV holders at any time.  See How to Claim veCRV Trading Fees for more information.</p>"},{"location":"vecrv/fee-collection-distribution/#the-new-cowswap-architecture","title":"The New Cowswap Architecture","text":"<p>The new Cowswap Architecture is based around a 4 phases occurring on different days of the week.  These phases are: <code>collection</code> on Monday, <code>exchanging</code> on Tuesday, <code>forwarding</code> on Wednesday and <code>distribution</code> on Thursday.  See below for further details about each phase.</p>"},{"location":"vecrv/fee-collection-distribution/#collection-monday","title":"Collection - Monday","text":"<p>The <code>collection</code> phase occurs on Monday, it makes sure any significant amounts of fees are collected and ready to be sold the following day.</p> <p>Newer pools automatically claim admin fees throughout the week when users withdraw their liquidity from the pools.  </p> <p>Otherwise, on Monday anyone can call functions which claim the fees from pools and then create conditional orders on Cowswap to sell the coins/tokens on Tuesday.  Doing this work is incentivized by giving the caller a reward.</p> <p></p>"},{"location":"vecrv/fee-collection-distribution/#exchanging-tuesday","title":"Exchanging - Tuesday","text":"<p>The <code>exchanging</code> phase happens on Tuesday.  In this phase the conditional sell orders which were created on Monday during the <code>collection</code> phase can be executed by Cowswap searchers.  Each coin/token is swapped separately, and by the end of the day all coins and tokens should be swapped into the target coin (currently crvUSD).</p> <p></p>"},{"location":"vecrv/fee-collection-distribution/#forwarding-wednesday","title":"Forwarding - Wednesday","text":"<p>The <code>forwarding</code> phase happens on Wednesday.  All the target coin (currently crvUSD) which was exchanged for on Tuesday is forwarded to the Fee Distributor on Ethereum Mainnet through an intermediary contract called a hooker.  The hooker contract is a future proofing contract which can implement any arbitrary functions that are approved by the DAO.  Calling the function to do this transfer is incentivized by giving the caller a reward.</p>"},{"location":"vecrv/fee-collection-distribution/#distribution-thursday","title":"Distribution - Thursday","text":"<p>Fees are distributed to veCRV holders weekly, within 24 hours after Thursday 00:00 UTC. These fees are split evenly among all veCRV holders, who can claim their share once each week after distribution. Users can first claim trading fees 8 days after the first Thursday following their lock. For example, if you lock on a Tuesday, you can claim trading fees 10 days later on Thursday. See How to Claim veCRV Trading Fees for more information.</p> <p>Info</p> <p>For more technical information regarding this new process please see the fee collection and distribution pages on the technical documentation: https://docs.curve.fi/fees/overview/</p>"},{"location":"vecrv/fee-collection-distribution/#old-architecture","title":"Old Architecture","text":"<p>This is outdated and is currently being phased out.  </p>"},{"location":"vecrv/fee-collection-distribution/#collection","title":"Collection","text":"<p>Collection happened manually by calling withdraw functions on pools and crvUSD markets.</p>"},{"location":"vecrv/fee-collection-distribution/#exchanging-burning","title":"Exchanging (Burning)","text":"<p>This happened manually by hardcoding in different exchange routes for each token, e.g., to transfer wstETH to 3CRV (the old target coin) the process was:</p> <ol> <li><code>wstETH</code> to <code>stETH</code> via unwrapping (wstETH Burner)</li> <li><code>stETH</code> to <code>ETH</code> via swap through stETH/ETH curve pool (SwapStableBurner)</li> <li><code>ETH</code> to <code>USDT</code> via swap through tricrypto pool (CryptoSwapBurner)</li> <li><code>USDT</code> to <code>3CRV</code> via depositing into 3pool (StableDepositBurner)</li> </ol> <p>This process worked well, but became cumbersome when an exchange route was needed for every coin in every pool.  The exchanges also needed to be called manually.</p>"},{"location":"vecrv/fee-collection-distribution/#distribution","title":"Distribution","text":"<p>After the exchanging process is completed distribution happens by forwarding the exchanged coins to the fee distributor on Ethereum Mainnet.  Fees are distributed to veCRV holders weekly, within 24 hours after Thursday 00:00 UTC. These fees are split evenly among all veCRV holders, who can claim their share once each week after distribution. Users can first claim trading fees 8 days after the first Thursday following their lock. For example, if you lock on a Tuesday, you can claim trading fees 10 days later on Thursday. See How to Claim veCRV Trading Fees for more information.</p> <p>Info</p> <p>For more technical information regarding this old process please see the fee collection and distribution pages on the technical documentation: https://docs.curve.fi/curve_dao/fee-collection-distribution/overview/</p>"},{"location":"vecrv/locking-your-crv/","title":"How to Lock CRV","text":"<p> How to lock CRV</p> <p>Warning</p> <p>When a user locks their CRV tokens for voting, they will receive veCRV based on the lock duration and the amount locked. Locking is not reversible and veCRV tokens are non-transferable. If a user decides to vote-lock their CRV tokens, they will only be able to reclaim the CRV tokens after the lock duration has ended.</p> <p>Additionally, a user cannot have multiple locks with different expiry dates. However, a lock can be extended, or additional CRV can be added to it at any time.</p> <p>Users must specify the amount of CRV they wish to lock and their preferred lock duration. The minimum lock period is one week, while the maximum is four years. The amount of veCRV linearly decays over time, reaching 0 when the lock duration ends.</p> <p>To lock CRV tokens, visit either the old UI: https://dao.curve.fi/locker or new UI: https://curve.fi/#/ethereum/locker/create\u200b</p> <p> </p> old UI <p> </p> new UI <p>Tip</p> <p>The amount of veCRV received per CRV when locking depends on the duration of the lock. See the formula here.</p>"},{"location":"vecrv/overview/","title":"Overview","text":"Locked CRV (veCRV) <p>veCRV is an acronym for vote-escrowed CRV.  Users can lock their CRV for a minimum of 1 week, maximum of 4 years, in return the user is given veCRV, veCRV amount decays linearly over the chosen lock time.  veCRV is not transferrable.  The longer you lock the more veCRV you receive, see the locking formula section for a detailed explanation but the simple explanation is:</p> <ul> <li>1 CRV locked for 4 years = 1 veCRV</li> <li>1 CRV locked for 3 years = 0.75 veCRV</li> <li>1 CRV locked for 2 years = 0.5 veCRV</li> <li>1 CRV locked for 1 year = 0.25 veCRV</li> </ul> <p>Locking was a concept created to align incentives for governance.  Many coin voting systems have a problem where someone can buy tokens off the market to influence a governance vote, then sell the tokens after the vote passed/failed.  These users can influence governance votes greatly and only take minimal risk by holding tokens for a few days.  Locking stops this happening.  Users must lock their tokens for a period of time to receive voting power, and users are rewarded with more voting power if they lock their tokens for a longer period of time.</p> <p>To find out how to lock see the guide here: lock CRV tokens</p> <p>Info</p> <p>The amount of veCRV shown as a statistic in various places is not a true reflection of the amount of locked CRV.  As 1 veCRV does not equal 1 CRV due to locking time and decay.  Read the locking information section of this page for more information</p>"},{"location":"vecrv/overview/#vecrv-benefits","title":"veCRV Benefits","text":"<p>Users with veCRV are given the following benefits:</p>"},{"location":"vecrv/overview/#earning-fees","title":"Earning Fees","text":"<p>After 2 community-led proposals and subsequent governance votes in September 2020 (Link to votes: [1], [2]), the admin fees of Curve pools were set to 50%, this means 50% of all trading fees are distributed to veCRV holders, while the remaining 50% goes to the respective liquidity providers of the pools. This distribution was implemented to align the incentives between liquidity providers and governance participants (veCRV holders). Additionally, since the launch of Curve's own stablecoin (crvUSD), 100% of the accrued interest from crvUSD markets also goes to veCRV holders.  veCRV holders don't receive any direct value from lending markets, but they do receive indirect value from increasing crvUSD supply.</p> <p>All collected fees are converted to <code>crvUSD</code>  and distributed among veCRV holders. See Claiming Trading Fees for how to claim, or Fee Collection &amp; Distribution for how they are collected.</p>"},{"location":"vecrv/overview/#boosting-crv-rewards","title":"Boosting CRV Rewards","text":"<p>One of the primary incentives for vote-locking is the boost mechanism. Users who provide liquidity to a swap pool and/or lending market with a reward gauge and have some vote-locked CRV receive boosted CRV rewards.  See Boosting your CRV rewards for more information.</p>"},{"location":"vecrv/overview/#governance","title":"Governance","text":"<ul> <li> <p>The veCRV balance represents the voting power of a user in the Curve DAO, which allows them to vote on on-chain proposals. </p> </li> <li> <p>Additionally, a crucial part of Curve governance are gauge weight votes. Curve token emissions are created in a way that allows veCRV holders to choose how future emissions are allocated. Liquidity pools on Curve can be added to the GaugeController via a successfully passed DAO vote, making them eligible to receive CRV token emissions. The gauge weights determine how much CRV each pool receives. Every Thursday at 00:00 UTC, the updated gauge weights are applied.  More info on Voting and Gauge Weights</p> </li> </ul>"},{"location":"vecrv/overview/#locking-information","title":"Locking Information","text":"<p>When a user locks their CRV tokens for voting, they will receive veCRV based on the lock duration and the amount locked. Locking is not reversible and veCRV tokens are non-transferable. If a user decides to vote-lock their CRV tokens, they will only be able to reclaim the CRV tokens after the lock duration has ended.</p> <p>Additionally, a user cannot have multiple locks with different expiry dates. However, a lock can be extended, or additional CRV can be added to it at any time.</p>"},{"location":"vecrv/overview/#crv-to-vecrv-formula","title":"CRV to veCRV formula","text":"<p>When locking CRV to veCRV you are rewarded with an amount of veCRV based on how long you lock, the minimum time is 1 week, the maximum time is 4 years:</p> \\[ \\text{veCRV} = \\frac{\\text{CRV} \\times \\text{lockTime}}{4 \\text{ years}} \\] <p>The maximum duration of a lock is 4 years, users cannot lock for longer periods to keep the 1 CRV: 1 veCRV ratio, they must instead continue extending their lock.  Users can withdraw their CRV at any time after their veCRV has decayed to 0 (lock time has expired).</p>"},{"location":"vecrv/overview/#vecrv-decay","title":"veCRV decay","text":"<p>The amount of veCRV a user has will decay over time as their unlock date draws closer.  The <code>lockTime</code> parameter in the equation above should more aptly be called <code>lockTimeLeft</code> as a user's veCRV is constantly recalculated.  There are two ways a user can change their lock.  They can add to their lock or they can extend their lock.  What happens in both situations and how it affects their veCRV and the decay is shown in the charts below.</p>"},{"location":"vecrv/overview/#extending-locks","title":"Extending Locks","text":"<p>Extending locks means increasing the time left on a lock.  In the above example if Alice locked 100 CRV for 4 years, after 3 years she would only have 25 veCRV left as her lock time is now 1 year.  If she extended her lock to be 4 years again after these 3 years, she would again have 100 veCRV:</p>"},{"location":"vecrv/overview/#adding-crv-to-locks","title":"Adding CRV to Locks","text":"<p>Adding CRV to locks means the unlock date will remain the same, but more CRV will be locked, meaning more veCRV. If Alice locked 100 CRV for 4 years, but after 2 years added 200 CRV to her lock, she would have 150 veCRV (300 CRV total locked for 2 years).  This veCRV would continue to decay to 0 over the next 2 years:</p>"},{"location":"vecrv/overview/#external-vecrv-incentives","title":"External veCRV Incentives","text":"<p>External marketplaces (out of Curve's purview) have been created to pay for users to vote for specific swap pools/lending markets and receive rewards in return.  Curve does not condone or condemn such marketplaces or behavior.  It is within the users' rights to use these marketplaces as they wish.</p> <p>These incentives can be very lucrative and can be multiples of the platform fees earned by veCRV weekly.</p> <p>These incentives work in the following way:</p> <ol> <li>A project wants liquidity for their token in a swap pool on Curve</li> <li>The project puts up a incentive for users to vote for the swap pool in the weekly gauge vote.  This incentive can be of any amount in any token, e.g., $100k in ETH.</li> <li> <p>If users vote for the pool, they receive a portion of the incentive based on how much veCRV they have, and how much voted for the pool total.  </p> <p>e.g., 2 users vote for the pool Alice and Bob.  Alice has 100k veCRV, Bob has 900k veCRV.  The total which voted for the pool was 1M.  The $100k ETH get split between Alice and Bob based on their veCRV, so Alice gets $10k in ETH, Bob gets $90k in ETH.</p> </li> </ol>"},{"location":"vecrv/overview/#external-crv-liquid-lockers","title":"External CRV Liquid Lockers","text":"<p>CRV liquid lockers are products outside of the Curve platform that allow users to deposit CRV in exchange for a new token. For example, tokenCRV (a hypothetical token) would be received when locking 1 CRV for 1 veCRV permanently. While these tokens aim to represent locked veCRV positions, they sometimes lack the benefits that come with holding veCRV directly. Since the underlying CRV is permanently locked, users cannot redeem their tokenCRV - they can only sell it on the open market. Because these tokens can always be minted by depositing 1 CRV but can only be exited through market sales, their price naturally settles below 1 CRV as users seek liquidity.</p> <p>These tokens are risky, the only way to guarantee being able to withdraw the same amount of CRV as is deposited is to lock through the Official Curve Locker UI.</p>"}]}