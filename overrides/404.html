{% extends "main.html" %}
{% block extrahead %}
<script>
    // Create an object containing all your redirects
    const redirects = {
        "/crv-token/crv-basics": "/crv-token/faq",
        "/crv-token/crv-tokenomics": "/crv-token/supply-distribution",
        "/lending/about": "/lending/overview",
        "/lending/loan-creation": "/lending/how-to-borrow",
        "/lending/supplying-assets": "/lending/how-to-supply",
        "/crvusd/loan-management": "/crvusd/loan-strategies",
        "/crvusd/loan-details": "/crvusd/loan-concepts",
        "/resources/branding": "/glossary-branding/branding",
        "/resources/glossary": "/glossary-branding/glossary",
        "/resources/risks/pool": "/risks-security/risks/pool",
        "/resources/risks/crvusd": "/risks-security/risks/crvusd",
        "/resources/risks/lending": "/risks-security/risks/lending",
        "/resources/security": "/risks-security/security",
        "/governance/fee-collection-distribution": "/vecrv/overview",
        "/crv-token/claiming-trading-fees": "/vecrv/claiming-trading-fees",
        "/lending/understanding-lending": "/lending/overview",
        "/crvusd/loan-details": "/crvusd/loan-concepts",
        "/factory-pools/creating-a-twocrypto-ng-pool": "/pool-creation/creating-a-cryptoswap-pool",
        "/factory-pools/creating-a-stableswap-ng-pool": "/pool-creation/creating-a-stableswap-pool",
        "/base-features/understanding-crypto-pools": "/pools/overview",
        "/lp/calculating-yield/#base-vapy": "/pools/calculating-yield/#base-vapy",
        "/lp/calculating-yield": "/pools/calculating-yield",
    };

    (function redirect() {
        // Remove .md extension first
        const pathWithoutMd = window.location.pathname.replace(/\.md$/, '');
        const hash = window.location.hash;
        console.log(pathWithoutMd, hash);
        let cleanPath;
        
        if (hash) {
            // Keep slash on path but remove it from end of hash if present
            cleanPath = pathWithoutMd + hash.replace(/\/$/, '');
        } else {
            // No hash - remove trailing slash from path
            cleanPath = pathWithoutMd.replace(/\/$/, '');
        }
        console.log(cleanPath);
        // Check redirects
        const redirectUrl = redirects[cleanPath];
        console.log(redirectUrl);
        if (redirectUrl) {
            // Add trailing slash to final redirect
            window.location.href = `${window.location.origin}${redirectUrl}/`;
            return;
        }
    })();
</script>
{% endblock %}

{% block content %}
<h1>404 - Page Not Found</h1>
<p>If you're not automatically redirected, please check the URL or return to the <a href="/">homepage</a>.</p>
{% endblock %}